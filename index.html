<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A romantic Providence anniversary weekend planner featuring Restaurant Week dining, waterfront tours, and comprehensive itinerary with menus, directions, and Uber links.">
    <meta name="keywords" content="Providence anniversary, romantic weekend, Restaurant Week, Providence dining, romantic getaway">
    <meta name="author" content="Providence Anniversary Planner">
    
    <!-- Performance and Caching Meta Tags -->
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <meta http-equiv="Expires" content="Thu, 31 Dec 2025 23:59:59 GMT">
    
    <!-- Resource Hints for Performance -->
    <link rel="dns-prefetch" href="//cdn.tailwindcss.com">
    <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <link rel="dns-prefetch" href="//unpkg.com">
    
    <!-- Critical Resource Loading Optimization -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500&display=swap"></noscript>
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="Providence Anniversary Weekend Planner">
    <meta property="og:description" content="Your complete romantic getaway guide featuring Restaurant Week dining, waterfront walks, historic tours, and all the special moments that make Providence perfect for love.">
    <meta property="og:image" content="assets/images/ugo1.jpg">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Providence Anniversary Weekend Planner">
    <meta property="twitter:description" content="Your complete romantic getaway guide featuring Restaurant Week dining, waterfront walks, historic tours, and all the special moments that make Providence perfect for love.">
    <meta property="twitter:image" content="assets/images/ugo1.jpg">

    <title>Providence Anniversary Weekend Planner</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/icons/favicon.svg">
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="180x180" href="assets/icons/apple-touch-icon.png">
    <meta name="theme-color" content="#C07F63">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="assets/images/ugo1.jpg" as="image">
    <link rel="preload" href="assets/videos/kiss-boomerang.mp4" as="video" type="video/mp4">
    <link rel="prefetch" href="assets/videos/memory-video.mp4" as="video" type="video/mp4">
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <!-- Chosen Palette: Warm Harmony -->
    <!-- Application Structure Plan: The SPA is designed as an interactive dashboard, moving away from the linear report structure for better usability. It's organized into three main thematic sections navigated by a sticky header: 1. "Your Itinerary": A tabbed timeline (Day 1/2/3) that presents the suggested plan chronologically but interactively. This respects the original report's flow while making it more digestible. 2. "Explore Providence": A filterable gallery of all recommendations (dining, activities, tours). This is the core interactive element, allowing the couple to compare options by category and build their own plan, which is more user-friendly than scrolling through a long document. 3. "Plan Your Trip": Consolidates all practical logistics (transport, reservations) into an accordion, making this crucial but secondary information easily accessible without cluttering the main itinerary. This structure prioritizes user-driven exploration and comparison over passive reading. -->
    <!-- Visualization & Content Choices: 1. Dining Comparison (Bar Chart): Report Info: Restaurant price ranges ($$$ vs $$$$). Goal: Compare dining costs visually. Viz: Horizontal Bar Chart (Chart.js/Canvas) showing estimated costs. Justification: Provides a quick, quantitative comparison that's more effective than reading text descriptions. 2. Tour Value (Bubble Chart): Report Info: Tour prices, durations, group sizes. Goal: Compare tour options. Viz: Bubble Chart (Chart.js/Canvas) plotting price vs. duration, with bubble size representing exclusivity (inverse of group size). Justification: Synthesizes three data points into one clear, interactive graphic for easier decision-making. 3. Filterable Cards: Report Info: All activities, restaurants, and sights. Goal: Organize and allow comparison. Presentation: HTML/Tailwind grid. Interaction: JS-powered filters. Justification: Transforms static lists/tables into a dynamic exploration tool. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        /* Universal Responsive Images - Critical for Mobile UX */
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        /* Skip to main content link styles for accessibility */
        .skip-to-main {
            position: absolute;
            left: -999px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
            z-index: 10000;
            background: #fff;
            color: #433A3F;
            padding: 12px 24px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(67,58,63,0.08);
            font-size: 1rem;
            font-weight: 600;
            transition: left 0.2s, top 0.2s;
        }
        .skip-to-main:focus, .skip-to-main:active {
            left: 16px;
            top: 16px;
            width: auto;
            height: auto;
            outline: 2px solid #C07F63;
            outline-offset: 2px;
        }
        
        /* Responsive video elements */
        video {
            max-width: 100%;
            height: auto;
        }

        /* 🎨 Design System - Cohesive Foundation */
        :root {
            /* Color Palette */
            --primary-color: #C07F63;
            --primary-dark: #A9684C;
            --primary-light: #D4967C;
            --secondary-color: #EAE0D5;
            --secondary-dark: #D6C6B3;
            --background-cream: #FDF8F0;
            --background-light: #F5E6D3;
            --text-primary: #433A3F;
            --text-secondary: #6B7280;
            --text-accent: #C07F63;
            --border-color: #E5E7EB;
            --success-color: #10B981;
            --warning-color: #F59E0B;
            --error-color: #EF4444;
            
            /* Typography */
            --font-display: 'Playfair Display', serif;
            --font-body: 'Roboto', sans-serif;
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            --text-4xl: 2.25rem;
            
            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-12: 3rem;
            --space-16: 4rem;
            --space-20: 5rem;
            
            /* Shadows */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            
            /* Border Radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            
            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-normal: 0.3s ease;
            --transition-slow: 0.5s ease;

            /* Enhanced Color Contrast for WCAG AA Compliance (4.5:1 minimum) */
            /* ...existing variables... */
            
            /* High Contrast Color Variations */
            --text-primary-high-contrast: #2D2D2D; /* Darker for better contrast */
            --text-secondary-high-contrast: #4A4A4A; /* Improved contrast */
            --background-high-contrast: #FFFFFF; /* Pure white background */
            --link-color-high-contrast: #1B4D72; /* Darker blue for better contrast */
        }

        /* Base Typography */
        body {
            font-family: var(--font-body);
            background-color: var(--background-cream);
            color: var(--text-primary);
            line-height: 1.6;
        }

        h1, h2, h3, h4, h5, h6, .font-display {
            font-family: var(--font-display);
            line-height: 1.2;
            font-weight: 700;
        }

        /* Apply high contrast where needed */
        .high-contrast-text {
            color: var(--text-primary-high-contrast) !important;
        }

        .nav-link,
        .restaurant-card p,
        .card p,
        .text-secondary {
            color: var(--text-secondary-high-contrast);
        }

        /* Ensure links meet contrast requirements */
        a:not(.btn-primary):not(.cta-button) {
            color: var(--link-color-high-contrast);
            text-decoration: underline;
        }

        a:not(.btn-primary):not(.cta-button):hover {
            color: var(--primary-dark);
            text-decoration: none;
        }

        /* High contrast for form elements */
        input, textarea, select {
            border: 2px solid var(--text-secondary-high-contrast);
            color: var(--text-primary-high-contrast);
        }

        input:focus, textarea:focus, select:focus {
            border-color: var(--primary-color);
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Unified Component Styles */
        .cohesive-card {
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: all var(--transition-normal);
            overflow: hidden;
        }

        .cohesive-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
            border-color: var(--primary-light);
        }

        .cohesive-btn {
            padding: var(--space-3) var(--space-6);
            border-radius: var(--radius-lg);
            font-weight: 500;
            font-size: var(--text-sm);
            transition: all var(--transition-fast);
            cursor: pointer;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
        }

        .cohesive-btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .cohesive-btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .cohesive-btn-secondary {
            background-color: var(--secondary-color);
            color: var(--text-primary);
        }

        .cohesive-btn-secondary:hover {
            background-color: var(--secondary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .cohesive-btn-outline {
            background-color: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .cohesive-btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* Small Action Buttons */
        .cohesive-btn-small {
            padding: var(--space-2) var(--space-3);
            border-radius: var(--radius-xl);
            font-weight: 500;
            font-size: var(--text-xs);
            transition: all var(--transition-fast);
            cursor: pointer;
            border: none;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
        }

        .cohesive-btn-small.primary {
            background-color: var(--primary-color);
            color: white;
        }

        .cohesive-btn-small.primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .cohesive-btn-small.secondary {
            background-color: var(--text-primary);
            color: white;
        }

        .cohesive-btn-small.secondary:hover {
            background-color: black;
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        .cohesive-btn-small.success {
            background-color: var(--success-color);
            color: white;
        }

        .cohesive-btn-small.success:hover {
            background-color: #059669;
            transform: translateY(-1px);
            box-shadow: var(--shadow-sm);
        }

        /* Filter Button Active States */
        .btn-filter.active,
        .restaurant-filter.active {
            background-color: var(--primary-color) !important;
            color: white !important;
            border-color: var(--primary-color) !important;
        }

        .btn-filter:not(.active):hover,
        .restaurant-filter:not(.active):hover {
            background-color: var(--secondary-color) !important;
            border-color: var(--primary-light) !important;
        }

        /* Enhanced Interactive States */
        .card:hover,
        .restaurant-card:hover,
        .memory-card:hover {
            transform: translateY(-4px) !important;
            box-shadow: var(--shadow-xl) !important;
            border-color: var(--primary-light) !important;
        }

        /* Tab Button States */
        .tab-btn.active-tab {
            border-bottom-color: var(--primary-color) !important;
            color: var(--primary-color) !important;
        }

        .tab-btn:hover:not(.active-tab) {
            color: var(--primary-color) !important;
            border-bottom-color: var(--primary-light) !important;
        }

        /* Focus States for Accessibility */
        .cohesive-btn:focus,
        .cohesive-btn-small:focus,
        .nav-link:focus,
        .tab-btn:focus,
        .btn-filter:focus,
        .restaurant-filter:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
            border-radius: var(--radius-md);
        }

        /* Enhanced Animation System */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 5px rgba(192, 127, 99, 0.3); }
            50% { box-shadow: 0 0 20px rgba(192, 127, 99, 0.6), 0 0 30px rgba(192, 127, 99, 0.4); }
        }

        .cohesive-card:hover {
            animation: float 3s ease-in-out infinite;
        }

        .floating-nav:hover {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        /* Loading States */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            animation: shimmer 1.5s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Section Headers */
        .cohesive-section-header {
            text-align: center;
            margin-bottom: var(--space-12);
            padding: var(--space-8) var(--space-4);
        }

        .cohesive-section-title {
            font-size: var(--text-3xl);
            color: var(--text-primary);
            margin-bottom: var(--space-4);
        }

        .cohesive-section-subtitle {
            font-size: var(--text-lg);
            color: var(--text-secondary);
            font-weight: 300;
        }

        /* Navigation Styles */
        .floating-nav {
            position: fixed;
            top: var(--space-6);
            right: var(--space-6);
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--radius-2xl);
            padding: var(--space-4);
            box-shadow: var(--shadow-xl);
            border: 1px solid rgba(192, 127, 99, 0.1);
            transition: all var(--transition-normal);
        }

        .floating-nav.collapsed {
            padding: var(--space-3);
        }

        .nav-toggle {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-md);
        }

        .nav-toggle:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .nav-menu {
            margin-top: var(--space-4);
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            min-width: 200px;
        }

        .nav-menu.hidden {
            display: none;
        }

        .nav-link {
            padding: var(--space-3) var(--space-4);
            border-radius: var(--radius-md);
            color: var(--text-primary);
            text-decoration: none;
            transition: all var(--transition-fast);
            font-size: var(--text-sm);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .nav-link:hover {
            background-color: var(--primary-color);
            color: white;
            transform: translateX(4px);
        }

        .nav-link.active {
            background-color: var(--primary-light);
            color: white;
        }

        /* Progress Indicator */
        .progress-indicator {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(192, 127, 99, 0.1);
            z-index: 999;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), var(--primary-light));
            transition: width var(--transition-normal);
            border-radius: 0 4px 4px 0;
        }

        /* Responsive Design for Floating Navigation */
        @media (max-width: 768px) {
            .floating-nav {
                top: var(--space-4);
                right: var(--space-4);
                left: var(--space-4);
                width: auto;
                max-width: 320px;
                margin: 0 auto;
            }
            
            .nav-menu {
                max-height: 60vh;
                overflow-y: auto;
            }
            
            .nav-link {
                font-size: var(--text-base);
                padding: var(--space-4);
            }
        }

        /* Section Bridge Styles */
        .cohesive-section-bridge {
            position: relative;
            margin-top: var(--space-8);
        }

        .cohesive-section-bridge::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--border-color), transparent);
            z-index: 1;
        }

        .cohesive-section-bridge > div {
            position: relative;
            z-index: 2;
        }

        /* Legacy styles for backward compatibility - now using design system */
        .active-tab {
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
        }
        .nav-link {
            transition: color var(--transition-normal);
        }
        .nav-link:hover {
            color: var(--primary-color);
        }
        .card {
            transition: transform var(--transition-normal), box-shadow var(--transition-normal);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }
        .btn-primary {
            background-color: var(--primary-color);
            color: var(--background-cream);
            transition: background-color var(--transition-normal);
        }
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--text-primary);
            transition: background-color var(--transition-normal);
        }
        .btn-secondary:hover {
            background-color: var(--secondary-dark);
        }
        .btn-filter.active {
            background-color: var(--primary-color);
            color: var(--background-cream);
        }
        
        /* Dynamic Itinerary Management Styles */
        .itinerary-item.edit-mode {
            border: 2px dashed var(--primary-color);
            border-radius: var(--radius-md);
            padding: var(--space-2);
            margin: var(--space-1) 0;
            transition: all var(--transition-normal);
        }
        
        .itinerary-item.edit-mode:hover {
            background-color: rgba(192, 127, 99, 0.05);
            border-color: var(--primary-dark);
        }
        
        .itinerary-item[draggable="true"] {
            cursor: move;
        }
        
        .itinerary-item[draggable="true"]:hover {
            transform: scale(1.02);
        }
        
        .drag-handle {
            font-size: var(--text-sm);
            line-height: 1;
        }
        
        .icon-btn.active {
            border-color: var(--primary-color) !important;
            background-color: rgba(192, 127, 99, 0.1) !important;
        }
        
        .edit-item-btn, .delete-item-btn, .move-up-btn, .move-down-btn {
            font-size: var(--text-xs);
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-lg);
            transition: all var(--transition-fast);
        }
        
        .edit-item-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(192, 127, 99, 0.3);
        }
        
        .delete-item-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
        }
        
        .move-up-btn:hover, .move-down-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 4px rgba(107, 114, 128, 0.3);
        }
        
        .move-up-btn:disabled, .move-down-btn:disabled {
            cursor: not-allowed;
            transform: none !important;
            box-shadow: none !important;
        }
        
        /* Modal animations */
        #itinerary-modal {
            backdrop-filter: blur(4px);
            animation: fadeIn var(--transition-normal) ease-out;
        }
        
        #itinerary-modal > div > div {
            animation: slideUp var(--transition-normal) ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Drag and drop visual feedback */
        .itinerary-item[style*="opacity: 0.5"] {
            transform: rotate(5deg);
            border-color: var(--primary-dark);
        }

        /* Playlist Interface Styles */
        .playlist-creation-card, .music-search-card, .active-playlist-card {
            transition: all var(--transition-normal);
        }
        
        .playlist-creation-card:hover, .music-search-card:hover, .active-playlist-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(147, 51, 234, 0.15);
        }
        
        .playlist-template {
            transition: all 0.2s ease;
        }
        
        .playlist-template:hover {
            transform: scale(1.02);
        }
        
        .service-connection-card {
            transition: all 0.3s ease;
        }
        
        .service-connection-card:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .service-connection-card .w-3.bg-green-400 {
            background-color: #10B981;
        }
        
        .service-connection-card .w-3.bg-red-400 {
            background-color: #EF4444;
        }
        
        .search-filter.active {
            background-color: #8B5CF6;
            color: white;
        }
        
        .search-filter:not(.active):hover {
            background-color: #E5E7EB;
        }
        
        /* Playlist Card Styles */
        .playlist-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(147, 51, 234, 0.2);
            transition: all 0.3s ease;
        }
        
        .playlist-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(147, 51, 234, 0.2);
            border-color: rgba(147, 51, 234, 0.3);
        }
        
        .playlist-card .playlist-cover {
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
        }
        
        /* Song Item Styles */
        .song-item {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .song-item:hover {
            background-color: rgba(147, 51, 234, 0.05);
            transform: translateX(4px);
        }
        
        .song-item .play-btn {
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .song-item:hover .play-btn {
            opacity: 1;
        }
        
        /* Search Results Styles */
        .search-result-item {
            transition: all 0.2s ease;
            cursor: pointer;
        }
        
        .search-result-item:hover {
            background-color: rgba(147, 51, 234, 0.05);
            transform: scale(1.01);
        }
        
        /* Loading Animations */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(147, 51, 234, 0.3);
            border-radius: 50%;
            border-top-color: #8B5CF6;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Responsive Playlist Grid */
        @media (max-width: 768px) {
            .playlist-creation-card, .music-search-card, .active-playlist-card {
                margin-bottom: 1rem;
            }
            
            .service-connection-card {
                flex: 1;
                min-width: 0;
            }
            
            .service-connection-card span:last-child {
                display: none;
            }
        }

        .chart-container {
            position: relative;
            margin: auto;
            height: 350px;
            width: 100%;
            max-width: 700px;
        }
        .memory-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .memory-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* Hero Section with Background Image & Overlay */
        .hero-bg {
            background: linear-gradient(135deg, rgba(192, 127, 99, 0.7), rgba(192, 127, 99, 0.5)), 
                        url('assets/images/ugo1.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            position: relative;
            overflow: hidden;
        }
        
        .hero-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 70%, rgba(253, 248, 240, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 70% 30%, rgba(192, 127, 99, 0.1) 0%, transparent 50%);
            animation: heroShimmer 20s ease-in-out infinite;
        }
        
        @keyframes heroShimmer {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
        }
        
        .hero-title {
            text-shadow: 2px 2px 4px rgba(67, 58, 63, 0.3);
            animation: heroFadeInUp 1.2s ease-out;
        }
        
        .hero-subtitle {
            text-shadow: 1px 1px 2px rgba(67, 58, 63, 0.2);
            animation: heroFadeInUp 1.2s ease-out 0.3s both;
        }
        
        @keyframes heroFadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Enhanced Call-to-Action Button */
        .cta-button {
            background: linear-gradient(45deg, #C07F63, #A9684C);
            color: #FDF8F0;
            padding: 16px 32px;
            border-radius: 50px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 8px 25px rgba(192, 127, 99, 0.3);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            animation: heroFadeInUp 1.2s ease-out 0.6s both;
        }
        
        .cta-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s;
        }
        
        .cta-button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(192, 127, 99, 0.4);
            background: linear-gradient(45deg, #A9684C, #8B5A3C);
        }
        
        .cta-button:hover::before {
            left: 100%;
        }
        
        /* Love Notes Feature */
        .love-note {
            position: fixed;
            background: rgba(253, 248, 240, 0.95);
            border: 2px solid #C07F63;
            border-radius: 12px;
            padding: 16px;
            max-width: 250px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            font-style: italic;
            color: #433A3F;
            transform: scale(0);
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: pointer;
        }
        
        .love-note.show {
            transform: scale(1);
            animation: loveNoteFloat 6s ease-in-out infinite;
        }
        
        .love-note::before {
            content: '💕';
            position: absolute;
            top: -10px;
            right: -5px;
            font-size: 20px;
        }
        
        @keyframes loveNoteFloat {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(2deg); }
        }
        
        /* Anniversary Countdown */
        .countdown-container {
            background: linear-gradient(135deg, rgba(253, 248, 240, 0.3), rgba(234, 224, 213, 0.2));
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(192, 127, 99, 0.1);
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }
        
        .countdown-container:hover {
            opacity: 1;
        }
        
        .countdown-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: rgba(192, 127, 99, 0.9);
            text-shadow: 2px 2px 4px rgba(67, 58, 63, 0.05);
        }
        
        .countdown-label {
            font-size: 0.9rem;
            color: rgba(67, 58, 63, 0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Floating Hearts Animation */
        .floating-heart {
            position: fixed;
            color: #C07F63;
            pointer-events: none;
            z-index: 999;
            font-size: 20px;
            animation: floatHeart 4s ease-in-out forwards;
        }
        
        @keyframes floatHeart {
            0% {
                opacity: 1;
                transform: translateY(0px) scale(0);
            }
            15% {
                transform: translateY(-20px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(0.5);
            }
        }
        
        /* Interactive Timeline Enhancement */
        .timeline-item {
            position: relative;
            transition: all 0.3s ease;
        }
        
        .timeline-item:hover {
            transform: translateX(10px);
        }
        
        .timeline-item:hover .timeline-icon {
            transform: scale(1.2);
            box-shadow: 0 8px 20px rgba(192, 127, 99, 0.3);
        }
        
        .timeline-icon {
            transition: all 0.3s ease;
        }
        
        /* Wish List & Bucket List Styles */
        .wish-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            border-left: 4px solid #C07F63;
        }
        
        .wish-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .wish-item.completed {
            background: #f0f9f0;
            border-left-color: #4CAF50;
        }
        
        /* Responsive Design Enhancements */
        @media (max-width: 768px) {
            .hero-bg {
                background-attachment: scroll;
                background-position: center 20%; /* Center horizontally, move up slightly to center the mirror */
            }
            
            .countdown-number {
                font-size: 2rem;
            }
            
            .cta-button {
                padding: 14px 28px;
                font-size: 14px;
            }
            
            .love-note {
                max-width: 200px;
                padding: 12px;
                font-size: 14px;
            }
        }
        
        /* Extra small mobile devices */
        @media (max-width: 480px) {
            .hero-bg {
                background-position: center 15%; /* Adjust further for very small screens */
            }
        }
        
        /* Modern Color Palette Variables */
        :root {
            --primary-color: #C07F63;      /* Warm terracotta */
            --secondary-color: #A9684C;    /* Deeper terracotta */
            --accent-color: #D6C6B3;       /* Warm beige */
            --background-color: #FDF8F0;   /* Creamy white */
            --surface-color: #EAE0D5;      /* Light warm gray */
            --text-primary: #433A3F;       /* Dark gray */
            --text-secondary: #6B5B73;     /* Medium gray */
            --success-color: #4CAF50;      /* Green */
            --warning-color: #FF9800;      /* Orange */
            --error-color: #F44336;        /* Red */
        }

        /* Music Player Styles */
        .music-player {
            background: linear-gradient(135deg, rgba(253, 248, 240, 0.95), rgba(234, 224, 213, 0.95));
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(192, 127, 99, 0.2);
            position: relative;
            overflow: hidden;
        }

        .music-player::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(192, 127, 99, 0.05) 0%, transparent 50%);
            animation: musicShimmer 8s ease-in-out infinite;
        }

        @keyframes musicShimmer {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }

        .music-content {
            position: relative;
            z-index: 2;
        }

        .song-title {
            font-size: 1.25rem;
            font-weight: bold;
            color: #C07F63;
            margin-bottom: 8px;
            font-family: 'Playfair Display', serif;
        }

        .song-artist {
            color: #433A3F;
            margin-bottom: 16px;
            font-style: italic;
        }

        .play-button {
            background: linear-gradient(45deg, #C07F63, #A9684C);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(192, 127, 99, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }

        .play-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(192, 127, 99, 0.4);
        }

        .play-button.playing {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .music-note {
            position: absolute;
            color: #C07F63;
            font-size: 20px;
            animation: floatNote 3s ease-in-out infinite;
            pointer-events: none;
        }

        @keyframes floatNote {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.6; }
            50% { transform: translateY(-15px) rotate(10deg); opacity: 1; }
        }

        .soundcloud-embed {
            border-radius: 12px;
            overflow: hidden;
            margin-top: 16px;
        }
        
        .soundcloud-embed iframe {
            border: none !important;
            border-radius: 12px;
            display: block;
        }

        /* Our Song Section */
        .our-song-section {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            background-attachment: fixed;
            position: relative;
            overflow: hidden;
        }
        
        .our-song-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(192, 127, 99, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 182, 193, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        /* Enhanced Song Memory Cards */
        .song-memory-card {
            transition: all 0.3s ease;
        }
        
        .song-memory-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15) !important;
        }
        
        .song-memory-story {
            border-left: 3px solid #C07F63;
            font-style: italic;
        }
        
        .add-song-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .add-song-card:hover {
            background: rgba(255, 255, 255, 0.1) !important;
            border-color: rgba(192, 127, 99, 0.3);
            transform: translateY(-2px);
        }
        
        .service-status .w-2.bg-green-400 {
            background-color: #10B981;
        }
        
        .service-status .w-2.bg-red-400 {
            background-color: #EF4444;
        }
        
        /* Song Timeline Animation */
        .song-memory-card {
            animation: fadeInUp 0.6s ease-out;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .song-lyrics-preview {
            font-style: italic;
            font-size: 1.1rem;
            line-height: 1.6;
            margin: 16px 0;
            padding: 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            backdrop-filter: blur(5px);
        }

        /* Responsive Music Player */
        @media (max-width: 768px) {
            .music-player {
                padding: 16px;
                margin: 16px;
            }
            
            .play-button {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }
            
            .song-title {
                font-size: 1.1rem;
            }
        }

        /* Facebook Dating Style Floating Bubble */
        .dating-bubble {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #8B5CF6, #7C3AED);
            color: white;
            padding: 16px 20px;
            border-radius: 25px;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
            z-index: 1000;
            font-weight: 500;
            font-size: 14px;
            max-width: 200px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            cursor: pointer;
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }

        .dating-bubble.show {
            transform: translateY(0);
            opacity: 1;
            animation: bubbleBounce 3s ease-in-out infinite;
        }

        .dating-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #8B5CF6;
        }

        @keyframes bubbleBounce {
            0%, 100% { transform: translateY(0px) scale(1); }
            50% { transform: translateY(-5px) scale(1.02); }
        }

        .dating-bubble:hover {
            transform: scale(1.05) translateY(-3px);
            box-shadow: 0 12px 35px rgba(139, 92, 246, 0.4);
        }

        /* Responsive dating bubble */
        @media (max-width: 768px) {
            .dating-bubble {
                bottom: 20px;
                right: 20px;
                padding: 12px 16px;
                font-size: 12px;
                max-width: 160px;
            }
        }

        /* Chat Styles */
        .chat-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            max-height: 500px;
            overflow-y: auto;
            position: relative;
        }

        .date-header {
            position: relative;
            margin: 1.5rem 0;
        }

        .date-header span {
            background: #FDF8F0;
            padding: 0 1rem;
            position: relative;
            z-index: 1;
        }

        .date-header::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #EAE0D5;
            z-index: 0;
        }

        .message {
            display: flex;
            margin-bottom: 1rem;
        }

        .message-bubble {
            padding: 0.75rem 1rem;
            border-radius: 1.5rem;
            position: relative;
            max-width: 80%;
        }

        .message-time {
            margin-top: 0.25rem;
        }

        .received .message-bubble {
            background: #F1F5F9;
            color: #333;
        }

        .sent {
            justify-content: flex-end;
        }

        .sent .message-bubble {
            background: #C07F63;
            color: white;
        }

        /* Animation for new messages */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message {
            animation: slideIn 0.4s ease-out forwards;
        }

        /* Our Story Section */
        #our-story {
            background: linear-gradient(135deg, #FFF3F0, #FEEBC8);
        }

        /* Statistics Card */
        .stats-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .stats-card .stat {
            font-size: 1.5rem;
            font-weight: bold;
            color: #C07F63;
        }

        .stats-card .label {
            font-size: 0.875rem;
            color: #433A3F;
            opacity: 0.7;
        }

        /* Boomerang Kiss Video Section */
        .boomerang-bg {
            position: relative;
            background: linear-gradient(135deg, #C07F63, #433A3F);
        }

        .boomerang-bg video {
            filter: brightness(0.9) contrast(1.1);
        }

        .boomerang-content {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .boomerang-cta-button {
            background: linear-gradient(135deg, #C07F63, #A9684C);
            color: white;
            border: none;
            padding: 16px 32px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(192, 127, 99, 0.4);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .boomerang-cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(192, 127, 99, 0.6);
            background: linear-gradient(135deg, #A9684C, #8B4513);
        }

        /* Floating Hearts Animation for Boomerang Section */
        .floating-hearts-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .floating-heart {
            position: absolute;
            font-size: 2rem;
            opacity: 0;
            animation: floatHeart 8s infinite ease-in-out;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.3));
        }

        .heart-1 {
            left: 10%;
            animation-delay: 0s;
            animation-duration: 8s;
        }

        .heart-2 {
            left: 30%;
            animation-delay: 2s;
            animation-duration: 9s;
        }

        .heart-3 {
            left: 50%;
            animation-delay: 4s;
            animation-duration: 7s;
        }

        .heart-4 {
            left: 70%;
            animation-delay: 6s;
            animation-duration: 8.5s;
        }

        .heart-5 {
            left: 90%;
            animation-delay: 1s;
            animation-duration: 9.5s;
        }

        @keyframes floatHeart {
            0% {
                bottom: -10%;
                opacity: 0;
                transform: translateX(0) rotate(0deg) scale(0.5);
            }
            15% {
                opacity: 1;
                transform: translateX(0) rotate(5deg) scale(1);
            }
            50% {
                opacity: 1;
                transform: translateX(20px) rotate(-5deg) scale(1.1);
            }
            85% {
                opacity: 1;
                transform: translateX(-10px) rotate(3deg) scale(0.9);
            }
            100% {
                bottom: 110%;
                opacity: 0;
                transform: translateX(0) rotate(0deg) scale(0.3);
            }
        }

        /* Responsive adjustments for boomerang section */
        @media (max-width: 768px) {
            .boomerang-content h2 {
                font-size: 2.5rem;
            }
            
            .boomerang-content p {
                font-size: 1.1rem;
            }
            
            .floating-heart {
                font-size: 1.5rem;
            }
        }

        /* Ensure video loads properly */
        .boomerang-bg video {
            object-position: center center;
        }

        /* Video Preview Enhancements */
        .play-button-overlay {
            transition: all 0.3s ease;
            backdrop-filter: blur(2px);
        }
        
        .memory-card video {
            cursor: pointer;
        }
        
        .memory-card:hover .play-button-overlay {
            transform: scale(1.1);
        }
        
        /* Video hover effects */
        .memory-card video[poster]:hover {
            filter: brightness(1.1);
        }

        /* Loading and Performance Enhancements */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Smooth scrolling enhancement */
        html {
            scroll-behavior: smooth;
        }

        /* Improved loading states */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: loading-shimmer 2s infinite;
        }

        @keyframes loading-shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Enhanced accessibility */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }

        /* Focus indicators for better accessibility */
        .nav-link:focus,
        .btn-primary:focus,
        .btn-secondary:focus,
        .cta-button:focus {
            outline: 2px solid #C07F63;
            outline-offset: 2px;
        }

        /* Enhanced mobile touch targets */
        @media (max-width: 768px) {
            .nav-link,
            .btn-primary,
            .btn-secondary,
            .cta-button {
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        /* Preload critical resources */
        .preload {
            position: absolute;
            left: -9999px;
            visibility: hidden;
        }

        /* Enhanced Notes UI Styles */
        .upload-zone {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .upload-zone:hover {
            border-color: #C07F63 !important;
            background-color: rgba(192, 127, 99, 0.05) !important;
        }
        
        .photo-gallery img {
            transition: all 0.3s ease;
        }
        
        .photo-gallery img:hover {
            transform: scale(1.05);
        }
        
        .empty-gallery-state {
            transition: all 0.3s ease;
        }
        
        .quick-note-btn {
            transition: all 0.2s ease;
        }
        
        .quick-note-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .save-btn {
            transition: all 0.3s ease;
        }
        
        .save-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        /* Drag and drop styles */
        .upload-zone.drag-over {
            border-color: #C07F63 !important;
            background-color: rgba(192, 127, 99, 0.1) !important;
            transform: scale(1.02);
        }
        
        /* Tab animation */
        .notes-tab-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .notes-day-content {
            transition: opacity 0.3s ease-in-out;
        }
        
        /* Photo hover effects */
        .photo-gallery .relative:hover img {
            filter: brightness(0.8);
        }
        
        /* Auto-save indicator */
        #save-status-1, #save-status-2, #save-status-3, #save-status-4 {
            transition: opacity 0.3s ease;
        }

        /* Plan Your Trip Enhanced Animations and Styling */
        .planning-card {
            animation: fadeInUp 0.6s ease-out forwards;
            animation-delay: calc(var(--delay, 0) * 0.1s);
        }
        
        .planning-card:nth-child(1) { --delay: 1; }
        .planning-card:nth-child(2) { --delay: 2; }
        .planning-card:nth-child(3) { --delay: 3; }
        .planning-card:nth-child(4) { --delay: 4; }
        .planning-card:nth-child(5) { --delay: 5; }
        .planning-card:nth-child(6) { --delay: 6; }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .planning-card:hover .group-hover\:scale-110 {
            transform: scale(1.1);
        }
        
        /* Enhanced gradient text animation */
        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }
        
        .bg-clip-text {
            background-size: 200% 200%;
            animation: gradientShift 4s ease infinite;
        }
        
        /* Floating animation for background elements */
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        .animate-pulse {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Modal animations */
        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Interactive button effects */
        button:hover {
            transform: translateY(-1px);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        /* Phone number links styling */
        a[href^="tel:"]:hover {
            text-decoration: underline;
        }
        
        /* Qobuz Integration Styles */
        .qobuz-quality-badge {
            background: linear-gradient(135deg, #1B365D, #2E5984);
            color: white;
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            border-radius: 8px;
            padding: 2px 6px;
            box-shadow: 0 2px 4px rgba(27, 54, 93, 0.3);
            animation: qualityPulse 3s ease-in-out infinite;
        }
        
        @keyframes qualityPulse {
            0%, 100% { box-shadow: 0 2px 4px rgba(27, 54, 93, 0.3); }
            50% { box-shadow: 0 4px 8px rgba(27, 54, 93, 0.5); }
        }
        
        .qobuz-service-card {
            position: relative;
            overflow: hidden;
        }
        
        .qobuz-service-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(27, 54, 93, 0.1), transparent);
            transition: left 0.8s ease;
        }
        
        .qobuz-service-card:hover::before {
            left: 100%;
        }
        
        .qobuz-connected {
            position: relative;
        }
        
        .qobuz-connected::after {
            content: '🏆 Hi-Res';
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #1B365D;
            font-size: 0.6rem;
            font-weight: bold;
            padding: 2px 6px;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(255, 215, 0, 0.4);
        }
        
        .search-result-item[data-platform="qobuz"] {
            border-left: 3px solid #1B365D;
            background: linear-gradient(135deg, rgba(27, 54, 93, 0.02), rgba(46, 89, 132, 0.02));
        }
        
        .search-result-item[data-platform="qobuz"]:hover {
            background: linear-gradient(135deg, rgba(27, 54, 93, 0.05), rgba(46, 89, 132, 0.05));
            border-left-color: #2E5984;
        }
        
    </style>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>
    <!-- Progress Indicator -->
    <div class="progress-indicator">
        <div class="progress-bar" id="progress-bar"></div>
    </div>

    <!-- Floating Navigation Menu -->
    <nav class="floating-nav" id="floating-nav">
        <button class="nav-toggle" id="nav-toggle" aria-label="Toggle navigation menu">
            <span class="hamburger-icon">☰</span>
        </button>
        <div class="nav-menu hidden" id="nav-menu">
            <a href="#hero" class="nav-link" data-section="hero">
                <span>🏠</span> Home
            </a>
            <a href="#itinerary" class="nav-link" data-section="itinerary">
                <span>📅</span> Your Itinerary
            </a>
            <a href="#explore" class="nav-link" data-section="explore">
                <span>🗺️</span> Explore Providence
            </a>
            <a href="#restaurant-week" class="nav-link" data-section="restaurant-week">
                <span>🍽️</span> Restaurant Week
            </a>
            <a href="#map" class="nav-link" data-section="map">
                <span>📍</span> Interactive Map
            </a>
            <a href="#notes" class="nav-link" data-section="notes">
                <span>📝</span> Couple's Notes
            </a>
            <a href="#our-song" class="nav-link" data-section="our-song">
                <span>🎵</span> Our Songs
            </a>
            <a href="#our-story" class="nav-link" data-section="our-story">
                <span>💕</span> Our Story
            </a>
            <a href="#memories" class="nav-link" data-section="memories">
                <span>📸</span> Our Memories
            </a>
            <a href="#playlists" class="nav-link" data-section="playlists">
                <span>🎶</span> Our Playlists
            </a>
            <a href="#plan" class="nav-link" data-section="plan">
                <span>✈️</span> Plan Your Trip
            </a>
            <a href="#weather" class="nav-link" data-section="weather">
                <span>🌤️</span> Weather
            </a>
        </div>
    </nav>

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center" role="navigation" aria-label="Main navigation">
            <h1 class="text-xl md:text-2xl font-bold text-[#433A3F]">A Providence Anniversary</h1>
            <div class="hidden md:flex space-x-8">
                <a href="#itinerary" class="nav-link text-lg" aria-label="Go to itinerary section">Your Itinerary</a>
                <a href="#explore" class="nav-link text-lg" aria-label="Go to explore section">Explore Providence</a>
                <a href="#restaurant-week" class="nav-link text-lg" aria-label="Go to restaurant week section">Restaurant Week</a>
                <a href="#map" class="nav-link text-lg" aria-label="Go to interactive map section">Interactive Map</a>
                <a href="#notes" class="nav-link text-lg" aria-label="Go to couple's notes section">Couple's Notes</a>
                <a href="#our-song" class="nav-link text-lg" aria-label="Go to our songs section">Our Songs</a>
                <a href="#our-story" class="nav-link text-lg" aria-label="Go to our story section">Our Story</a>
                <a href="#memories" class="nav-link text-lg" aria-label="Go to our memories section">Our Memories</a>
                <a href="#playlists" class="nav-link text-lg" aria-label="Go to our playlists section">Our Playlists 🎵</a>
                <a href="#plan" class="nav-link text-lg" aria-label="Go to plan your trip section">Plan Your Trip</a>
                <a href="#weather" class="nav-link text-lg" aria-label="Go to weather forecast section">Weather 🌤️</a>
            </div>
    
            <!-- Create Playlist Modal -->
            <div id="create-playlist-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
                <div class="flex items-center justify-center min-h-screen p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-lg w-full">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-2xl font-bold text-[#433A3F] font-display">Create New Playlist</h3>
                                <button id="close-playlist-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                            </div>
                            
                            <form id="create-playlist-form">
                                <div class="space-y-6">
                                    <div>
                                        <label class="block text-sm font-medium text-[#433A3F] mb-2">Playlist Name</label>
                                        <input type="text" id="playlist-name" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="e.g., Providence Anniversary 2025" required>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-[#433A3F] mb-2">Description</label>
                                        <textarea id="playlist-description" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent" placeholder="Tell the story of this playlist..."></textarea>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-[#433A3F] mb-2">Playlist Type</label>
                                        <select id="playlist-type" class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                            <option value="custom">Custom Playlist</option>
                                            <option value="dinner">Romantic Dinner</option>
                                            <option value="travel">Road Trip Vibes</option>
                                            <option value="adventure">Adventure Time</option>
                                            <option value="chill">Chill & Relax</option>
                                            <option value="dance">Dance & Party</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-[#433A3F] mb-2">Collaboration</label>
                                        <div class="flex items-center gap-3">
                                            <input type="checkbox" id="playlist-collaborative" class="w-4 h-4 text-purple-500 border-gray-300 rounded focus:ring-purple-500">
                                            <label for="playlist-collaborative" class="text-[#433A3F]">Allow your partner to edit this playlist</label>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-xl">
                                        <h4 class="font-semibold text-[#433A3F] mb-2">🎯 Suggested Starter Songs</h4>
                                        <div class="space-y-2" id="suggested-songs">
                                            <!-- Will be populated based on playlist type -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end gap-3 mt-8">
                                    <button type="button" id="cancel-playlist-modal" class="px-6 py-3 text-gray-600 border border-gray-300 rounded-xl hover:bg-gray-50 font-medium">Cancel</button>
                                    <button type="submit" class="px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 font-medium">Create Playlist</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Music Service OAuth Modal -->
            <div id="oauth-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
                <div class="flex items-center justify-center min-h-screen p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-md w-full">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-xl font-bold text-[#433A3F]" id="oauth-title">Connect Music Service</h3>
                                <button id="close-oauth-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                            </div>
                            
                            <div class="text-center" id="oauth-content">
                                <div class="text-6xl mb-4" id="oauth-icon">🎵</div>
                                <h4 class="text-lg font-semibold text-[#433A3F] mb-2" id="oauth-service-name">Spotify</h4>
                                <p class="text-[#433A3F]/70 mb-6" id="oauth-description">
                                    Connect your Spotify account to search millions of songs and create collaborative playlists.
                                </p>
                                
                                <div class="space-y-4">
                                    <button id="oauth-connect-btn" class="w-full bg-black text-white py-3 rounded-xl font-semibold hover:bg-gray-800 transition-colors">
                                        🎵 Connect with Spotify
                                    </button>
                                    
                                    <div class="text-sm text-[#433A3F]/60">
                                        <p>✓ Search and preview songs</p>
                                        <p>✓ Create and sync playlists</p>
                                        <p>✓ Share with your partner</p>
                                    </div>
                                    
                                    <p class="text-xs text-[#433A3F]/50">
                                        We'll redirect you to Spotify for secure authentication. Your credentials are never stored on our servers.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    
            <!-- Playlist Sharing Modal -->
            <div id="share-playlist-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
                <div class="flex items-center justify-center min-h-screen p-4">
                    <div class="bg-white rounded-2xl shadow-xl max-w-md w-full">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-xl font-bold text-[#433A3F]">Share Playlist</h3>
                                <button id="close-share-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                            </div>
                            
                            <div class="text-center">
                                <div class="text-4xl mb-4">🔗</div>
                                <h4 class="text-lg font-semibold text-[#433A3F] mb-2" id="share-playlist-name">My Playlist</h4>
                                <p class="text-[#433A3F]/70 mb-6">Share this playlist with your partner or friends</p>
                                
                                <div class="space-y-4">
                                    <div class="bg-gray-50 p-3 rounded-xl">
                                        <label class="block text-sm font-medium text-[#433A3F] mb-2">Share Link</label>
                                        <div class="flex gap-2">
                                            <input type="text" id="share-link" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-white" readonly>
                                            <button id="copy-link-btn" class="bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors">
                                                📋 Copy
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="flex gap-2">
                                        <button class="flex-1 bg-blue-500 text-white py-3 rounded-xl font-medium hover:bg-blue-600 transition-colors">
                                            📱 Text
                                        </button>
                                        <button class="flex-1 bg-green-500 text-white py-3 rounded-xl font-medium hover:bg-green-600 transition-colors">
                                            📧 Email
                                        </button>
                                    </div>
                                    
                                    <div class="text-sm text-[#433A3F]/60">
                                        <p>👫 Collaborative editing: <span class="font-medium" id="collab-status">Enabled</span></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="md:hidden">
                <button id="menu-btn" class="focus:outline-none" aria-label="Toggle mobile menu" aria-expanded="false">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4" role="menu" aria-label="Mobile navigation menu">
            <a href="#itinerary" class="block py-2 nav-link" role="menuitem">Your Itinerary</a>
            <a href="#explore" class="block py-2 nav-link" role="menuitem">Explore Providence</a>
            <a href="#restaurant-week" class="block py-2 nav-link" role="menuitem">Restaurant Week</a>
            <a href="#map" class="block py-2 nav-link" role="menuitem">Interactive Map</a>
            <a href="#notes" class="block py-2 nav-link" role="menuitem">Couple's Notes</a>
            <a href="#our-song" class="block py-2 nav-link" role="menuitem">Our Songs</a>
            <a href="#our-story" class="block py-2 nav-link" role="menuitem">Our Story</a>
            <a href="#memories" class="block py-2 nav-link" role="menuitem">Our Memories</a>
            <a href="#playlists" class="block py-2 nav-link" role="menuitem">Our Playlists 🎵</a>
            <a href="#plan" class="block py-2 nav-link" role="menuitem">Plan Your Trip</a>
            <a href="#weather" class="block py-2 nav-link" role="menuitem">Weather 🌤️</a>
        </div>
    </header>

    <main id="main-content" role="main">
        <section id="hero" class="hero-bg text-center py-32 px-6 min-h-screen flex items-center" role="banner">
            <div class="container mx-auto hero-content">
                <div class="cohesive-card max-w-md mx-auto mb-8 p-6 bg-white/10 backdrop-blur-lg border-white/20">
                    <div class="text-center">
                        <div class="countdown-number text-4xl font-bold text-white mb-2" id="countdown-days" aria-live="polite">6</div>
                        <div class="countdown-label text-white/80 font-medium">Days Until Our Trip</div>
                        <p class="text-sm mt-2 text-white/60">Providence awaits us on July 11th at 4 PM! 💕</p>
                    </div>
                </div>
                
                <h1 class="hero-title text-5xl md:text-7xl font-bold mb-6 text-white font-display">
                    Your Perfect Anniversary Escape
                </h1>
                <p class="hero-subtitle text-xl md:text-2xl max-w-4xl mx-auto text-white/90 mb-8 leading-relaxed">
                    Your complete one-stop shop for a romantic weekend in Providence, designed for your one-month anniversary. 
                    Everything you need is here: itinerary, restaurant menus, directions, Uber links, and our love story all in one place.
                    Plus, your trip perfectly aligns with Providence Restaurant Week (July 6-19) for amazing dining deals!
                </p>
                
                <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <button class="cohesive-btn cohesive-btn-primary text-lg px-8 py-4" onclick="scrollToSection('itinerary')" aria-label="Go to itinerary section">
                        ✨ Start Planning Our Adventure
                    </button>
                    <button class="cohesive-btn cohesive-btn-secondary text-lg px-8 py-4" onclick="showLoveNote()" aria-label="Send a romantic love note">
                        💌 Send a Love Note
                    </button>
                </div>
                
                <div class="mt-12 text-white/70">
                    <p class="text-sm">Scroll down to begin our romantic journey</p>
                    <div class="animate-bounce mt-2" aria-hidden="true">↓</div>
                </div>
            </div>
        </section>
        
        <!-- One Stop Shop Features -->
        <section class="py-12 bg-gradient-to-r from-[#FDF8F0] to-[#EAE0D5]">
            <div class="container mx-auto px-6 max-w-4xl">
                <div class="cohesive-section-header">
                    <h2 class="cohesive-section-title">Everything You Need in One Place</h2>
                    <p class="cohesive-section-subtitle">Seamless planning for your perfect romantic getaway</p>
                </div>
                <div class="grid md:grid-cols-4 gap-6 text-center">
                    <div class="cohesive-card p-6 bg-white/80 backdrop-blur-sm">
                        <div class="text-3xl mb-2">🗺️</div>
                        <h3 class="font-semibold text-[#433A3F] mb-1">Instant Directions</h3>
                        <p class="text-sm text-[#433A3F]/70">One-click Google Maps directions to every location</p>
                    </div>
                    <div class="cohesive-card p-6 bg-white/80 backdrop-blur-sm">
                        <div class="text-3xl mb-2">🚗</div>
                        <h3 class="font-semibold text-[#433A3F] mb-1">Uber Integration</h3>
                        <p class="text-sm text-[#433A3F]/70">Direct Uber links for effortless transportation</p>
                    </div>
                    <div class="cohesive-card p-6 bg-white/80 backdrop-blur-sm">
                        <div class="text-3xl mb-2">🎉</div>
                        <h3 class="font-semibold text-[#433A3F] mb-1">Restaurant Week</h3>
                        <p class="text-sm text-[#433A3F]/70">Your trip perfectly aligns with Providence Restaurant Week specials</p>
                    </div>
                    <div class="cohesive-card p-6 bg-white/80 backdrop-blur-sm">
                        <div class="text-3xl mb-2">💕</div>
                        <h3 class="font-semibold text-[#433A3F] mb-1">Our Love Story</h3>
                        <p class="text-sm text-[#433A3F]/70">Complete Facebook Dating chat history and memories</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Love Notes Container -->
        <div id="love-notes-container"></div>
        
        <!-- Facebook Dating Style Bubble -->
        <div id="dating-bubble" class="dating-bubble">
            You are incredible. 💜
        </div>
                        <div class="countdown-label"></div>
                    </div>
                </div>
                <a href="#itinerary" 
                   class="btn-primary cta-button px-8 py-3 rounded-full text-lg font-semibold" 
                   role="button"
                   aria-label="Start planning your romantic Providence anniversary getaway - View detailed itinerary"
                   tabindex="0">
                    🎉 Start Planning Your Getaway
                </a>
            </div>
        </section>

        <section id="itinerary" class="py-16 md:py-24">
            <div class="container mx-auto px-6">
                <div class="cohesive-section-header">
                    <h2 class="cohesive-section-title">Your Itinerary</h2>
                    <p class="cohesive-section-subtitle">
                        This suggested timeline blends romance, culture, and culinary delights into a perfect anniversary weekend. We've structured the plan day by day, but feel free to mix and match based on your mood.
                    </p>
                </div>
                <div class="border-b border-gray-200">
                    <nav class="-mb-px flex justify-center space-x-6" aria-label="Tabs">
                        <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg active-tab" data-tab="day1">Friday, July 11</button>
                        <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg text-gray-500 hover:text-[#C07F63] hover:border-[#C07F63]" data-tab="day2">Saturday, July 12</button>
                        <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg text-gray-500 hover:text-[#C07F63] hover:border-[#C07F63]" data-tab="day3">Sunday, July 13</button>
                        <button class="tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg text-gray-500 hover:text-[#C07F63] hover:border-[#C07F63]" data-tab="day4">Monday, July 14</button>
                    </nav>
                </div>
                
                <!-- Itinerary Management Controls -->
                <div class="flex flex-wrap justify-center gap-4 my-8">
                    <button id="toggle-edit-mode" class="cohesive-btn cohesive-btn-outline">
                        <span>✏️</span> Edit Mode
                    </button>
                    <button id="add-item-btn" class="cohesive-btn cohesive-btn-primary">
                        ➕ Add Activity
                    </button>
                    <button id="save-itinerary" class="cohesive-btn cohesive-btn-secondary bg-green-600 text-white hover:bg-green-700">
                        💾 Save Changes
                    </button>
                    <button id="reset-itinerary" class="cohesive-btn cohesive-btn-secondary bg-red-600 text-white hover:bg-red-700">
                        🔄 Reset to Default
                    </button>
                </div>

                <div id="tab-content" class="mt-12">
                </div>
            </div>
        </section>

        <section id="explore" class="py-16 md:py-24 bg-[#EAE0D5]">
            <div class="container mx-auto px-6">
                <div class="cohesive-section-header">
                    <h2 class="cohesive-section-title">Explore Providence</h2>
                    <p class="cohesive-section-subtitle">
                        Discover all the romantic possibilities Providence has to offer. Use the filters to find the perfect spots for your celebration, from intimate dining to scenic tours. Each location includes direct links to menus, directions, and Uber for effortless planning.
                    </p>
                </div>
                <div class="flex justify-center flex-wrap gap-2 mb-12">
                    <button class="btn-filter cohesive-btn cohesive-btn-secondary active" data-filter="all">All</button>
                    <button class="btn-filter cohesive-btn cohesive-btn-outline" data-filter="Dining">Dining</button>
                    <button class="btn-filter cohesive-btn cohesive-btn-outline" data-filter="Tour">Tours</button>
                    <button class="btn-filter cohesive-btn cohesive-btn-outline" data-filter="Culture">Culture</button>
                    <button class="btn-filter cohesive-btn cohesive-btn-outline" data-filter="Outdoor">Outdoor</button>
                </div>
                
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16" id="explore-grid">
                </div>

                <div class="grid lg:grid-cols-2 gap-12 items-start">
                    <div>
                        <h3 class="text-2xl font-bold text-center mb-4">Dining Cost Comparison</h3>
                        <p class="text-center text-md max-w-xl mx-auto mb-6 text-[#433A3F]/80">To help you choose the perfect anniversary dinner, this chart provides an estimated cost per person for our top dining recommendations. Upscale options offer a truly special experience, while others provide a romantic ambiance at a more moderate price.</p>
                        <div class="chart-container">
                            <canvas id="diningChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold text-center mb-6">Restaurant Menus & Directions</h3>
                        <div class="space-y-4">
                            <div class="bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-[#C07F63]/20">
                                <h4 class="font-semibold text-[#433A3F] mb-2">The Dorrance</h4>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://www.thedorrance.com/menu" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-sm hover:bg-[#A9684C] transition-colors">View Menu</a>
                                    <a href="https://maps.google.com/?q=The+Dorrance+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-sm hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=The%20Dorrance%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-sm hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <p class="text-sm text-[#433A3F]/70">60 Dorrance St, Providence, RI</p>
                            </div>
                            
                            <div class="bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-[#C07F63]/20">
                                <h4 class="font-semibold text-[#433A3F] mb-2">Gracie's</h4>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://graciesprov.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-sm hover:bg-[#A9684C] transition-colors">View Menu</a>
                                    <a href="https://maps.google.com/?q=Gracies+Restaurant+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-sm hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Gracies%20Restaurant%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-sm hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <p class="text-sm text-[#433A3F]/70">194 Washington St, Providence, RI</p>
                            </div>
                            
                            <div class="bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-[#C07F63]/20">
                                <h4 class="font-semibold text-[#433A3F] mb-2">Hemenway's Restaurant</h4>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://www.hemenwaysrestaurant.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-sm hover:bg-[#A9684C] transition-colors">View Menu</a>
                                    <a href="https://maps.google.com/?q=Hemenwaysrestaurant+121+South+Main+St+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-sm hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Hemenwaysrestaurant%20121%20South%20Main%20St%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-sm hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <p class="text-sm text-[#433A3F]/70">121 South Main St, Providence, RI</p>
                            </div>
                            
                            <div class="bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-[#C07F63]/20">
                                <h4 class="font-semibold text-[#433A3F] mb-2">CAV Providence</h4>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://cavrestaurant.com/providence-jewelry-district-cav-providence-food-menu" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-sm hover:bg-[#A9684C] transition-colors">View Menu</a>
                                    <a href="https://maps.google.com/?q=CAV+Restaurant+14+Imperial+Pl+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-sm hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=CAV%20Restaurant%2014%20Imperial%20Pl%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-sm hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <p class="text-sm text-[#433A3F]/70">14 Imperial Pl, Providence, RI</p>
                            </div>
                            
                            <div class="bg-white/50 backdrop-blur-sm rounded-lg p-4 border border-[#C07F63]/20">
                                <h4 class="font-semibold text-[#433A3F] mb-2">Massimo Restaurant</h4>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://massimori.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-sm hover:bg-[#A9684C] transition-colors">View Menu</a>
                                    <a href="https://maps.google.com/?q=Massimo+Restaurant+134+Atwells+Ave+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-sm hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Massimo%20Restaurant%20134%20Atwells%20Ave%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-sm hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <p class="text-sm text-[#433A3F]/70">134 Atwells Ave, Providence, RI</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Providence Restaurant Week Section -->
        <section id="restaurant-week" class="py-16 md:py-24 bg-gradient-to-br from-[#FDF8F0] to-[#F5E6D3]">
            <div class="container mx-auto px-6 max-w-6xl">
                <div class="cohesive-section-header">
                    <h2 class="cohesive-section-title">🍽️ Providence Restaurant Week</h2>
                    <p class="text-xl text-[#C07F63] font-semibold mb-4">July 6-19, 2025</p>
                    <p class="cohesive-section-subtitle">
                        Perfect timing! Your anniversary trip falls right during Providence Restaurant Week, featuring over 60 participating restaurants with special prix fixe menus and exclusive deals. This biannual event is formally presented by GoProvidence and includes restaurants throughout Providence and surrounding Rhode Island communities.
                    </p>
                </div>

                <!-- Event Highlights -->
                <div class="grid md:grid-cols-4 gap-6 mb-12">
                    <div class="cohesive-card p-6 text-center bg-white/80 backdrop-blur-sm">
                        <div class="text-4xl mb-4">📅</div>
                        <h3 class="text-xl font-bold text-[#433A3F] mb-2">Perfect Timing</h3>
                        <p class="text-[#433A3F]/70">Your July 11-14 trip falls perfectly within Restaurant Week dates</p>
                    </div>
                    <div class="cohesive-card p-6 text-center bg-white/80 backdrop-blur-sm">
                        <div class="text-4xl mb-4">🍴</div>
                        <h3 class="text-xl font-bold text-[#433A3F] mb-2">60+ Restaurants</h3>
                        <p class="text-[#433A3F]/70">Amazing variety from Italian comfort food to modern American cuisine</p>
                    </div>
                    <div class="cohesive-card p-6 text-center bg-white/80 backdrop-blur-sm">
                        <div class="text-4xl mb-4">💰</div>
                        <h3 class="text-xl font-bold text-[#433A3F] mb-2">Special Pricing</h3>
                        <p class="text-[#433A3F]/70">Prix fixe menus starting from $30-60 for multi-course meals</p>
                    </div>
                    <div class="cohesive-card p-6 text-center bg-white/80 backdrop-blur-sm">
                        <div class="text-4xl mb-4">🎯</div>
                        <h3 class="text-xl font-bold text-[#433A3F] mb-2">GoProvidence</h3>
                        <p class="text-[#433A3F]/70">Officially presented by GoProvidence with winter events too</p>
                    </div>
                </div>

                <!-- Restaurant Week Search & Filter -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-center mb-8 text-[#433A3F]">Find Your Perfect Anniversary Restaurant</h3>
                    
                    <!-- Search Bar -->
                    <div class="max-w-md mx-auto mb-6">
                        <div class="relative">
                            <input 
                                type="text" 
                                id="restaurant-search" 
                                placeholder="Search restaurants by name or cuisine..."
                                class="w-full px-4 py-3 pl-10 bg-white/80 border border-[#C07F63]/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C07F63] focus:border-transparent"
                            >
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- Anniversary Recommendations -->
                    <div class="bg-gradient-to-r from-pink-100 to-red-50 rounded-xl p-6 mb-8 border border-pink-200">
                        <h4 class="text-lg font-bold text-[#433A3F] mb-4 flex items-center">
                            <span class="text-2xl mr-2">💕</span>
                            Top Anniversary Picks
                        </h4>
                        <div class="grid md:grid-cols-3 gap-4">
                            <div class="bg-white/80 rounded-lg p-4">
                                <h5 class="font-semibold text-[#C07F63] mb-2">🌟 Most Romantic</h5>
                                <p class="text-sm text-[#433A3F]/80">Gracie's, The Capital Grille, Mill's Tavern</p>
                            </div>
                            <div class="bg-white/80 rounded-lg p-4">
                                <h5 class="font-semibold text-[#C07F63] mb-2">🍾 Best Value</h5>
                                <p class="text-sm text-[#433A3F]/80">Capriccio, Il Massimo, Hemenway's</p>
                            </div>
                            <div class="bg-white/80 rounded-lg p-4">
                                <h5 class="font-semibold text-[#C07F63] mb-2">🦞 For Seafood Lovers</h5>
                                <p class="text-sm text-[#433A3F]/80">Legal Sea Foods, Mare Rooftop, Hemenway's</p>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Buttons -->
                    <div class="flex justify-center flex-wrap gap-3 mb-8">
                        <button class="restaurant-filter cohesive-btn cohesive-btn-primary active" data-category="all">All Restaurants (60+)</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="romantic">💕 Most Romantic</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="premium">💎 Premium ($55+)</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="moderate">💰 Value ($30-55)</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="italian">🍝 Italian</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="steakhouse">🥩 Steakhouse</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="seafood">🦞 Seafood</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="american">🇺🇸 American</button>
                        <button class="restaurant-filter cohesive-btn cohesive-btn-outline" data-category="food-hall">🏢 Food Hall</button>
                    </div>

                    <!-- Enhanced Filtering & Sorting Options -->
                    <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 mb-8 shadow-lg">
                        <h4 class="text-lg font-bold text-[#433A3F] mb-4 flex items-center">
                            <span class="text-xl mr-2">🔍</span>
                            Advanced Filters & Sorting
                        </h4>
                        
                        <div class="grid md:grid-cols-3 gap-6">
                            <!-- Dietary Restrictions -->
                            <div>
                                <label class="block text-sm font-semibold text-[#433A3F] mb-2">Dietary Options</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" id="vegetarian" class="dietary-filter mr-2 rounded text-[#C07F63]" data-diet="vegetarian">
                                        <span class="text-sm">🥗 Vegetarian Options</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="gluten-free" class="dietary-filter mr-2 rounded text-[#C07F63]" data-diet="gluten-free">
                                        <span class="text-sm">🌾 Gluten-Free Options</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" id="vegan" class="dietary-filter mr-2 rounded text-[#C07F63]" data-diet="vegan">
                                        <span class="text-sm">🌱 Vegan Options</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Ambiance Type -->
                            <div>
                                <label class="block text-sm font-semibold text-[#433A3F] mb-2">Ambiance</label>
                                <select id="ambiance-filter" class="w-full px-3 py-2 bg-white border border-[#C07F63]/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C07F63]">
                                    <option value="all">All Ambiances</option>
                                    <option value="intimate">💕 Intimate & Romantic</option>
                                    <option value="upscale">✨ Upscale Dining</option>
                                    <option value="casual">😊 Casual & Comfortable</option>
                                    <option value="waterfront">🌊 Waterfront Views</option>
                                    <option value="historic">🏛️ Historic Setting</option>
                                </select>
                            </div>

                            <!-- Sort Options -->
                            <div>
                                <label class="block text-sm font-semibold text-[#433A3F] mb-2">Sort By</label>
                                <select id="restaurant-sort" class="w-full px-3 py-2 bg-white border border-[#C07F63]/30 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#C07F63]">
                                    <option value="featured">Featured First</option>
                                    <option value="price-low">Price: Low to High</option>
                                    <option value="price-high">Price: High to Low</option>
                                    <option value="romance">Most Romantic First</option>
                                    <option value="alphabet">Alphabetical</option>
                                </select>
                            </div>
                        </div>

                        <!-- Filter Summary & Clear Button -->
                        <div class="flex justify-between items-center mt-4 pt-4 border-t border-[#C07F63]/20">
                            <div id="filter-summary" class="text-sm text-[#433A3F]/70">
                                Showing all restaurants
                            </div>
                            <button id="clear-filters" class="bg-gray-100 hover:bg-gray-200 text-[#433A3F] px-4 py-2 rounded-lg text-sm transition-colors">
                                Clear All Filters
                            </button>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                        <div class="bg-white/70 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-[#C07F63]">60+</div>
                            <div class="text-sm text-[#433A3F]/70">Total Restaurants</div>
                        </div>
                        <div class="bg-white/70 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-[#C07F63]">$30-60</div>
                            <div class="text-sm text-[#433A3F]/70">Price Range</div>
                        </div>
                        <div class="bg-white/70 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-[#C07F63]">14 Days</div>
                            <div class="text-sm text-[#433A3F]/70">Event Duration</div>
                        </div>
                        <div class="bg-white/70 rounded-lg p-4 text-center">
                            <div class="text-2xl font-bold text-[#C07F63]">Jul 11-14</div>
                            <div class="text-sm text-[#433A3F]/70">Your Trip Dates</div>
                        </div>
                    </div>
                </div>

                <!-- Complete Restaurant Week Directory with Comprehensive Details -->
                <div class="bg-white/60 backdrop-blur-sm rounded-2xl p-8 mb-8">
                    <h3 class="text-2xl font-bold text-center mb-8 text-[#433A3F]">Complete Restaurant Week Directory</h3>
                    
                    <!-- Important Notice -->
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 mb-8 border border-blue-200">
                        <h4 class="text-lg font-bold text-blue-900 mb-3 flex items-center">
                            <span class="text-2xl mr-2">ℹ️</span>
                            Menu Accessibility Notice
                        </h4>
                        <div class="grid md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <p class="text-blue-800 mb-2">
                                    <strong>Research Finding:</strong> While 60+ restaurants are participating, many specific Restaurant Week menus aren't yet published online. This is normal for Restaurant Weeks!
                                </p>
                                <p class="text-blue-700">
                                    <strong>What this means:</strong> The detailed menus shown here are confirmed examples. Other restaurants will have similar prix fixe offerings.
                                </p>
                            </div>
                            <div class="bg-white/70 rounded-lg p-4">
                                <h5 class="font-semibold text-blue-900 mb-2">📞 Pro Planning Tips:</h5>
                                <ul class="text-xs text-blue-800 space-y-1">
                                    <li>• Call restaurants directly for current menus</li>
                                    <li>• Check restaurant websites closer to July 6th</li>
                                    <li>• Follow restaurants on social media for updates</li>
                                    <li>• Make reservations early - tables fill quickly!</li>
                                </ul>
                            </div>
                        </div>
                    </div>



                    <!-- Premium Restaurants ($55+) - Confirmed Menus -->
                    <div class="restaurant-category mb-12" data-category="premium romantic">
                        <h4 class="text-xl font-bold text-[#C07F63] mb-6 border-b-2 border-[#C07F63]/30 pb-2">💎 Premium Anniversary Experiences ($55+)</h4>
                        <div class="grid md:grid-cols-2 gap-6">
                            <!-- Gracie's - CONFIRMED EXTENDED MENU -->
                            <div class="cohesive-card restaurant-card p-6" data-categories="premium american romantic">
                                <div class="flex justify-between items-start mb-3">
                                    <h5 class="font-bold text-[#433A3F] text-lg">🌟 Gracie's</h5>
                                    <div class="flex gap-1">
                                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold">CONFIRMED MENU</span>
                                        <span class="bg-pink-500 text-white px-2 py-1 rounded-full text-xs font-semibold">MOST ROMANTIC</span>
                                    </div>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-3">
                                    <strong>$59.99 per person</strong> • Seasonally Inspired American Cuisine • <strong>★★★★★ Romance</strong>
                                </p>
                                <div class="dietary-info text-xs text-green-600 mb-3 bg-green-50 p-2 rounded">
                                    🌱 Vegetarian options available • 🌾 Gluten-free modifications possible
                                </div>
                                <div class="mb-3 p-3 bg-green-50 rounded-lg border border-green-200">
                                    <p class="text-xs text-green-800 font-semibold mb-1">🎉 SPECIAL EXTENDED OFFER:</p>
                                    <p class="text-xs text-green-700">Available ENTIRE MONTH of July 2025 (July 1-31), not just Restaurant Week dates! Maximum flexibility for your anniversary.</p>
                                </div>
                                <div class="mb-3 p-3 bg-pink-50 rounded-lg border border-pink-200">
                                    <p class="text-xs text-[#433A3F] font-semibold mb-1">💕 Confirmed Menu Highlights:</p>
                                    <p class="text-xs text-[#433A3F]/80">
                                        <strong>1st Course:</strong> Hudson Valley Foie Gras, White Asparagus Soup, or Artisan Cheese<br>
                                        <strong>2nd Course:</strong> Point Judith Sea Scallops, All Natural NY Strip, or Culver Farms Duck<br>
                                        <strong>3rd Course:</strong> Gracie's Crème Brûlée, Chocolate Matcha Tarte, or Trio of Ice Cream
                                    </p>
                                </div>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://graciesprov.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">View Menu</a>
                                    <a href="https://www.opentable.com/r/gracies-providence" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Reserve Now</a>
                                    <a href="https://maps.google.com/?q=Gracies+Restaurant+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Gracies%20Restaurant%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <div class="text-xs text-[#433A3F]/60">
                                    📍 194 Washington St • 🍷 Extensive wine list • 👔 Smart casual • 🚗 Valet parking
                                </div>
                            </div>

                            <!-- The Capital Grille - CONFIRMED MENU -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-6" data-categories="premium steakhouse romantic">
                                <div class="flex justify-between items-start mb-3">
                                    <h5 class="font-bold text-[#433A3F] text-lg">🥩 The Capital Grille</h5>
                                    <div class="flex gap-1">
                                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold">CONFIRMED MENU</span>
                                        <span class="bg-pink-500 text-white px-2 py-1 rounded-full text-xs font-semibold">ROMANTIC</span>
                                    </div>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-3">
                                    <strong>~$60 3-course dinner</strong> • Premium Steakhouse • <span class="text-red-600 font-semibold">⚠️ Not available Saturdays</span>
                                </p>
                                <div class="mb-3 p-3 bg-pink-50 rounded-lg border border-pink-200">
                                    <p class="text-xs text-[#433A3F] font-semibold mb-1">💕 Confirmed Menu Highlights:</p>
                                    <p class="text-xs text-[#433A3F]/80">
                                        <strong>1st Course:</strong> Wedge Salad, Field Greens, or New England Clam Chowder<br>
                                        <strong>Main Course:</strong> 8oz Filet Mignon, Roasted Chicken, or Seared Citrus Glazed Salmon<br>
                                        <strong>Dessert:</strong> Flourless Chocolate Cake or Capital Grille Cheesecake<br>
                                        <strong>Add-ons:</strong> Maine Lobster Tail (+$15), Sliced Filet (+$12)
                                    </p>
                                </div>
                                <div class="bg-red-50 rounded-lg p-2 mb-3 border border-red-200">
                                    <p class="text-xs text-red-700">
                                        <strong>Important:</strong> Saturday, July 12th is your anniversary, but this restaurant doesn't offer Restaurant Week pricing on Saturdays. Perfect for Friday or Sunday instead!
                                    </p>
                                </div>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://www.thecapitalgrille.com/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">Website</a>
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Reservations</span>
                                    <a href="https://maps.google.com/?q=Capital+Grille+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Capital%20Grille%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <div class="text-xs text-[#433A3F]/60">
                                    📍 Downtown • 🍷 Award-winning wine list • 👔 Business casual • 🚗 Valet available
                                </div>
                            </div>

                            <!-- Mill's Tavern - CONFIRMED MENU -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-6" data-categories="premium american romantic">
                                <div class="flex justify-between items-start mb-3">
                                    <h5 class="font-bold text-[#433A3F] text-lg">🍽️ Mill's Tavern</h5>
                                    <div class="flex gap-1">
                                        <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold">CONFIRMED MENU</span>
                                        <span class="bg-pink-500 text-white px-2 py-1 rounded-full text-xs font-semibold">ROMANTIC</span>
                                    </div>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-3">
                                    <strong>$55 per person</strong> • Contemporary American Cuisine • <strong>★★★★☆ Romance</strong>
                                </p>
                                <div class="mb-3 p-3 bg-pink-50 rounded-lg border border-pink-200">
                                    <p class="text-xs text-[#433A3F] font-semibold mb-1">💕 Confirmed Menu Highlights:</p>
                                    <p class="text-xs text-[#433A3F]/80">
                                        <strong>Starter:</strong> Seasonal Artisanal Greens (GF), Melon Cucumber Gazpacho (GF), Point Judith Calamari<br>
                                        <strong>Main Course:</strong> Mill's Tavern Beef Ragu, Summer Risotto (GF), or 6oz Black Angus Filet Mignon (GF)<br>
                                        <strong>Dessert:</strong> Vanilla Crème Brûlée, Portuguese Bread Pudding, or Sorbet Tasting (GF)<br>
                                        <strong>Add-ons:</strong> Shaved Black Truffle (+$15), Lobster Tail (+$21), Wine Pairing (+$20)
                                    </p>
                                </div>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://www.millstavern.com/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">Website</a>
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Reservations</span>
                                    <a href="https://maps.google.com/?q=Mills+Tavern+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Mills%20Tavern%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <div class="text-xs text-[#433A3F]/60">
                                    📍 Federal Hill area • 🍷 Curated wine list • 👔 Smart casual • 🅿️ Street parking
                                </div>
                            </div>

                            <!-- Capriccio - CONFIRMED MENU -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-6" data-categories="premium italian">
                                <div class="flex justify-between items-start mb-3">
                                    <h5 class="font-bold text-[#433A3F] text-lg">🍷 Capriccio</h5>
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold">CONFIRMED MENU</span>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-3">
                                    <strong>$51.95 per person</strong> • Italian & Mediterranean • <strong>★★★☆☆ Romance</strong>
                                </p>
                                <div class="mb-3 p-3 bg-blue-50 rounded-lg border border-blue-200">
                                    <p class="text-xs text-[#433A3F] font-semibold mb-1">🍝 Confirmed Menu Highlights:</p>
                                    <p class="text-xs text-[#433A3F]/80">
                                        <strong>Appetizers:</strong> Burrata Cheese, Caesar Salad, Kobe Carpaccio, Escargot à la Bourguignonne<br>
                                        <strong>Main Courses:</strong> Day Boat Sea Scallops, Scottish Salmon, Shells Bolognese, Veal Parmigiana<br>
                                        <strong>Desserts:</strong> Tiramisu, Crème Brûlée, Angela's Chocolate Cake<br>
                                        <strong>Add-ons:</strong> Filet Mignon upgrade (+$4), Shrimp Cocktail (+$2)
                                    </p>
                                </div>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Menu Confirmed</span>
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Reservations</span>
                                    <a href="https://maps.google.com/?q=Capriccio+Restaurant+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Capriccio%20Restaurant%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <div class="text-xs text-[#433A3F]/60">
                                    📍 Providence • 🍷 Italian wine selection • 👔 Casual to smart casual • 🅿️ Parking available
                                </div>
                            </div>

                            <!-- Fogo de Chao -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-6" data-categories="premium brazilian">
                                <div class="flex justify-between items-start mb-3">
                                    <h5 class="font-bold text-[#433A3F] text-lg">🇧🇷 Fogo de Chao</h5>
                                    <span class="bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-semibold">UNIQUE EXPERIENCE</span>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-3">
                                    <strong>$59 dinner prix fixe</strong> • Brazilian Steakhouse • <strong>★★★☆☆ Romance</strong>
                                </p>
                                <div class="mb-3 p-3 bg-amber-50 rounded-lg border border-amber-200">
                                    <p class="text-xs text-[#433A3F] font-semibold mb-1">🥩 Experience:</p>
                                    <p class="text-xs text-[#433A3F]/80">Traditional Brazilian churrasco with tableside meat service and gourmet salad bar. Interactive all-you-can-eat experience - great for couples who enjoy trying new cuisines together and have hearty appetites.</p>
                                </div>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <a href="https://fogodechao.com/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">Website</a>
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Details</span>
                                    <a href="https://maps.google.com/?q=Fogo+de+Chao+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Fogo%20de%20Chao%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <div class="text-xs text-[#433A3F]/60">
                                    📍 Downtown • 🥗 Gourmet salad bar included • 👔 Business casual • 🚗 Parking available
                                </div>
                            </div>

                            <!-- Fleming's -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-6" data-categories="premium steakhouse">
                                <div class="flex justify-between items-start mb-3">
                                    <h5 class="font-bold text-[#433A3F] text-lg">🥩 Fleming's Prime Steakhouse</h5>
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold">CONFIRMED PRICING</span>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-3">
                                    <strong>$35 lunch • $60 dinner</strong> • Premium Steakhouse • <strong>★★★★☆ Romance</strong>
                                </p>
                                <div class="mb-3 p-3 bg-green-50 rounded-lg border border-green-200">
                                    <p class="text-xs text-[#433A3F] font-semibold mb-1">🍽️ Confirmed 2025 Menu Style:</p>
                                    <p class="text-xs text-[#433A3F]/80">Based on 2025 Restaurant Week menus from other Fleming's locations: clear starter, entrée, and dessert choices with premium steakhouse selections. Known for excellent service and award-winning wine program.</p>
                                </div>
                                <div class="flex flex-wrap gap-2 mb-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Specific Menu</span>
                                    <a href="https://maps.google.com/?q=Flemings+Prime+Steakhouse+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Flemings%20Prime%20Steakhouse%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                                <div class="text-xs text-[#433A3F]/60">
                                    📍 Providence • 🍷 Award-winning wine list • 👔 Business casual • 🚗 Valet parking
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Moderate Restaurants ($30-55) with Confirmed Details -->
                    <div class="restaurant-category mb-12" data-category="moderate">
                        <h4 class="text-xl font-bold text-[#C07F63] mb-6 border-b-2 border-[#C07F63]/30 pb-2">💝 Great Value & Confirmed Options ($30-55)</h4>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                            
                            <!-- Legal Sea Foods - CONFIRMED PRICING -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate seafood">
                                <div class="flex justify-between items-start mb-2">
                                    <h5 class="font-bold text-[#433A3F] mb-2">🐟 Legal Sea Foods</h5>
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold">CONFIRMED</span>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>$30 lunch • $45 dinner</strong> • Fresh Seafood</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2">
                                    <strong>Confirmed menu:</strong> Famous Shrimp & Corn Soup, Salt & Vinegar Crusted Cod, Shrimp Scampi, NY Cheesecake
                                </p>
                                <p class="text-xs text-blue-700 font-semibold">📍 Cranston location participating</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <a href="https://www.legalseafoods.com" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">Website</a>
                                    <a href="https://maps.google.com/?q=Legal+Sea+Foods+Cranston+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Legal%20Sea%20Foods%20Cranston%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Il Massimo - CONFIRMED PRICING -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate italian">
                                <div class="flex justify-between items-start mb-2">
                                    <h5 class="font-bold text-[#433A3F] mb-2">🍝 Il Massimo</h5>
                                    <span class="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-semibold">CONFIRMED</span>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>$37 pasta • $48 protein</strong> • New Age Classic Neapolitan</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2">
                                    <strong>Special bonus:</strong> Includes one glass of select wine with meal. 3-course prix fixe format.
                                </p>
                                <p class="text-xs text-green-700 font-semibold">🍷 Wine included!</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Menu</span>
                                    <a href="https://maps.google.com/?q=Il+Massimo+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Il%20Massimo%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Bar'Lino (Winter Example) -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate italian">
                                <h5 class="font-bold text-[#433A3F] mb-2">🍕 Bar'Lino Ristorante</h5>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>~$39.95</strong> • Italian</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2">Winter 2025 example: Arancini, Gondola Pizza, Short Rib Gnocchi, Cannoli. Call for July menu.</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Menu</span>
                                    <a href="https://maps.google.com/?q=Bar+Lino+Ristorante+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Bar%20Lino%20Ristorante%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Bellini (Previous Summer) -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate italian">
                                <h5 class="font-bold text-[#433A3F] mb-2">🍝 Bellini</h5>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>~$30 lunch</strong> • Italian</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2">Previous summer: Clam Venezian, Pappardelle, Pan Seared Salmon. Call for current menu.</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Menu</span>
                                    <a href="https://maps.google.com/?q=Bellini+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Bellini%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Hemenway's -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate seafood">
                                <h5 class="font-bold text-[#433A3F] mb-2">🦞 Hemenway's Restaurant</h5>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>Lunch & Dinner</strong> • Seafood</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2">121 South Main St. Fresh seafood with 3-course prix fixe options</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <a href="https://www.hemenwaysrestaurant.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">View Menu</a>
                                    <a href="https://maps.google.com/?q=Hemenwaysrestaurant+121+South+Main+St+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Hemenwaysrestaurant%20121%20South%20Main%20St%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Mare Rooftop -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate seafood">
                                <h5 class="font-bold text-[#433A3F] mb-2">🌊 Mare Rooftop</h5>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>Prix fixe available</strong> • Seafood</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2"><span class="text-orange-600">⚠️ Tuesday/Wednesday/Thursday/Sunday only</span> • Rooftop dining</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Menu</span>
                                    <a href="https://maps.google.com/?q=Mare+Rooftop+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Mare%20Rooftop%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Waterman Grille -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate american">
                                <h5 class="font-bold text-[#433A3F] mb-2">💧 Waterman Grille</h5>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>3-course dinner</strong> • American</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2"><span class="text-red-600">⚠️ Not available Saturdays</span> • American cuisine</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Menu</span>
                                    <a href="https://maps.google.com/?q=Waterman+Grille+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Waterman%20Grille%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Trattoria Appia -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate italian">
                                <div class="flex justify-between items-start mb-2">
                                    <h5 class="font-bold text-[#433A3F] mb-2">🏛️ Trattoria Appia</h5>
                                    <span class="bg-orange-500 text-white px-2 py-1 rounded-full text-xs font-semibold">SPECIAL DEAL</span>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>"Dolce Estate" Special</strong> • Southern Italian</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2">
                                    <strong>Free dessert for every entree!</strong> (limit 4/table). 3-course lunch Mon-Fri 11:30AM-4:30PM
                                </p>
                                <p class="text-xs text-orange-700 font-semibold mb-2">🍰 Free dessert deal!</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Menu</span>
                                    <a href="https://maps.google.com/?q=Trattoria+Appia+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Trattoria%20Appia%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>

                            <!-- Nicks on Broadway -->
                            <div class="restaurant-card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100 p-4" data-categories="moderate american">
                                <div class="flex justify-between items-start mb-2">
                                    <h5 class="font-bold text-[#433A3F] mb-2">🎭 Nicks on Broadway</h5>
                                    <span class="bg-purple-500 text-white px-2 py-1 rounded-full text-xs font-semibold">LIMITED DATES</span>
                                </div>
                                <p class="text-sm text-[#433A3F]/80 mb-2"><strong>Breakfast, Lunch, Dinner</strong> • American</p>
                                <p class="text-xs text-[#433A3F]/70 mb-2">
                                    <span class="text-purple-600 font-semibold">⚠️ July 17-20th ONLY</span> • Contemporary American
                                </p>
                                <p class="text-xs text-purple-700 mb-2">Won't overlap with your July 11-14 trip</p>
                                <div class="flex flex-wrap gap-2 mt-3">
                                    <span class="bg-gray-400 text-white px-3 py-1 rounded-full text-xs">Call for Menu</span>
                                    <a href="https://maps.google.com/?q=Nicks+on+Broadway+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-3 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                    <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Nicks%20on%20Broadway%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- All Other Participating Restaurants (Research-Based) -->
                    <div class="restaurant-category mb-12" data-category="all">
                        <h4 class="text-xl font-bold text-[#C07F63] mb-6 border-b-2 border-[#C07F63]/30 pb-2">�️ All Other Participating Restaurants (Call for Menus)</h4>
                        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-3">
                            
                            <!-- Italian Restaurants -->
                            <div class="bg-gradient-to-br from-green-50 to-red-50 rounded-lg p-4 border border-green-200">
                                <h5 class="font-semibold text-green-800 mb-3 flex items-center">
                                    <span class="text-lg mr-2">🇮🇹</span>
                                    Italian Cuisine
                                </h5>
                                <div class="space-y-3 text-xs">
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Angelo's Civita Farnese</span>
                                        <p class="text-green-700 mb-1">Southern Italian comfort • Federal Hill classic</p>
                                        <p class="text-xs text-green-600">🕒 Closed Mon/Tue • 📍 311 Atwells Ave • 🍝 Family recipes since 1924</p>
                                        <p class="text-xs text-green-600">💡 Famous for veal parmigiana & homemade pasta</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Bacaro Restaurant</span>
                                        <p class="text-green-700 mb-1">Traditional Italian • 3-course dinner</p>
                                        <p class="text-xs text-green-600">📍 262 S Water St • 🍷 Extensive Italian wine list</p>
                                        <p class="text-xs text-green-600">💡 Intimate setting perfect for couples</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Cassarino's Ristorante</span>
                                        <p class="text-green-700 mb-1">Traditional Italian comfort food</p>
                                        <p class="text-xs text-green-600">📍 177 Atwells Ave • 🏛️ Historic Federal Hill location</p>
                                        <p class="text-xs text-green-600">💡 Known for osso buco & chicken parmigiana</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Dolce Salato</span>
                                        <p class="text-green-700 mb-1">Sweet & savory specialties</p>
                                        <p class="text-xs text-green-600">📍 Federal Hill • 🥐 Italian bakery & café hybrid</p>
                                        <p class="text-xs text-green-600">💡 Perfect for morning pastries or light lunch</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-green-300">
                                        <span class="font-semibold">Pane e Vino ⭐</span>
                                        <p class="text-green-700 mb-1">Neapolitan cuisine • Has 2025 menu online</p>
                                        <p class="text-xs text-green-600 mb-2">📍 365 Atwells Ave • 🍕 Authentic Neapolitan pizza</p>
                                        <p class="text-xs text-green-600 mb-2">💡 Wood-fired oven • Great wine selection</p>
                                        <div class="flex flex-wrap gap-1 mt-2">
                                            <a href="https://maps.google.com/?q=Pane+e+Vino+365+Atwells+Ave+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-2 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                            <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Pane%20e%20Vino%20365%20Atwells%20Ave%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                        </div>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Pizzico Oyster Bar</span>
                                        <p class="text-green-700 mb-1">Upscale Italian • 4pm-9pm</p>
                                        <p class="text-xs text-green-600">📍 Federal Hill • 🦪 Italian-style oyster bar</p>
                                        <p class="text-xs text-green-600">💡 Cocktails & fresh seafood with Italian flair</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Rosalina</span>
                                        <p class="text-green-700 mb-1">Italian • 3-course dinner</p>
                                        <p class="text-xs text-green-600">📍 Downtown • 🍝 Modern Italian with traditional roots</p>
                                        <p class="text-xs text-green-600">💡 Contemporary atmosphere for date night</p>
                                    </div>
                                </div>
                                <div class="mt-3 p-2 bg-green-100 rounded text-xs">
                                    <p class="text-green-800 font-semibold">💡 Italian Dining Tips:</p>
                                    <p class="text-green-700">• Federal Hill is Providence's "Little Italy" - walk between restaurants</p>
                                    <p class="text-green-700">• Most offer wine pairings with Restaurant Week menus</p>
                                    <p class="text-green-700">• Perfect for Sunday dinner traditions</p>
                                </div>
                            </div>

                            <!-- American & Contemporary -->
                            <div class="bg-gradient-to-br from-blue-50 to-red-50 rounded-lg p-4 border border-blue-200">
                                <h5 class="font-semibold text-blue-800 mb-3 flex items-center">
                                    <span class="text-lg mr-2">🇺🇸</span>
                                    American & Contemporary
                                </h5>
                                <div class="space-y-3 text-xs">
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">110 Grill</span>
                                        <p class="text-blue-700 mb-1">American • Gluten-free friendly</p>
                                        <p class="text-xs text-blue-600">🕒 Closed Mondays • 📍 110 Providence Pl</p>
                                        <p class="text-xs text-blue-600">💡 Dedicated gluten-free kitchen & extensive GF menu</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Cafe Nuovo</span>
                                        <p class="text-blue-700 mb-1">New American • 3-course dinner</p>
                                        <p class="text-xs text-blue-600">📍 1 Citizens Plaza • 🌊 Waterfront location</p>
                                        <p class="text-xs text-blue-600">💡 Beautiful river views • Perfect for romantic dinners</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-blue-300">
                                        <span class="font-semibold">Circe Restaurant & Bar ⭐</span>
                                        <p class="text-blue-700 mb-1">Modern American w/ European influence</p>
                                        <p class="text-xs text-blue-600 mb-2">📍 Wayland Square • 🍸 Craft cocktail program</p>
                                        <p class="text-xs text-blue-600 mb-2">💡 Farm-to-table focus • Sophisticated atmosphere</p>
                                        <div class="flex flex-wrap gap-1 mt-2">
                                            <a href="https://maps.google.com/?q=Circe+Restaurant+Bar+Wayland+Square+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-2 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                            <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Circe%20Restaurant%20Bar%20Wayland%20Square%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                        </div>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Moonshine Alley</span>
                                        <p class="text-blue-700 mb-1">American • Lunch & dinner</p>
                                        <p class="text-xs text-blue-600">📍 Downtown • 🥃 Whiskey bar theme</p>
                                        <p class="text-xs text-blue-600">💡 Comfort food with upscale twist</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-blue-300">
                                        <span class="font-semibold">New Rivers ⭐</span>
                                        <p class="text-blue-700 mb-1">Seasonal & local New American</p>
                                        <p class="text-xs text-blue-600 mb-2">📍 7 Steeple St • 🌱 Farm-to-table pioneer</p>
                                        <p class="text-xs text-blue-600 mb-2">💡 25+ years locally sourced • Intimate setting</p>
                                        <div class="flex flex-wrap gap-1 mt-2">
                                            <a href="https://maps.google.com/?q=New+Rivers+7+Steeple+St+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-2 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                            <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=New%20Rivers%207%20Steeple%20St%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                        </div>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Oberlin</span>
                                        <p class="text-blue-700 mb-1">Contemporary • Lunch & dinner</p>
                                        <p class="text-xs text-blue-600">📍 Wayland Square • 🍷 Natural wine focus</p>
                                        <p class="text-xs text-blue-600">💡 Creative small plates • Hip atmosphere</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Parkside Rotisserie</span>
                                        <p class="text-blue-700 mb-1">American bistro w/ French technique</p>
                                        <p class="text-xs text-blue-600">📍 76 S Main St • 🐔 Rotisserie specialties</p>
                                        <p class="text-xs text-blue-600">💡 French training meets American comfort</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-blue-300">
                                        <span class="font-semibold">Red Stripe ⭐</span>
                                        <p class="text-blue-700 mb-1">American Brasserie w/ French influence</p>
                                        <p class="text-xs text-blue-600 mb-2">📍 465 Angell St • 🥩 Famous for Steak Frites & mussels</p>
                                        <p class="text-xs text-blue-600 mb-2">💡 Cozy French brasserie • Outdoor sidewalk seating • Quality ingredients</p>
                                        <div class="flex flex-wrap gap-1 mt-2">
                                            <a href="https://redstriperestaurants.com" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">Website</a>
                                            <a href="https://maps.google.com/?q=Red+Stripe+465+Angell+St+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-2 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                            <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Red%20Stripe%20465%20Angell%20St%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                        </div>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Troop</span>
                                        <p class="text-blue-700 mb-1">American • 3-course dinner</p>
                                        <p class="text-xs text-blue-600">📍 Armory District • 🏛️ Historic building</p>
                                        <p class="text-xs text-blue-600">💡 Modern American in unique setting</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">The Patio on Broadway</span>
                                        <p class="text-blue-700 mb-1">American • Outdoor patio dining</p>
                                        <p class="text-xs text-blue-600">📍 Federal Hill • ☀️ Perfect for summer dining</p>
                                        <p class="text-xs text-blue-600">💡 Casual atmosphere • Great for lunch dates</p>
                                    </div>
                                </div>
                                <div class="mt-3 p-2 bg-blue-100 rounded text-xs">
                                    <p class="text-blue-800 font-semibold">💡 American Dining Tips:</p>
                                    <p class="text-blue-700">• New Rivers & Circe are local fine dining favorites</p>
                                    <p class="text-blue-700">• Many offer seasonal menus that change frequently</p>
                                    <p class="text-blue-700">• Great wine and cocktail programs at most locations</p>
                                </div>
                            </div>

                            <!-- Global & Specialty -->
                            <div class="bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-4 border border-purple-200">
                                <h5 class="font-semibold text-purple-800 mb-3 flex items-center">
                                    <span class="text-lg mr-2">🌍</span>
                                    Global & Specialty
                                </h5>
                                <div class="space-y-3 text-xs">
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-purple-300">
                                        <span class="font-semibold">Night Shift Kitchen & Tap ⭐</span>
                                        <p class="text-purple-700 mb-1">American Gastropub • Entertainment Complex</p>
                                        <p class="text-xs text-purple-600 mb-2">📍 Providence Place Mall • � Located within Level99 entertainment</p>
                                        <p class="text-xs text-purple-600 mb-2">💡 Elevated pub fare • Craft beer selection • Dining + gaming experience</p>
                                        <div class="flex flex-wrap gap-1 mt-2">
                                            <a href="https://nightshiftbrewing.com/providence/" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">Website</a>
                                            <a href="https://maps.google.com/?q=Night+Shift+Kitchen+Tap+Providence+Place+Mall+RI" target="_blank" class="bg-[#433A3F] text-white px-2 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                            <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Night%20Shift%20Kitchen%20Tap%20Providence%20Place%20Mall%20RI" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                        </div>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Diego's Providence</span>
                                        <p class="text-purple-700 mb-1">Mexican • East Side location</p>
                                        <p class="text-xs text-purple-600">📍 Thayer Street • 🌮 Authentic Mexican flavors</p>
                                        <p class="text-xs text-purple-600">💡 Casual atmosphere • Great margaritas</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-purple-300">
                                        <span class="font-semibold">Jacky's Waterplace & Sushi Bar ⭐</span>
                                        <p class="text-purple-700 mb-1">Contemporary Asian • Sushi & Pan-Asian</p>
                                        <p class="text-xs text-purple-600 mb-2">📍 200 Exchange St • 🌊 Waterfront views of Providence River</p>
                                        <p class="text-xs text-purple-600 mb-2">💡 Elegant presentation • Fresh ingredients • Sophisticated ambiance</p>
                                        <div class="flex flex-wrap gap-1 mt-2">
                                            <a href="https://jackysgalaxie.com" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors">Website</a>
                                            <a href="https://maps.google.com/?q=Jackys+Waterplace+Sushi+Bar+200+Exchange+St+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-2 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                            <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Jackys%20Waterplace%20Sushi%20Bar%20200%20Exchange%20St%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                        </div>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Fleur</span>
                                        <p class="text-purple-700 mb-1">Contemporary • 3-course dinner</p>
                                        <p class="text-xs text-purple-600">📍 Downtown • 🌸 French-inspired contemporary</p>
                                        <p class="text-xs text-purple-600">💡 Elegant atmosphere • Creative plating</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Gift Horse</span>
                                        <p class="text-purple-700 mb-1">Seafood • 3-course dinner</p>
                                        <p class="text-xs text-purple-600">📍 114 S Main St • 🐟 Fresh local seafood</p>
                                        <p class="text-xs text-purple-600">💡 Small plates & raw bar focus</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Night Shift Kitchen</span>
                                        <p class="text-purple-700 mb-1">@ Level99 Providence • American</p>
                                        <p class="text-xs text-purple-600">📍 55 Natick Ave • 🎮 Gaming + dining experience</p>
                                        <p class="text-xs text-purple-600">💡 Unique entertainment venue • Fun for couples</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2">
                                        <span class="font-semibold">Providence Coal Fired Pizza</span>
                                        <p class="text-purple-700 mb-1">Pizza • Lunch & dinner</p>
                                        <p class="text-xs text-purple-600">📍 286 Atwells Ave • 🔥 Coal-fired oven</p>
                                        <p class="text-xs text-purple-600">💡 Artisanal pizza • Casual date night option</p>
                                    </div>
                                </div>
                                <div class="mt-3 p-2 bg-purple-100 rounded text-xs">
                                    <p class="text-purple-800 font-semibold">💡 Global Dining Tips:</p>
                                    <p class="text-purple-700">• Jacky's offers waterfront dining with Asian cuisine & sushi</p>
                                    <p class="text-purple-700">• Night Shift Kitchen combines elevated pub fare with entertainment</p>
                                    <p class="text-purple-700">• Perfect for couples wanting to try different cuisines together</p>
                                </div>
                            </div>

                            <!-- Track 15 Food Hall -->
                            <div class="bg-gradient-to-br from-orange-50 to-yellow-50 rounded-lg p-4 border border-orange-200">
                                <h5 class="font-semibold text-orange-800 mb-3 flex items-center">
                                    <span class="text-lg mr-2">🏢</span>
                                    Track 15 Food Hall
                                </h5>
                                <div class="mb-3 p-2 bg-orange-100 rounded text-xs">
                                    <p class="text-orange-800 font-semibold">📍 15 Steeple St • 🚇 Next to train station</p>
                                    <p class="text-orange-700">Modern food hall with multiple vendor options. Perfect for trying different cuisines together!</p>
                                    <div class="flex flex-wrap gap-1 mt-2">
                                        <a href="https://maps.google.com/?q=Track+15+Food+Hall+15+Steeple+St+Providence+RI" target="_blank" class="bg-[#433A3F] text-white px-2 py-1 rounded-full text-xs hover:bg-black transition-colors">Directions</a>
                                        <a href="https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=Track%2015%20Food%20Hall%2015%20Steeple%20St%20Providence%20RI" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded-full text-xs hover:bg-green-700 transition-colors">Uber</a>
                                    </div>
                                </div>
                                <div class="space-y-3 text-xs">
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-orange-300">
                                        <span class="font-semibold">Dolores Oaxacan ⭐</span>
                                        <p class="text-orange-700 mb-1">Oaxacan Mexican • Family-run authentic spot</p>
                                        <p class="text-xs text-orange-600">�🇽 Rich moles & traditional Oaxacan dishes</p>
                                        <p class="text-xs text-orange-600">💡 Authentic flavors • Family recipes since generations</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-orange-300">
                                        <span class="font-semibold">Dune Brothers Seafood ⭐</span>
                                        <p class="text-orange-700 mb-1">Seafood • Local sourcing focus</p>
                                        <p class="text-xs text-orange-600">🦞 Casual, high-quality seafood specialties</p>
                                        <p class="text-xs text-orange-600">💡 Fresh catches • New England classics • Local favorite</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-orange-300">
                                        <span class="font-semibold">Giusto Italian ⭐</span>
                                        <p class="text-orange-700 mb-1">Italian • Newport restaurant outpost</p>
                                        <p class="text-xs text-orange-600">🍝 Creative, delicious Italian fare</p>
                                        <p class="text-xs text-orange-600">💡 Acclaimed restaurant's casual location • Artisanal approach</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-orange-300">
                                        <span class="font-semibold">Little Chaska ⭐</span>
                                        <p class="text-orange-700 mb-1">Indian Street Food • Authentic spices</p>
                                        <p class="text-xs text-orange-600">�️ Flavorful Indian street food & classic dishes</p>
                                        <p class="text-xs text-orange-600">💡 Traditional recipes • Bold, authentic flavors</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-orange-300">
                                        <span class="font-semibold">Mother Pizzeria ⭐</span>
                                        <p class="text-orange-700 mb-1">Artisan Pizza • Creative & high-quality toppings</p>
                                        <p class="text-xs text-orange-600">🍕 Unique combinations • Premium ingredients</p>
                                        <p class="text-xs text-orange-600">💡 Craft pizza excellence • Perfect for sharing</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-orange-300">
                                        <span class="font-semibold">There, There ⭐</span>
                                        <p class="text-orange-700 mb-1">Specialty Coffee & Baked Goods</p>
                                        <p class="text-xs text-orange-600">☕ Expertly crafted beverages & artisan pastries</p>
                                        <p class="text-xs text-orange-600">💡 Perfect for pre- or post-meal coffee • High-quality beans</p>
                                    </div>
                                    <div class="restaurant-item bg-white/60 rounded p-2 border border-orange-300">
                                        <span class="font-semibold">Tolia Mediterranean ⭐</span>
                                        <p class="text-orange-700 mb-1">Mediterranean • Fresh & healthy options</p>
                                        <p class="text-xs text-orange-600">� Mediterranean specialties & grain bowls</p>
                                        <p class="text-xs text-orange-600">💡 Fresh ingredients • Health-conscious • Vibrant flavors</p>
                                    </div>
                                </div>
                                <div class="mt-3 p-2 bg-yellow-100 rounded text-xs">
                                    <p class="text-yellow-800 font-semibold">💡 Food Hall Experience:</p>
                                    <p class="text-yellow-700">• Each person can order from different vendors</p>
                                    <p class="text-yellow-700">• Shared seating area - great for trying multiple cuisines</p>
                                    <p class="text-yellow-700">• Perfect for casual lunch or departure day meal</p>
                                    <p class="text-yellow-700">• Easy to split up and find what you both want</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Research Note -->
                        <div class="mt-6 bg-gray-50 rounded-lg p-4 border border-gray-200">
                            <p class="text-sm text-gray-700 text-center">
                                <strong>📋 Research Note:</strong> This directory is based on comprehensive research of participating restaurants. 
                                Many specific menus aren't published yet (normal for Restaurant Weeks). Call restaurants directly for current menu details and reservations.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Planning & Reservation Tools -->
                <div class="bg-gradient-to-r from-[#C07F63]/20 to-[#433A3F]/10 rounded-2xl p-8 mb-8">
                    <h3 class="text-2xl font-bold text-center mb-8 text-[#433A3F]">💡 Complete Anniversary Planning Guide</h3>
                    
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Reservation Strategy -->
                        <div>
                            <h4 class="font-semibold text-[#433A3F] mb-4 flex items-center">
                                <span class="text-2xl mr-2">📞</span>
                                Reservation Strategy
                            </h4>
                            <div class="space-y-3">
                                <div class="bg-white/80 rounded-lg p-3">
                                    <p class="text-sm font-semibold text-[#433A3F] mb-1">📅 Book NOW for July 11-14</p>
                                    <p class="text-xs text-[#433A3F]/70">Tables fill quickly during Restaurant Week. Many restaurants require advance reservations.</p>
                                </div>
                                <div class="bg-white/80 rounded-lg p-3">
                                    <p class="text-sm font-semibold text-[#433A3F] mb-1">⏰ Best Reservation Times</p>
                                    <p class="text-xs text-[#433A3F]/70">6:30-7:30 PM for romantic dinner ambiance. 8:00+ PM for quieter, more intimate setting.</p>
                                </div>
                                <div class="bg-white/80 rounded-lg p-3">
                                    <p class="text-sm font-semibold text-[#433A3F] mb-1">💡 Pro Tip</p>
                                    <p class="text-xs text-[#433A3F]/70">Call restaurants directly - sometimes they have availability not shown online. Mention it's your anniversary!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Day-by-Day Recommendations -->
                        <div>
                            <h4 class="font-semibold text-[#433A3F] mb-4 flex items-center">
                                <span class="text-2xl mr-2">📋</span>
                                Perfect 4-Day Plan
                            </h4>
                            <div class="space-y-3">
                                <div class="bg-green-50 rounded-lg p-3 border border-green-200">
                                    <p class="text-sm font-semibold text-green-800 mb-1">Friday Night (Arrival)</p>
                                    <p class="text-xs text-green-700">Casual dinner at Il Massimo ($37) or Trattoria Appia ("Dolce Estate" special)</p>
                                </div>
                                <div class="bg-pink-50 rounded-lg p-3 border border-pink-200">
                                    <p class="text-sm font-semibold text-pink-800 mb-1">Saturday (Anniversary!)</p>
                                    <p class="text-xs text-pink-700">Special dinner at Gracie's ($59.99) - available all month! Most romantic choice.</p>
                                </div>
                                <div class="bg-blue-50 rounded-lg p-3 border border-blue-200">
                                    <p class="text-sm font-semibold text-blue-800 mb-1">Sunday (Adventure)</p>
                                    <p class="text-xs text-blue-700">Lunch at Legal Sea Foods ($30), then Mare Rooftop for sunset dinner</p>
                                </div>
                                <div class="bg-yellow-50 rounded-lg p-3 border border-yellow-200">
                                    <p class="text-sm font-semibold text-yellow-800 mb-1">Monday (Departure)</p>
                                    <p class="text-xs text-yellow-700">Farewell lunch at Track 15 Food Hall - try multiple vendors!</p>
                                </div>
                            </div>
                        </div>

                        <!-- Special Considerations -->
                        <div>
                            <h4 class="font-semibold text-[#433A3F] mb-4 flex items-center">
                                <span class="text-2xl mr-2">⚠️</span>
                                Important Notes
                            </h4>
                            <div class="space-y-3">
                                <div class="bg-red-50 rounded-lg p-3 border border-red-200">
                                    <p class="text-sm font-semibold text-red-800 mb-1">Saturday Restrictions</p>
                                    <p class="text-xs text-red-700">Capital Grille & Waterman Grille don't offer Restaurant Week menus on Saturdays</p>
                                </div>
                                <div class="bg-orange-50 rounded-lg p-3 border border-orange-200">
                                    <p class="text-sm font-semibold text-orange-800 mb-1">Limited Availability</p>
                                    <p class="text-xs text-orange-700">Mare Rooftop: Tue/Wed/Thu/Sun only. Nicks on Broadway: July 17-20 only</p>
                                </div>
                                <div class="bg-purple-50 rounded-lg p-3 border border-purple-200">
                                    <p class="text-sm font-semibold text-purple-800 mb-1">Dress Codes</p>
                                    <p class="text-xs text-purple-700">Premium restaurants: Smart casual to business casual. Italian places: Casual to smart casual</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Action Buttons -->
                    <div class="mt-8 text-center">
                        <h4 class="font-semibold text-[#433A3F] mb-4">Quick Reservation Links</h4>
                        <div class="flex flex-wrap justify-center gap-3">
                            <a href="https://www.opentable.com/providence-restaurants" target="_blank" class="bg-[#C07F63] text-white px-4 py-2 rounded-lg hover:bg-[#A9684C] transition-colors text-sm font-semibold">
                                📱 OpenTable Providence
                            </a>
                            <a href="https://resy.com/cities/providence" target="_blank" class="bg-[#433A3F] text-white px-4 py-2 rounded-lg hover:bg-black transition-colors text-sm font-semibold">
                                🍽️ Resy Providence
                            </a>
                            <a href="https://www.goprovidence.com/restaurant-week/" target="_blank" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm font-semibold">
                                ℹ️ Official Restaurant Week Info
                            </a>
                        </div>
                    </div>

                    <!-- Interactive Anniversary Budget Calculator -->
                    <div class="mt-8 bg-white/80 rounded-xl p-6 border border-[#C07F63]/30">
                        <h4 class="font-semibold text-[#433A3F] mb-4 text-center">💰 Interactive Anniversary Budget Calculator</h4>
                        
                        <!-- Calculator Inputs -->
                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-[#433A3F] mb-2">Number of Days</label>
                                    <select id="calc-days" class="w-full p-3 rounded-lg border border-[#C07F63]/30 bg-white">
                                        <option value="2">2 Days (Weekend)</option>
                                        <option value="3">3 Days (Long Weekend)</option>
                                        <option value="4" selected>4 Days (Full Trip)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-[#433A3F] mb-2">Dining Style</label>
                                    <select id="calc-style" class="w-full p-3 rounded-lg border border-[#C07F63]/30 bg-white">
                                        <option value="conservative">Conservative ($60-80/meal)</option>
                                        <option value="romantic" selected>Romantic ($100-150/meal)</option>
                                        <option value="luxury">Luxury ($150-200/meal)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-[#433A3F] mb-2">Wine & Drinks</label>
                                    <select id="calc-drinks" class="w-full p-3 rounded-lg border border-[#C07F63]/30 bg-white">
                                        <option value="none">No Alcohol</option>
                                        <option value="moderate" selected>Moderate ($50-80/meal)</option>
                                        <option value="premium">Premium ($80-120/meal)</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-[#433A3F] mb-2">Special Additions</label>
                                    <div class="space-y-2">
                                        <label class="flex items-center">
                                            <input type="checkbox" id="calc-appetizers" class="mr-2 rounded">
                                            <span class="text-sm">Extra Appetizers (+$30/meal)</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="calc-desserts" class="mr-2 rounded">
                                            <span class="text-sm">Special Desserts (+$25/meal)</span>
                                        </label>
                                        <label class="flex items-center">
                                            <input type="checkbox" id="calc-anniversary" class="mr-2 rounded" checked>
                                            <span class="text-sm">Anniversary Dinner Upgrade (+$100)</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Results Panel -->
                            <div class="bg-gradient-to-br from-pink-50 to-[#C07F63]/10 rounded-xl p-6 border border-pink-200">
                                <h5 class="font-semibold text-[#433A3F] mb-4 text-center">Your Budget Estimate</h5>
                                
                                <div class="space-y-3 mb-4">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-[#433A3F]/70">Base Meals:</span>
                                        <span id="calc-base-cost" class="font-semibold">$0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-[#433A3F]/70">Drinks:</span>
                                        <span id="calc-drinks-cost" class="font-semibold">$0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-[#433A3F]/70">Extras:</span>
                                        <span id="calc-extras-cost" class="font-semibold">$0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-[#433A3F]/70">Tax & Tip (25%):</span>
                                        <span id="calc-tax-cost" class="font-semibold">$0</span>
                                    </div>
                                    <div class="border-t border-[#433A3F]/20 pt-2">
                                        <div class="flex justify-between">
                                            <span class="font-semibold text-[#433A3F]">Total:</span>
                                            <span id="calc-total-cost" class="text-2xl font-bold text-[#C07F63]">$0</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="text-center">
                                    <div id="calc-recommendation" class="text-sm text-[#433A3F]/70 mb-3">
                                        Perfect for a romantic anniversary!
                                    </div>
                                    <button onclick="generateBudgetPlan()" class="bg-[#C07F63] text-white px-4 py-2 rounded-lg text-sm hover:bg-[#A9684C] transition-colors">
                                        Generate Meal Plan 💕
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Generated Meal Plan -->
                        <div id="calc-meal-plan" class="hidden mt-6 p-4 bg-[#C07F63]/5 rounded-lg border border-[#C07F63]/20">
                            <h6 class="font-semibold text-[#433A3F] mb-3">🍽️ Recommended Meal Plan</h6>
                            <div id="calc-plan-content" class="text-sm space-y-2"></div>
                        </div>
                        
                        <p class="text-xs text-center text-[#433A3F]/60 mt-4">
                            *Estimates based on Providence restaurant averages. Actual prices may vary by restaurant and season.
                        </p>
                    </div>
                </div>

                <!-- Interactive Restaurant Comparison Table -->
                <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 mb-8 border border-[#C07F63]/20">
                    <h3 class="text-2xl font-bold text-center mb-8 text-[#433A3F]">📊 Quick Comparison Tool</h3>
                    
                    <!-- Table Controls -->
                    <div class="flex flex-wrap justify-between items-center mb-6">
                        <div class="flex flex-wrap gap-2">
                            <button class="comparison-filter bg-[#C07F63] text-white px-3 py-1 rounded-full text-sm active" data-sort="all">All Restaurants</button>
                            <button class="comparison-filter bg-white text-[#433A3F] px-3 py-1 rounded-full text-sm border border-[#C07F63]/30" data-sort="romantic">Most Romantic</button>
                            <button class="comparison-filter bg-white text-[#433A3F] px-3 py-1 rounded-full text-sm border border-[#C07F63]/30" data-sort="price-low">Price: Low to High</button>
                            <button class="comparison-filter bg-white text-[#433A3F] px-3 py-1 rounded-full text-sm border border-[#C07F63]/30" data-sort="price-high">Price: High to Low</button>
                        </div>
                    </div>

                    <!-- Responsive Table -->
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead class="bg-[#C07F63]/10">
                                <tr>
                                    <th class="text-left p-3 font-semibold text-[#433A3F]">Restaurant</th>
                                    <th class="text-center p-3 font-semibold text-[#433A3F]">Price</th>
                                    <th class="text-center p-3 font-semibold text-[#433A3F]">Romance</th>
                                    <th class="text-center p-3 font-semibold text-[#433A3F]">Cuisine</th>
                                    <th class="text-center p-3 font-semibold text-[#433A3F]">Special Notes</th>
                                    <th class="text-center p-3 font-semibold text-[#433A3F]">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-[#C07F63]/10">
                                <!-- Top Romantic Picks -->
                                <tr class="restaurant-comparison-row hover:bg-[#C07F63]/5" data-categories="premium romantic">
                                    <td class="p-3">
                                        <div class="font-semibold text-[#433A3F]">🌟 Gracie's</div>
                                        <div class="text-xs text-[#433A3F]/60">Available all month of July</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="font-semibold text-[#C07F63]">$59.99</div>
                                        <div class="text-xs text-[#433A3F]/60">per person</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="text-pink-500">★★★★★</div>
                                        <div class="text-xs text-[#433A3F]/60">Perfect</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">American</span>
                                    </td>
                                    <td class="p-3 text-center">
                                        <div class="text-xs text-green-700">Extended offer</div>
                                        <div class="text-xs text-[#433A3F]/60">Valet parking</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="flex justify-center gap-1">
                                            <a href="https://graciesprov.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded text-xs">Menu</a>
                                            <a href="https://www.opentable.com/r/gracies-providence" target="_blank" class="bg-green-600 text-white px-2 py-1 rounded text-xs">Reserve</a>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="restaurant-comparison-row hover:bg-[#C07F63]/5" data-categories="premium romantic steakhouse">
                                    <td class="p-3">
                                        <div class="font-semibold text-[#433A3F]">🥩 The Capital Grille</div>
                                        <div class="text-xs text-red-600">Not Saturdays</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="font-semibold text-[#C07F63]">~$60</div>
                                        <div class="text-xs text-[#433A3F]/60">3-course</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="text-pink-500">★★★★★</div>
                                        <div class="text-xs text-[#433A3F]/60">Elegant</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Steakhouse</span>
                                    </td>
                                    <td class="p-3 text-center">
                                        <div class="text-xs text-blue-700">Lobster +$15</div>
                                        <div class="text-xs text-[#433A3F]/60">Valet available</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="flex justify-center gap-1">
                                            <a href="https://www.thecapitalgrille.com/" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded text-xs">Website</a>
                                            <span class="bg-gray-400 text-white px-2 py-1 rounded text-xs">Call</span>
                                        </div>
                                    </td>
                                </tr>

                                <tr class="restaurant-comparison-row hover:bg-[#C07F63]/5" data-categories="premium romantic american">
                                    <td class="p-3">
                                        <div class="font-semibold text-[#433A3F]">🍽️ Mill's Tavern</div>
                                        <div class="text-xs text-[#433A3F]/60">Contemporary American</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="font-semibold text-[#C07F63]">$55</div>
                                        <div class="text-xs text-[#433A3F]/60">per person</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="text-pink-500">★★★★☆</div>
                                        <div class="text-xs text-[#433A3F]/60">Intimate</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">American</span>
                                    </td>
                                    <td class="p-3 text-center">
                                        <div class="text-xs text-blue-700">Wine +$20</div>
                                        <div class="text-xs text-[#433A3F]/60">Truffle +$15</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="flex justify-center gap-1">
                                            <a href="https://www.millstavern.com/" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded text-xs">Website</a>
                                            <span class="bg-gray-400 text-white px-2 py-1 rounded text-xs">Call</span>
                                        </div>
                                    </td>
                                </tr>

                                <!-- Best Value Options -->
                                <tr class="restaurant-comparison-row hover:bg-[#C07F63]/5" data-categories="moderate italian">
                                    <td class="p-3">
                                        <div class="font-semibold text-[#433A3F]">🍷 Capriccio</div>
                                        <div class="text-xs text-[#433A3F]/60">Italian & Mediterranean</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="font-semibold text-[#C07F63]">$51.95</div>
                                        <div class="text-xs text-[#433A3F]/60">3-course</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="text-pink-500">★★★☆☆</div>
                                        <div class="text-xs text-[#433A3F]/60">Cozy</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Italian</span>
                                    </td>
                                    <td class="p-3 text-center">
                                        <div class="text-xs text-blue-700">Filet +$4</div>
                                        <div class="text-xs text-[#433A3F]/60">Clams +$2</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="flex justify-center gap-1">
                                            <span class="bg-gray-400 text-white px-2 py-1 rounded text-xs">Menu</span>
                                            <span class="bg-gray-400 text-white px-2 py-1 rounded text-xs">Call</span>
                                        </div>
                                    </td>
                                </tr>

                                <tr class="restaurant-comparison-row hover:bg-[#C07F63]/5" data-categories="moderate italian">
                                    <td class="p-3">
                                        <div class="font-semibold text-[#433A3F]">🍝 Il Massimo</div>
                                        <div class="text-xs text-[#433A3F]/60">Neapolitan Cuisine</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="font-semibold text-[#C07F63]">$37-48</div>
                                        <div class="text-xs text-[#433A3F]/60">pasta/protein</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="text-pink-500">★★★☆☆</div>
                                        <div class="text-xs text-[#433A3F]/60">Authentic</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Italian</span>
                                    </td>
                                    <td class="p-3 text-center">
                                        <div class="text-xs text-green-700">Wine included</div>
                                        <div class="text-xs text-[#433A3F]/60">Great value</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="flex justify-center gap-1">
                                            <a href="https://massimori.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded text-xs">Menu</a>
                                            <span class="bg-gray-400 text-white px-2 py-1 rounded text-xs">Call</span>
                                        </div>
                                    </td>
                                </tr>

                                <tr class="restaurant-comparison-row hover:bg-[#C07F63]/5" data-categories="moderate seafood">
                                    <td class="p-3">
                                        <div class="font-semibold text-[#433A3F]">🦞 Hemenway's</div>
                                        <div class="text-xs text-[#433A3F]/60">Fresh Seafood</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="font-semibold text-[#C07F63]">$35-45</div>
                                        <div class="text-xs text-[#433A3F]/60">lunch/dinner</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="text-pink-500">★★★☆☆</div>
                                        <div class="text-xs text-[#433A3F]/60">Casual</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Seafood</span>
                                    </td>
                                    <td class="p-3 text-center">
                                        <div class="text-xs text-green-700">Lunch available</div>
                                        <div class="text-xs text-[#433A3F]/60">Downtown</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="flex justify-center gap-1">
                                            <a href="https://www.hemenwaysrestaurant.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded text-xs">Menu</a>
                                            <span class="bg-gray-400 text-white px-2 py-1 rounded text-xs">Call</span>
                                        </div>
                                    </td>
                                </tr>

                                <tr class="restaurant-comparison-row hover:bg-[#C07F63]/5" data-categories="moderate seafood">
                                    <td class="p-3">
                                        <div class="font-semibold text-[#433A3F]">🐟 Legal Sea Foods</div>
                                        <div class="text-xs text-[#433A3F]/60">Cranston location</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="font-semibold text-[#C07F63]">$30-45</div>
                                        <div class="text-xs text-[#433A3F]/60">lunch/dinner</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="text-pink-500">★★☆☆☆</div>
                                        <div class="text-xs text-[#433A3F]/60">Chain</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">Seafood</span>
                                    </td>
                                    <td class="p-3 text-center">
                                        <div class="text-xs text-green-700">$30 lunch</div>
                                        <div class="text-xs text-[#433A3F]/60">Reliable quality</div>
                                    </td>
                                    <td class="text-center p-3">
                                        <div class="flex justify-center gap-1">
                                            <a href="https://www.legalseafoods.com/" target="_blank" class="bg-[#C07F63] text-white px-2 py-1 rounded text-xs">Website</a>
                                            <span class="bg-gray-400 text-white px-2 py-1 rounded text-xs">Call</span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Mobile-friendly cards for smaller screens -->
                    <div class="md:hidden space-y-4 mt-6">
                        <div class="bg-gradient-to-r from-pink-50 to-red-50 rounded-lg p-4 border border-pink-200">
                            <div class="flex justify-between items-start mb-2">
                                <h5 class="font-bold text-[#433A3F]">🌟 Gracie's</h5>
                                <span class="text-pink-500">★★★★★</span>
                            </div>
                            <p class="text-sm text-[#433A3F]/80 mb-2">$59.99 • American • Available all July</p>
                            <div class="flex gap-2">
                                <a href="https://graciesprov.com/menu/" target="_blank" class="bg-[#C07F63] text-white px-3 py-1 rounded text-xs">Menu</a>
                                <a href="https://www.opentable.com/r/gracies-providence" target="_blank" class="bg-green-600 text-white px-3 py-1 rounded text-xs">Reserve</a>
                            </div>
                        </div>
                        <!-- Add more mobile cards as needed -->
                    </div>
                </div>

                <!-- Final Call to Action -->
                <div class="text-center">
                    <p class="text-lg text-[#433A3F] mb-4">
                        <strong>60+ participating restaurants</strong> throughout Providence and surrounding Rhode Island communities
                    </p>
                    <p class="text-[#433A3F]/70 italic mb-6">
                        "Come for dinner and stay for a day or two" - Perfect for your anniversary weekend!
                    </p>
                    <div class="bg-[#C07F63]/10 rounded-lg p-4 max-w-2xl mx-auto">
                        <p class="text-sm text-[#433A3F]/80">
                            <strong>Support Local:</strong> Providence Restaurant Week serves as a crucial economic driver, encouraging both local patronage and tourism while helping sustain the city's dynamic culinary scene. Your participation directly supports Rhode Island's amazing restaurants.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Map Section -->
        <section id="map" class="py-16 md:py-24 bg-gradient-to-br from-[#433A3F] to-[#C07F63]">
            <div class="container mx-auto px-6 max-w-7xl">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4 text-white">🗺️ Interactive Providence Map</h2>
                    <p class="text-lg max-w-3xl mx-auto mb-6 text-white/90">
                        Explore all your romantic Providence locations on our interactive map. See restaurants, attractions, hotels, and key spots from your anniversary itinerary.
                    </p>
                    <div class="bg-white/20 backdrop-blur-sm rounded-xl p-4 max-w-2xl mx-auto border border-white/30">
                        <p class="text-sm text-white/80 flex items-center justify-center">
                            <span class="text-lg mr-2">📍</span>
                            Click on any marker to see details, directions, and insider tips
                        </p>
                    </div>
                </div>

                <!-- Map Controls -->
                <div class="mb-8">
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-4 max-w-4xl mx-auto border border-white/20">
                        <div class="flex flex-wrap justify-center gap-3">
                            <button class="map-filter bg-white text-[#433A3F] px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 hover:bg-white/90 active" data-map-category="all">
                                🗺️ Show All
                            </button>
                            <button class="map-filter bg-white/20 text-white px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 hover:bg-white/30" data-map-category="restaurants">
                                🍽️ Restaurants
                            </button>
                            <button class="map-filter bg-white/20 text-white px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 hover:bg-white/30" data-map-category="attractions">
                                🎭 Attractions
                            </button>
                            <button class="map-filter bg-white/20 text-white px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 hover:bg-white/30" data-map-category="hotels">
                                🏨 Hotels
                            </button>
                            <button class="map-filter bg-white/20 text-white px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 hover:bg-white/30" data-map-category="romantic">
                                💕 Romantic Spots
                            </button>
                            <button class="map-filter bg-white/20 text-white px-4 py-2 rounded-full text-sm font-semibold transition-all duration-300 hover:bg-white/30" data-map-category="waterfront">
                                🌊 Waterfront
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Interactive Map Container -->
                <div class="bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-2xl border border-white/30">
                    <div id="providence-map" class="w-full h-96 md:h-[500px] lg:h-[600px] rounded-xl overflow-hidden shadow-lg">
                        <!-- Map will be loaded here -->
                    </div>
                    
                    <!-- Map Legend -->
                    <div class="mt-6 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-sm">
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-red-500 rounded-full mr-2"></div>
                            <span class="text-[#433A3F]">Fine Dining</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-orange-500 rounded-full mr-2"></div>
                            <span class="text-[#433A3F]">Casual Dining</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-blue-500 rounded-full mr-2"></div>
                            <span class="text-[#433A3F]">Attractions</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-green-500 rounded-full mr-2"></div>
                            <span class="text-[#433A3F]">Parks/Outdoor</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-purple-500 rounded-full mr-2"></div>
                            <span class="text-[#433A3F]">Hotels</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-4 h-4 bg-pink-500 rounded-full mr-2"></div>
                            <span class="text-[#433A3F]">Romantic Spots</span>
                        </div>
                    </div>
                </div>

                <!-- Featured Locations Grid -->
                <div class="mt-12">
                    <h3 class="text-2xl font-bold text-center mb-8 text-white">📍 Featured Anniversary Locations</h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Restaurant Highlights -->
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 cursor-pointer" onclick="focusMapLocation('gracies')">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-white flex items-center">
                                    <span class="text-2xl mr-3">🌟</span>
                                    Gracie's Restaurant
                                </h4>
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                            </div>
                            <p class="text-white/80 text-sm mb-3">194 Washington St • Most romantic restaurant in Providence</p>
                            <div class="flex gap-2">
                                <span class="bg-pink-500/30 text-pink-100 px-2 py-1 rounded-full text-xs">★★★★★ Romance</span>
                                <span class="bg-green-500/30 text-green-100 px-2 py-1 rounded-full text-xs">$59.99 Menu</span>
                            </div>
                        </div>

                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 cursor-pointer" onclick="focusMapLocation('mills-tavern')">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-white flex items-center">
                                    <span class="text-2xl mr-3">🍽️</span>
                                    Mill's Tavern
                                </h4>
                                <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                            </div>
                            <p class="text-white/80 text-sm mb-3">Federal Hill • Contemporary American cuisine</p>
                            <div class="flex gap-2">
                                <span class="bg-pink-500/30 text-pink-100 px-2 py-1 rounded-full text-xs">★★★★☆ Romance</span>
                                <span class="bg-green-500/30 text-green-100 px-2 py-1 rounded-full text-xs">$55 Menu</span>
                            </div>
                        </div>

                        <!-- Attraction Highlights -->
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 cursor-pointer" onclick="focusMapLocation('riverwalk')">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-white flex items-center">
                                    <span class="text-2xl mr-3">🌊</span>
                                    Providence Riverwalk
                                </h4>
                                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            </div>
                            <p class="text-white/80 text-sm mb-3">Waterfront • Perfect for romantic evening strolls</p>
                            <div class="flex gap-2">
                                <span class="bg-blue-500/30 text-blue-100 px-2 py-1 rounded-full text-xs">FREE</span>
                                <span class="bg-pink-500/30 text-pink-100 px-2 py-1 rounded-full text-xs">Very Romantic</span>
                            </div>
                        </div>

                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 cursor-pointer" onclick="focusMapLocation('federal-hill')">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-white flex items-center">
                                    <span class="text-2xl mr-3">🇮🇹</span>
                                    Federal Hill
                                </h4>
                                <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                            </div>
                            <p class="text-white/80 text-sm mb-3">Little Italy • Multiple Italian restaurants</p>
                            <div class="flex gap-2">
                                <span class="bg-orange-500/30 text-orange-100 px-2 py-1 rounded-full text-xs">Food District</span>
                                <span class="bg-green-500/30 text-green-100 px-2 py-1 rounded-full text-xs">Walkable</span>
                            </div>
                        </div>

                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 cursor-pointer" onclick="focusMapLocation('benefit-street')">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-white flex items-center">
                                    <span class="text-2xl mr-3">🏛️</span>
                                    Benefit Street
                                </h4>
                                <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                            </div>
                            <p class="text-white/80 text-sm mb-3">Historic • "Mile of History" walking tour</p>
                            <div class="flex gap-2">
                                <span class="bg-blue-500/30 text-blue-100 px-2 py-1 rounded-full text-xs">Historic</span>
                                <span class="bg-pink-500/30 text-pink-100 px-2 py-1 rounded-full text-xs">Photo Ops</span>
                            </div>
                        </div>

                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20 hover:bg-white/20 transition-all duration-300 cursor-pointer" onclick="focusMapLocation('waterfire')">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="font-bold text-white flex items-center">
                                    <span class="text-2xl mr-3">🔥</span>
                                    WaterFire Location
                                </h4>
                                <div class="w-3 h-3 bg-pink-500 rounded-full"></div>
                            </div>
                            <p class="text-white/80 text-sm mb-3">Downtown • Iconic romantic experience</p>
                            <div class="flex gap-2">
                                <span class="bg-pink-500/30 text-pink-100 px-2 py-1 rounded-full text-xs">Most Romantic</span>
                                <span class="bg-blue-500/30 text-blue-100 px-2 py-1 rounded-full text-xs">Evening Event</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Navigation -->
                <div class="mt-12 text-center">
                    <h3 class="text-xl font-bold mb-6 text-white">🧭 Quick Navigation</h3>
                    <div class="flex flex-wrap justify-center gap-3">
                        <button onclick="focusMapLocation('downtown')" class="bg-white/20 text-white px-4 py-2 rounded-lg text-sm hover:bg-white/30 transition-colors">
                            🏙️ Downtown Providence
                        </button>
                        <button onclick="focusMapLocation('east-side')" class="bg-white/20 text-white px-4 py-2 rounded-lg text-sm hover:bg-white/30 transition-colors">
                            🎓 East Side (Brown/RISD)
                        </button>
                        <button onclick="focusMapLocation('hill')" class="bg-white/20 text-white px-4 py-2 rounded-lg text-sm hover:bg-white/30 transition-colors">
                            ⛰️ The Hill Neighborhood
                        </button>
                        <button onclick="focusMapLocation('waterfront')" class="bg-white/20 text-white px-4 py-2 rounded-lg text-sm hover:bg-white/30 transition-colors">
                            🌊 Waterfront District
                        </button>
                    </div>
                </div>

                <!-- Enhanced Map Features -->
                <div class="mt-8 space-y-6">
                    <!-- Custom Points of Interest -->
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
                        <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                            <span class="text-2xl mr-3">📌</span>
                            Add Your Own Special Places
                        </h3>
                        <p class="text-white/80 text-sm mb-6">
                            Found a hidden gem or special spot during your trip? Add it to the map to remember forever!
                        </p>
                        
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-white text-sm font-medium mb-2">Place Name</label>
                                <input 
                                    type="text" 
                                    id="custom-place-name" 
                                    placeholder="e.g., 'Our First Kiss Spot'"
                                    class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50"
                                >
                            </div>
                            <div>
                                <label class="block text-white text-sm font-medium mb-2">Category</label>
                                <select 
                                    id="custom-place-category" 
                                    class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-white/50"
                                >
                                    <option value="memory">💕 Special Memory</option>
                                    <option value="restaurant">🍽️ Restaurant</option>
                                    <option value="shop">🛍️ Shop</option>
                                    <option value="attraction">🎭 Attraction</option>
                                    <option value="photo-spot">📸 Photo Spot</option>
                                    <option value="other">📍 Other</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <label class="block text-white text-sm font-medium mb-2">Notes</label>
                            <textarea 
                                id="custom-place-notes" 
                                placeholder="What made this place special? Any details you want to remember..."
                                rows="3"
                                class="w-full px-4 py-2 rounded-lg bg-white/20 border border-white/30 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 resize-none"
                            ></textarea>
                        </div>
                        
                        <div class="mt-4 flex flex-wrap gap-3">
                            <button 
                                onclick="startAddingCustomPoint()" 
                                class="bg-gradient-to-r from-pink-500 to-red-500 text-white px-6 py-2 rounded-lg hover:from-pink-600 hover:to-red-600 transition-all duration-300 text-sm font-semibold"
                            >
                                📌 Click Map to Add Point
                            </button>
                            <button 
                                onclick="viewCustomPoints()" 
                                class="bg-white/20 text-white px-6 py-2 rounded-lg hover:bg-white/30 transition-all duration-300 text-sm font-semibold"
                            >
                                👁️ View My Places (<span id="custom-points-count">0</span>)
                            </button>
                            <button 
                                onclick="clearCustomPoints()" 
                                class="bg-red-500/30 text-white px-4 py-2 rounded-lg hover:bg-red-500/50 transition-all duration-300 text-sm"
                            >
                                🗑️ Clear All
                            </button>
                        </div>
                        
                        <div id="custom-points-status" class="mt-3 text-sm text-white/60">
                            Click the "📌 Click Map to Add Point" button, then click anywhere on the map to add your special place!
                        </div>
                    </div>

                    <!-- Quick Info Panel -->
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
                        <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                            <span class="text-2xl mr-3">📋</span>
                            Quick Location Info
                        </h3>
                        <div id="location-info-panel" class="text-white/80 text-sm">
                            Click on any map marker to see detailed information, directions, and insider tips here.
                        </div>
                    </div>

                    <!-- Map Statistics -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20">
                            <div class="text-2xl font-bold text-white" id="restaurant-count">25+</div>
                            <div class="text-sm text-white/70">Restaurants</div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20">
                            <div class="text-2xl font-bold text-white" id="attraction-count">12</div>
                            <div class="text-sm text-white/70">Attractions</div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20">
                            <div class="text-2xl font-bold text-white" id="romantic-count">8</div>
                            <div class="text-sm text-white/70">Romantic Spots</div>
                        </div>
                        <div class="bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center border border-white/20">
                            <div class="text-2xl font-bold text-white" id="custom-total-count">0</div>
                            <div class="text-sm text-white/70">Your Places</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="notes" class="py-16 md:py-24 bg-gradient-to-br from-[#EAE0D5] to-[#F5E6D3]">
            <div class="container mx-auto px-6 max-w-6xl">
                <div class="cohesive-section-header">
                    <h2 class="cohesive-section-title">💝 Couple's Notes & Memories</h2>
                    <p class="cohesive-section-subtitle">
                        Create a beautiful digital journal of your Providence anniversary weekend. Capture thoughts, upload photos, and preserve every special moment.
                    </p>
                    <div class="cohesive-card p-4 max-w-2xl mx-auto bg-white/80 backdrop-blur-sm border-[#C07F63]/20 mt-6">
                        <p class="text-sm text-[#433A3F]/70 flex items-center justify-center">
                            <span class="text-lg mr-2">✨</span>
                            All your notes and photos are saved automatically in your browser
                        </p>
                    </div>
                </div>

                <!-- Modern Tab Navigation -->
                <div class="mb-8">
                    <div class="bg-white/60 backdrop-blur-sm rounded-2xl p-2 max-w-2xl mx-auto border border-[#C07F63]/20">
                        <nav class="flex justify-center space-x-1" aria-label="Notes Tabs">
                            <button class="notes-tab-btn flex-1 py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 active-tab bg-[#C07F63] text-white shadow-lg" data-notes-tab="notes1">
                                <div class="flex flex-col items-center">
                                    <span class="text-lg mb-1">📅</span>
                                    <span>Friday 7/11</span>
                                    <span class="text-xs opacity-75">Arrival Day</span>
                                </div>
                            </button>
                            <button class="notes-tab-btn flex-1 py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 text-[#433A3F]/70 hover:text-[#C07F63] hover:bg-white/50" data-notes-tab="notes2">
                                <div class="flex flex-col items-center">
                                    <span class="text-lg mb-1">💝</span>
                                    <span>Saturday 7/12</span>
                                    <span class="text-xs opacity-75">Anniversary!</span>
                                </div>
                            </button>
                            <button class="notes-tab-btn flex-1 py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 text-[#433A3F]/70 hover:text-[#C07F63] hover:bg-white/50" data-notes-tab="notes3">
                                <div class="flex flex-col items-center">
                                    <span class="text-lg mb-1">🌅</span>
                                    <span>Sunday 7/13</span>
                                    <span class="text-xs opacity-75">Adventure</span>
                                </div>
                            </button>
                            <button class="notes-tab-btn flex-1 py-3 px-4 rounded-xl font-medium text-sm transition-all duration-300 text-[#433A3F]/70 hover:text-[#C07F63] hover:bg-white/50" data-notes-tab="notes4">
                                <div class="flex flex-col items-center">
                                    <span class="text-lg mb-1">👋</span>
                                    <span>Monday 7/14</span>
                                    <span class="text-xs opacity-75">Farewell</span>
                                </div>
                            </button>
                        </nav>
                    </div>
                </div>

                <!-- Notes Content with Enhanced UI -->
                <div id="notes-content">
                    <!-- Friday Notes -->
                    <div id="notes1" class="notes-day-content">
                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- Photo Section - Enhanced -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">📸</span>
                                        Friday Photos
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="photo-count-1" class="text-sm text-[#433A3F]/60 bg-[#C07F63]/10 px-3 py-1 rounded-full">0 photos</span>
                                    </div>
                                </div>
                                
                                <!-- Upload Area -->
                                <div class="mb-6">
                                    <label for="photo-upload-1" class="block">
                                        <div class="upload-zone border-2 border-dashed border-[#C07F63]/40 rounded-xl p-8 text-center cursor-pointer transition-all duration-300 hover:border-[#C07F63] hover:bg-[#C07F63]/5 group">
                                            <div class="text-4xl mb-3 transition-transform group-hover:scale-110">📷</div>
                                            <p class="text-lg font-semibold text-[#433A3F] mb-2">Upload Your Photos</p>
                                            <p class="text-sm text-[#433A3F]/60 mb-3">Drag & drop photos here, or click to browse</p>
                                            <div class="inline-flex items-center bg-[#C07F63] text-white px-6 py-2 rounded-lg font-medium hover:bg-[#A9684C] transition-colors">
                                                <span class="mr-2">📁</span>
                                                Choose Photos
                                            </div>
                                        </div>
                                    </label>
                                    <input type="file" id="photo-upload-1" class="hidden" accept="image/*" multiple>
                                </div>
                                
                                <!-- Photo Gallery -->
                                <div id="photo-gallery-1" class="photo-gallery grid grid-cols-2 gap-3"></div>
                                
                                <!-- Empty State -->
                                <div id="empty-state-1" class="empty-gallery-state text-center py-8">
                                    <div class="text-6xl mb-4 opacity-30">📷</div>
                                    <p class="text-[#433A3F]/50 italic">Your Friday photos will appear here</p>
                                </div>
                            </div>

                            <!-- Notes Section - Enhanced -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">✍️</span>
                                        Friday Journal
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="char-count-1" class="text-sm text-[#433A3F]/60 bg-[#C07F63]/10 px-3 py-1 rounded-full">0 characters</span>
                                        <button id="save-notes-1" class="save-btn bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors flex items-center">
                                            <span class="mr-1">💾</span>
                                            Save
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Writing Area -->
                                <div class="relative">
                                    <textarea 
                                        id="notes-text-1" 
                                        class="w-full h-64 p-4 border-2 border-[#C07F63]/20 rounded-xl resize-none focus:ring-2 focus:ring-[#C07F63] focus:border-[#C07F63] transition-all duration-300 text-[#433A3F] placeholder-[#433A3F]/40" 
                                        placeholder="Capture your arrival day thoughts and first impressions of Providence...

What did you see first? How did it feel to arrive? Any surprise discoveries? Restaurant recommendations from locals? Weather observations? Special moments walking around together?"
                                    ></textarea>
                                    
                                    <!-- Floating Suggestions -->
                                    <div class="absolute bottom-4 right-4">
                                        <div class="bg-[#C07F63]/10 backdrop-blur-sm rounded-lg p-2 text-xs text-[#433A3F]/60">
                                            💡 Writing prompts available
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Writing Prompts -->
                                <div class="mt-4 p-4 bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg border border-pink-200">
                                    <h4 class="text-sm font-semibold text-pink-800 mb-2 flex items-center">
                                        <span class="mr-2">💭</span>
                                        Writing Prompts for Friday
                                    </h4>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs text-pink-700">
                                        <div>• First thing you noticed about Providence?</div>
                                        <div>• How did you feel stepping off the plane/train?</div>
                                        <div>• Any funny travel moments?</div>
                                        <div>• Best surprise discovery today?</div>
                                        <div>• Restaurant Week excitement level?</div>
                                        <div>• One word to describe today?</div>
                                    </div>
                                </div>
                                
                                <!-- Quick Actions -->
                                <div class="mt-4 flex flex-wrap gap-2">
                                    <button class="quick-note-btn bg-[#433A3F]/10 text-[#433A3F] px-3 py-1 rounded-full text-xs hover:bg-[#433A3F]/20 transition-colors" data-text="Weather was perfect today! ☀️">
                                        ☀️ Great weather
                                    </button>
                                    <button class="quick-note-btn bg-[#433A3F]/10 text-[#433A3F] px-3 py-1 rounded-full text-xs hover:bg-[#433A3F]/20 transition-colors" data-text="Can't wait for our anniversary dinner tomorrow! 💕">
                                        💕 Excited for tomorrow
                                    </button>
                                    <button class="quick-note-btn bg-[#433A3F]/10 text-[#433A3F] px-3 py-1 rounded-full text-xs hover:bg-[#433A3F]/20 transition-colors" data-text="Providence is more beautiful than expected! 🏛️">
                                        🏛️ Beautiful city
                                    </button>
                                </div>
                                
                                <!-- Auto-save indicator -->
                                <div class="mt-4 text-center">
                                    <div id="save-status-1" class="text-xs text-green-600 opacity-0 transition-opacity duration-300">
                                        ✅ Auto-saved
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Saturday Notes -->
                    <div id="notes2" class="notes-day-content hidden">
                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- Photo Section -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">💝</span>
                                        Anniversary Photos
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="photo-count-2" class="text-sm text-[#433A3F]/60 bg-pink-100 px-3 py-1 rounded-full">0 photos</span>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <label for="photo-upload-2" class="block">
                                        <div class="upload-zone border-2 border-dashed border-pink-300 rounded-xl p-8 text-center cursor-pointer transition-all duration-300 hover:border-pink-500 hover:bg-pink-50 group">
                                            <div class="text-4xl mb-3 transition-transform group-hover:scale-110">💖</div>
                                            <p class="text-lg font-semibold text-[#433A3F] mb-2">Anniversary Memories</p>
                                            <p class="text-sm text-[#433A3F]/60 mb-3">Capture your special day together</p>
                                            <div class="inline-flex items-center bg-pink-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-pink-600 transition-colors">
                                                <span class="mr-2">💕</span>
                                                Add Photos
                                            </div>
                                        </div>
                                    </label>
                                    <input type="file" id="photo-upload-2" class="hidden" accept="image/*" multiple>
                                </div>
                                
                                <div id="photo-gallery-2" class="photo-gallery grid grid-cols-2 gap-3"></div>
                                <div id="empty-state-2" class="empty-gallery-state text-center py-8">
                                    <div class="text-6xl mb-4 opacity-30">💖</div>
                                    <p class="text-[#433A3F]/50 italic">Your anniversary photos will appear here</p>
                                </div>
                            </div>

                            <!-- Notes Section -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">💕</span>
                                        Anniversary Journal
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="char-count-2" class="text-sm text-[#433A3F]/60 bg-pink-100 px-3 py-1 rounded-full">0 characters</span>
                                        <button id="save-notes-2" class="save-btn bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors flex items-center">
                                            <span class="mr-1">💾</span>
                                            Save
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="relative">
                                    <textarea 
                                        id="notes-text-2" 
                                        class="w-full h-64 p-4 border-2 border-pink-200 rounded-xl resize-none focus:ring-2 focus:ring-pink-400 focus:border-pink-400 transition-all duration-300 text-[#433A3F] placeholder-[#433A3F]/40" 
                                        placeholder="Today is your anniversary! Capture every beautiful moment...

How did you feel waking up on your anniversary? What made you smile? Any romantic surprises? How was your special dinner? What moments do you want to remember forever?"
                                    ></textarea>
                                </div>
                                
                                <div class="mt-4 p-4 bg-gradient-to-r from-pink-50 to-red-50 rounded-lg border border-pink-200">
                                    <h4 class="text-sm font-semibold text-pink-800 mb-2 flex items-center">
                                        <span class="mr-2">💕</span>
                                        Anniversary Prompts
                                    </h4>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs text-pink-700">
                                        <div>• Most romantic moment today?</div>
                                        <div>• How did dinner make you feel?</div>
                                        <div>• Any surprise romantic gestures?</div>
                                        <div>• Perfect anniversary moment?</div>
                                        <div>• What made you fall in love again?</div>
                                        <div>• How does it feel to celebrate here?</div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 flex flex-wrap gap-2">
                                    <button class="quick-note-btn bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-xs hover:bg-pink-200 transition-colors" data-text="Perfect anniversary dinner! So romantic 💕">
                                        💕 Romantic dinner
                                    </button>
                                    <button class="quick-note-btn bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-xs hover:bg-pink-200 transition-colors" data-text="Feeling so grateful for this beautiful day together ✨">
                                        ✨ Feeling grateful
                                    </button>
                                    <button class="quick-note-btn bg-pink-100 text-pink-800 px-3 py-1 rounded-full text-xs hover:bg-pink-200 transition-colors" data-text="Providence is the perfect anniversary destination! 🏛️">
                                        🏛️ Perfect location
                                    </button>
                                </div>
                                
                                <div class="mt-4 text-center">
                                    <div id="save-status-2" class="text-xs text-green-600 opacity-0 transition-opacity duration-300">
                                        ✅ Auto-saved
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sunday Notes -->
                    <div id="notes3" class="notes-day-content hidden">
                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- Photo Section -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">🌅</span>
                                        Sunday Adventures
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="photo-count-3" class="text-sm text-[#433A3F]/60 bg-blue-100 px-3 py-1 rounded-full">0 photos</span>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <label for="photo-upload-3" class="block">
                                        <div class="upload-zone border-2 border-dashed border-blue-300 rounded-xl p-8 text-center cursor-pointer transition-all duration-300 hover:border-blue-500 hover:bg-blue-50 group">
                                            <div class="text-4xl mb-3 transition-transform group-hover:scale-110">🗺️</div>
                                            <p class="text-lg font-semibold text-[#433A3F] mb-2">Adventure Day</p>
                                            <p class="text-sm text-[#433A3F]/60 mb-3">Document your explorations</p>
                                            <div class="inline-flex items-center bg-blue-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                                                <span class="mr-2">🗺️</span>
                                                Add Photos
                                            </div>
                                        </div>
                                    </label>
                                    <input type="file" id="photo-upload-3" class="hidden" accept="image/*" multiple>
                                </div>
                                
                                <div id="photo-gallery-3" class="photo-gallery grid grid-cols-2 gap-3"></div>
                                <div id="empty-state-3" class="empty-gallery-state text-center py-8">
                                    <div class="text-6xl mb-4 opacity-30">🗺️</div>
                                    <p class="text-[#433A3F]/50 italic">Your Sunday adventure photos will appear here</p>
                                </div>
                            </div>

                            <!-- Notes Section -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">🌊</span>
                                        Adventure Journal
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="char-count-3" class="text-sm text-[#433A3F]/60 bg-blue-100 px-3 py-1 rounded-full">0 characters</span>
                                        <button id="save-notes-3" class="save-btn bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors flex items-center">
                                            <span class="mr-1">💾</span>
                                            Save
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="relative">
                                    <textarea 
                                        id="notes-text-3" 
                                        class="w-full h-64 p-4 border-2 border-blue-200 rounded-xl resize-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all duration-300 text-[#433A3F] placeholder-[#433A3F]/40" 
                                        placeholder="Sunday exploration day! What adventures did you discover...

Where did you explore? What hidden gems did you find? Any spontaneous discoveries? How was the riverboat or waterfront walk? Best view of the day? Favorite discovery together?"
                                    ></textarea>
                                </div>
                                
                                <div class="mt-4 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-200">
                                    <h4 class="text-sm font-semibold text-blue-800 mb-2 flex items-center">
                                        <span class="mr-2">🗺️</span>
                                        Adventure Prompts
                                    </h4>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs text-blue-700">
                                        <div>• Coolest place you discovered?</div>
                                        <div>• Best view of Providence?</div>
                                        <div>• Any unplanned adventures?</div>
                                        <div>• Most photogenic spot?</div>
                                        <div>• How was the waterfront?</div>
                                        <div>• Favorite local interaction?</div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 flex flex-wrap gap-2">
                                    <button class="quick-note-btn bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs hover:bg-blue-200 transition-colors" data-text="Amazing views from the waterfront! 🌊">
                                        🌊 Great views
                                    </button>
                                    <button class="quick-note-btn bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs hover:bg-blue-200 transition-colors" data-text="Discovered so many hidden gems today! 💎">
                                        💎 Hidden gems
                                    </button>
                                    <button class="quick-note-btn bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs hover:bg-blue-200 transition-colors" data-text="Perfect day for exploring together! ☀️">
                                        ☀️ Perfect weather
                                    </button>
                                </div>
                                
                                <div class="mt-4 text-center">
                                    <div id="save-status-3" class="text-xs text-green-600 opacity-0 transition-opacity duration-300">
                                        ✅ Auto-saved
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Monday Notes -->
                    <div id="notes4" class="notes-day-content hidden">
                        <div class="grid lg:grid-cols-2 gap-8">
                            <!-- Photo Section -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">👋</span>
                                        Farewell Moments
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="photo-count-4" class="text-sm text-[#433A3F]/60 bg-yellow-100 px-3 py-1 rounded-full">0 photos</span>
                                    </div>
                                </div>
                                
                                <div class="mb-6">
                                    <label for="photo-upload-4" class="block">
                                        <div class="upload-zone border-2 border-dashed border-yellow-300 rounded-xl p-8 text-center cursor-pointer transition-all duration-300 hover:border-yellow-500 hover:bg-yellow-50 group">
                                            <div class="text-4xl mb-3 transition-transform group-hover:scale-110">🌅</div>
                                            <p class="text-lg font-semibold text-[#433A3F] mb-2">Last Morning</p>
                                            <p class="text-sm text-[#433A3F]/60 mb-3">Final Providence memories</p>
                                            <div class="inline-flex items-center bg-yellow-500 text-white px-6 py-2 rounded-lg font-medium hover:bg-yellow-600 transition-colors">
                                                <span class="mr-2">📸</span>
                                                Add Photos
                                            </div>
                                        </div>
                                    </label>
                                    <input type="file" id="photo-upload-4" class="hidden" accept="image/*" multiple>
                                </div>
                                
                                <div id="photo-gallery-4" class="photo-gallery grid grid-cols-2 gap-3"></div>
                                <div id="empty-state-4" class="empty-gallery-state text-center py-8">
                                    <div class="text-6xl mb-4 opacity-30">🌅</div>
                                    <p class="text-[#433A3F]/50 italic">Your farewell photos will appear here</p>
                                </div>
                            </div>

                            <!-- Notes Section -->
                            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-[#C07F63]/20">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-xl font-bold font-display text-[#433A3F] flex items-center">
                                        <span class="text-2xl mr-3">💭</span>
                                        Farewell Reflections
                                    </h3>
                                    <div class="flex items-center space-x-2">
                                        <span id="char-count-4" class="text-sm text-[#433A3F]/60 bg-yellow-100 px-3 py-1 rounded-full">0 characters</span>
                                        <button id="save-notes-4" class="save-btn bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors flex items-center">
                                            <span class="mr-1">💾</span>
                                            Save
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="relative">
                                    <textarea 
                                        id="notes-text-4" 
                                        class="w-full h-64 p-4 border-2 border-yellow-200 rounded-xl resize-none focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 transition-all duration-300 text-[#433A3F] placeholder-[#433A3F]/40" 
                                        placeholder="Time to say goodbye to Providence... Reflect on your amazing weekend...

How did this trip exceed expectations? What will you miss most? Favorite memory overall? How did this strengthen your relationship? Would you come back? What surprised you most about Providence?"
                                    ></textarea>
                                </div>
                                
                                <div class="mt-4 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200">
                                    <h4 class="text-sm font-semibold text-yellow-800 mb-2 flex items-center">
                                        <span class="mr-2">💭</span>
                                        Reflection Prompts
                                    </h4>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs text-yellow-700">
                                        <div>• Overall trip highlight?</div>
                                        <div>• How did Providence surprise you?</div>
                                        <div>• Best couple moment?</div>
                                        <div>• What will you miss most?</div>
                                        <div>• Would you recommend to others?</div>
                                        <div>• Planning to return?</div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 flex flex-wrap gap-2">
                                    <button class="quick-note-btn bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs hover:bg-yellow-200 transition-colors" data-text="Perfect anniversary weekend! Can't wait to come back 💕">
                                        💕 Perfect trip
                                    </button>
                                    <button class="quick-note-btn bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs hover:bg-yellow-200 transition-colors" data-text="Providence exceeded all our expectations! ✨">
                                        ✨ Exceeded expectations
                                    </button>
                                    <button class="quick-note-btn bg-yellow-100 text-yellow-800 px-3 py-1 rounded-full text-xs hover:bg-yellow-200 transition-colors" data-text="So grateful for this beautiful time together 🙏">
                                        🙏 Feeling grateful
                                    </button>
                                </div>
                                
                                <div class="mt-4 text-center">
                                    <div id="save-status-4" class="text-xs text-green-600 opacity-0 transition-opacity duration-300">
                                        ✅ Auto-saved
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Summary Section -->
                <div class="mt-12 text-center">
                    <div class="bg-gradient-to-r from-[#C07F63]/10 to-[#433A3F]/10 rounded-2xl p-8 max-w-4xl mx-auto border border-[#C07F63]/20">
                        <h4 class="text-xl font-bold text-[#433A3F] mb-4 flex items-center justify-center">
                            <span class="text-2xl mr-3">📖</span>
                            Your Complete Providence Story
                        </h4>
                        <p class="text-[#433A3F]/80 mb-6">
                            Every note, every photo, every moment captured here creates your unique Providence anniversary story. 
                            These memories will be saved automatically and will always be here to revisit your perfect weekend together.
                        </p>
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="bg-white/80 rounded-lg p-4">
                                <div class="text-2xl mb-2">📱</div>
                                <h5 class="font-semibold text-[#433A3F] mb-1">Auto-Save</h5>
                                <p class="text-sm text-[#433A3F]/70">Everything saves automatically to your browser</p>
                            </div>
                            <div class="bg-white/80 rounded-lg p-4">
                                <div class="text-2xl mb-2">📸</div>
                                <h5 class="font-semibold text-[#433A3F] mb-1">Photo Gallery</h5>
                                <p class="text-sm text-[#433A3F]/70">Upload unlimited photos for each day</p>
                            </div>
                            <div class="bg-white/80 rounded-lg p-4">
                                <div class="text-2xl mb-2">💝</div>
                                <h5 class="font-semibold text-[#433A3F] mb-1">Forever Memories</h5>
                                <p class="text-sm text-[#433A3F]/70">Your anniversary journal to cherish always</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Boomerang Kiss Video Section -->
        <section id="kiss-boomerang" class="boomerang-bg relative min-h-screen flex items-center justify-center overflow-hidden">
            <!-- Video Background -->
            <video 
                class="absolute inset-0 w-full h-full object-cover" 
                autoplay 
                muted 
                loop 
                playsinline
                poster="">
                <source src="assets/videos/kiss-boomerang.mp4" type="video/mp4">
            </video>
            
            <!-- Overlay for better text readability -->
            <div class="absolute inset-0 bg-black/20"></div>
            
            <!-- Content Overlay -->
            <div class="relative z-10 text-center px-6 max-w-4xl mx-auto">
                <div class="boomerang-content">
                    <h2 class="text-4xl md:text-6xl font-bold text-white mb-6 drop-shadow-lg">
                        Our Perfect Moment
                    </h2>
                    <p class="text-xl md:text-2xl text-white/90 mb-8 drop-shadow-lg max-w-2xl mx-auto leading-relaxed">
                        Some moments are too beautiful for just one memory. This kiss captures the magic of our love story, 
                        playing endlessly like our forever promise to each other.
                    </p>
                    
                    <!-- Floating Hearts Animation -->
                    <div class="floating-hearts-container">
                        <div class="floating-heart heart-1">💕</div>
                        <div class="floating-heart heart-2">💖</div>
                        <div class="floating-heart heart-3">💝</div>
                        <div class="floating-heart heart-4">💗</div>
                        <div class="floating-heart heart-5">💘</div>
                    </div>
                    
                    <div class="mt-12">
                        <button class="boomerang-cta-button" onclick="scrollToSection('our-song')">
                            ✨ Continue Our Story
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Scroll indicator -->
            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white/80">
                <p class="text-sm mb-2">Scroll to continue</p>
                <div class="animate-bounce">↓</div>
            </div>
        </section>

        <section id="our-song" class="our-song-section py-16 md:py-24 relative">
            <div class="container mx-auto px-6 max-w-6xl relative z-10">
                <div class="cohesive-section-header">
                    <h2 class="cohesive-section-title text-white">Our Songs & Memories</h2>
                    <p class="cohesive-section-subtitle text-white/90">
                        Every love story has a soundtrack. These are the songs that capture our journey and set the mood for our romantic Providence adventure.
                    </p>
                </div>

                <!-- Music Service Connection Status -->
                <div class="flex justify-center mb-8">
                    <div class="bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20">
                        <div class="flex flex-wrap gap-3 items-center justify-center">
                            <div class="service-status flex items-center gap-2 text-white/80 text-sm">
                                <span class="w-2 h-2 bg-red-400 rounded-full"></span>
                                <span>Spotify</span>
                            </div>
                            <div class="service-status flex items-center gap-2 text-white/80 text-sm">
                                <span class="w-2 h-2 bg-red-400 rounded-full"></span>
                                <span>YouTube Music</span>
                            </div>
                            <button class="connect-services-btn bg-[#C07F63] text-white px-4 py-2 rounded-full text-sm hover:bg-[#A9684C] transition-colors" onclick="showMusicServicesModal()">
                                Connect Music Services
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Song Timeline Container -->
                <div id="song-timeline" class="space-y-8">
                    <!-- First Song - Our Original -->
                    <div class="song-memory-card bg-white/10 backdrop-blur-sm rounded-xl p-6 border border-white/20">
                        <div class="grid md:grid-cols-2 gap-6 items-center">
                            <div class="music-player">
                                <div class="music-content text-center">
                                    <div class="music-note" style="top: 10px; right: 20px;">🎵</div>
                                    <div class="music-note" style="bottom: 15px; left: 15px;">🎶</div>
                                    
                                    <div class="song-title">Burning Blue</div>
                                    <div class="song-artist">by Mariah the Scientist</div>
                                    
                                    <button class="play-button" id="music-play-btn-1" onclick="toggleMusic(1)">
                                        <span id="play-icon-1">▶️</span>
                                    </button>
                                    
                                    <div class="soundcloud-embed mt-4">
                                        <iframe 
                                            width="100%" 
                                            height="200" 
                                            scrolling="no" 
                                            frameborder="no" 
                                            allow="autoplay" 
                                            src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/2087427186&color=%23c07f63&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"
                                            style="border-radius: 12px; border: none;">
                                        </iframe>
                                    </div>
                                    
                                    <div class="mt-4 text-center">
                                        <div class="flex justify-center gap-3">
                                            <a href="https://music.youtube.com/search?q=burning+blue+mariah+the+scientist" target="_blank" class="text-[#C07F63] hover:text-[#A9684C] text-sm">
                                                🎵 YouTube Music
                                            </a>
                                            <a href="https://open.spotify.com/search/burning%20blue%20mariah%20the%20scientist" target="_blank" class="text-[#C07F63] hover:text-[#A9684C] text-sm">
                                                🎶 Spotify
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="text-white">
                                <div class="flex items-center gap-3 mb-4">
                                    <h3 class="text-2xl font-bold font-display">Our First Song</h3>
                                    <span class="bg-pink-500/20 text-pink-200 px-2 py-1 rounded-full text-xs">December 2024</span>
                                </div>
                                
                                <div class="song-memory-story bg-white/5 rounded-lg p-4 mb-4">
                                    <p class="text-white/90 leading-relaxed">
                                        "This song played in the Omni that first night, and I have gotten chills every other time I have listened to it. It perfectly captures that magical moment when everything changed, and the melody takes me back to that perfect evening when I knew this was something special."
                                    </p>
                                </div>
                                
                                <div class="flex gap-2">
                                    <button class="edit-memory-btn bg-white/10 text-white px-3 py-1 rounded-full text-sm hover:bg-white/20 transition-colors">
                                        ✏️ Edit Memory
                                    </button>
                                    <button class="add-to-playlist-btn bg-[#C07F63]/20 text-[#C07F63] px-3 py-1 rounded-full text-sm hover:bg-[#C07F63]/30 transition-colors">
                                        ➕ Add to Providence Playlist
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Add Song Card -->
                    <div class="add-song-card bg-white/5 backdrop-blur-sm rounded-xl p-8 border border-white/10 border-dashed text-center">
                        <div class="text-white/60 mb-4">
                            <div class="text-6xl mb-4">🎵</div>
                            <h3 class="text-xl font-semibold mb-2">Add Another Special Song</h3>
                            <p class="text-sm text-white/40 mb-6">Every moment of your love story deserves its own soundtrack</p>
                        </div>
                        <button id="add-song-btn" class="bg-[#C07F63] text-white px-6 py-3 rounded-full font-semibold hover:bg-[#A9684C] transition-colors">
                            Add a Memory Song
                        </button>
                    </div>
                </div>

                <!-- Playlist Builder Teaser -->
                <div class="mt-12 text-center">
                    <div class="bg-gradient-to-r from-[#C07F63]/20 to-pink-500/20 rounded-xl p-6 border border-white/10">
                        <h3 class="text-xl font-bold text-white mb-2">🎼 Coming Soon: Full Playlist Builder</h3>
                        <p class="text-white/80 text-sm mb-4">Create collaborative playlists for every moment of your Providence adventure</p>
                        <div class="flex justify-center gap-4 text-sm text-white/60">
                            <span>🍽️ Dinner Music</span>
                            <span>⛵ Boat Tour Vibes</span>
                            <span>🌙 Evening Strolls</span>
                        </div>
                    </div>
                </div>
            </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">🏨</span>
                                <span>The song that played at the Omni that first night</span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">✨</span>
                                <span>Gives me chills every single time I hear it</span>
                            </div>
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">💕</span>
                                <span>The soundtrack to our Providence adventure</span>
                            </div>
                        </div>
                        
                        <div class="mt-8 p-4 bg-white/10 rounded-lg backdrop-filter backdrop-blur-sm">
                            <p class="italic text-center">
                                "Music is the universal language of love, and this song speaks directly to our hearts. Every note reminds me why I chose you, today and always."
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Second Song Section -->
                <div class="mt-16 border-t border-white/20 pt-16">
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div class="text-white order-2 md:order-1">
                            <h3 class="text-2xl font-bold font-display mb-6">Little Things - A Song for You</h3>
                            
                            <div class="song-lyrics-preview">
                                "I chose this song because it perfectly captures how I feel about you and us. It's about appreciating all the small, beautiful moments that make our relationship so special. Every little thing you do - from the way you make me laugh to how you always know just what to say - adds up to something extraordinary."
                            </div>
                            
                            <div class="space-y-4 mt-6">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">✨</span>
                                    <span>It's the little things that make us perfect together</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">💫</span>
                                    <span>Every small gesture means the world to me</span>
                                </div>
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">💕</span>
                                    <span>A reminder of why I fall for you more each day</span>
                                </div>
                            </div>
                            
                            <div class="mt-8 p-4 bg-white/10 rounded-lg backdrop-filter backdrop-blur-sm">
                                <p class="italic text-center">
                                    "Sometimes it's not the grand gestures that matter most, but the little things that show how much you care. This song is my way of saying I notice and cherish every single one."
                                </p>
                            </div>
                        </div>

                        <div class="music-player order-1 md:order-2">
                            <div class="music-content text-center">
                                <div class="music-note" style="top: 10px; left: 20px;">🎵</div>
                                <div class="music-note" style="bottom: 15px; right: 15px;">🎶</div>
                                
                                <div class="song-title">Little Things</div>
                                <div class="song-artist">by Ella Mai</div>
                                
                                <p class="text-sm text-[#433A3F]/70 mb-4">
                                    A special song from me to you
                                </p>
                                
                                <div class="soundcloud-embed">
                                    <iframe 
                                        width="100%" 
                                        height="300" 
                                        scrolling="no" 
                                        frameborder="no" 
                                        allow="autoplay" 
                                        src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/1946784071&color=%23c07f63&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true&visual=true"
                                        style="border-radius: 12px; border: none;">
                                    </iframe>
                                    <div style="font-size: 10px; color: #cccccc; line-break: anywhere; word-break: normal; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif; font-weight: 100;">
                                        <a href="https://soundcloud.com/itsellamai" title="Ella Mai" target="_blank" style="color: #cccccc; text-decoration: none;">Ella Mai</a> · 
                                        <a href="https://soundcloud.com/itsellamai/little-things" title="Little Things" target="_blank" style="color: #cccccc; text-decoration: none;">Little Things</a>
                                    </div>
                                </div>
                                
                                <div class="mt-4 text-center">
                                    <p class="text-xs text-[#433A3F]/60 mb-2">Can't hear the song? Listen here:</p>
                                    <div class="flex justify-center gap-3">
                                        <a href="https://music.youtube.com/search?q=little+things+ella+mai" target="_blank" class="text-[#C07F63] hover:text-[#A9684C] text-sm">
                                            🎵 YouTube Music
                                        </a>
                                        <a href="https://open.spotify.com/search/little%20things%20ella%20mai" target="_blank" class="text-[#C07F63] hover:text-[#A9684C] text-sm">
                                            🎶 Spotify
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Music controls and playlist -->
                <div class="mt-16 text-center">
                    <h4 class="text-xl font-bold mb-4 text-white">Our Anniversary Playlist</h4>
                    <div class="grid md:grid-cols-4 gap-4">
                        <div class="bg-white/10 p-4 rounded-lg backdrop-filter backdrop-blur-sm">
                            <div class="text-lg font-semibold">🎵 Burning Blue</div>
                            <div class="text-sm opacity-80">Mariah the Scientist</div>
                            <div class="text-xs mt-2">Our special song</div>
                        </div>
                        <div class="bg-white/10 p-4 rounded-lg backdrop-filter backdrop-blur-sm">
                            <div class="text-lg font-semibold">💝 Little Things</div>
                            <div class="text-sm opacity-80">Ella Mai</div>
                            <div class="text-xs mt-2">A song for you</div>
                        </div>
                        <div class="bg-white/10 p-4 rounded-lg backdrop-filter backdrop-blur-sm">
                            <div class="text-lg font-semibold">💕 Perfect</div>
                            <div class="text-sm opacity-80">Ed Sheeran</div>
                            <div class="text-xs mt-2">Dinner soundtrack</div>
                        </div>
                        <div class="bg-white/10 p-4 rounded-lg backdrop-filter backdrop-blur-sm">
                            <div class="text-lg font-semibold">🌙 La Vie En Rose</div>
                            <div class="text-sm opacity-80">Édith Piaf</div>
                            <div class="text-xs mt-2">Evening stroll vibes</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="memories" class="py-16 md:py-24">
            <div class="container mx-auto px-6 max-w-6xl">
                <h2 class="text-3xl md:text-4xl font-bold text-center mb-4">Our Memories</h2>
                <p class="text-center text-lg max-w-3xl mx-auto mb-12 text-[#433A3F]/80">
                    Capturing the beautiful moments from our Providence adventure. These special photos and videos will always remind us of our perfect anniversary weekend together.
                </p>

                <div class="grid md:grid-cols-3 gap-8 mb-12">
                    <div class="memory-card bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="relative group cursor-pointer" onclick="openModal('assets/images/ugo1.jpg', 'Our Providence Adventure')">
                            <img src="assets/images/ugo1.jpg" alt="Providence Memory 1" class="w-full h-80 object-cover transition-transform duration-300 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            <div class="absolute bottom-4 left-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <h3 class="text-xl font-bold font-display mb-2">Our Providence Adventure</h3>
                                <p class="text-sm">A beautiful moment captured during our anniversary weekend</p>
                            </div>
                            <div class="absolute top-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="memory-card bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="relative group cursor-pointer" onclick="openModal('assets/images/ugo2.jpg', 'Special Moments')">
                            <img src="assets/images/ugo2.jpg" alt="Providence Memory 2" class="w-full h-80 object-cover transition-transform duration-300 group-hover:scale-105">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                            <div class="absolute bottom-4 left-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <h3 class="text-xl font-bold font-display mb-2">Special Moments</h3>
                                <p class="text-sm">Creating memories that will last a lifetime in beautiful Providence</p>
                            </div>
                            <div class="absolute top-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <div class="memory-card bg-white rounded-lg shadow-lg overflow-hidden">
                        <div class="relative group">
                            <video 
                                class="w-full h-80 object-cover transition-transform duration-300 group-hover:scale-105" 
                                controls 
                                preload="metadata"
                                poster="assets/images/memory-video-thumbnail.jpg"
                                onclick="this.play()">
                                <source src="assets/videos/memory-video.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                            </video>
                            <!-- Play Button Overlay -->
                            <div class="absolute inset-0 flex items-center justify-center pointer-events-none group-hover:opacity-80 transition-opacity duration-300">
                                <div class="bg-black/60 rounded-full p-4 play-button-overlay opacity-90 group-hover:opacity-100 transition-opacity duration-300">
                                    <svg class="w-12 h-12 text-white ml-1" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M8 5v14l11-7z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"></div>
                            <div class="absolute bottom-4 left-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
                                <h3 class="text-xl font-bold font-display mb-2">Our Love in Motion 🎥</h3>
                                <p class="text-sm">A special video capturing our beautiful moments together</p>
                            </div>
                            <div class="absolute top-4 right-4 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <p class="text-lg font-display text-[#C07F63] mb-4">✨ Forever in our hearts ✨</p>
                    <p class="text-[#433A3F]/80 max-w-2xl mx-auto">
                        These photos and videos represent just a glimpse of the magic we experienced together. Every corner of Providence holds a special memory from our anniversary celebration.
                    </p>
                </div>
            </div>
        </section>

        <!-- Our Playlists Section - Phase 2 Implementation -->
        <section id="playlists" class="py-16 md:py-24 bg-gradient-to-br from-purple-900 via-indigo-900 to-blue-900 relative overflow-hidden">
            <!-- Animated musical background elements -->
            <div class="absolute inset-0 opacity-10">
                <div class="absolute top-20 left-20 text-6xl animate-pulse">🎵</div>
                <div class="absolute top-40 right-32 text-4xl animate-bounce delay-300">🎶</div>
                <div class="absolute bottom-40 left-1/4 text-5xl animate-pulse delay-700">🎤</div>
                <div class="absolute bottom-20 right-1/4 text-3xl animate-bounce delay-1000">🎧</div>
                <div class="absolute top-1/2 left-10 text-4xl animate-pulse delay-500">🎹</div>
                <div class="absolute top-1/3 right-10 text-3xl animate-bounce delay-800">🎸</div>
            </div>
            
            <div class="container mx-auto px-6 max-w-6xl relative z-10">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold mb-6 text-white font-display">
                        🎵 Our Playlists 🎵
                    </h2>
                    <p class="text-xl text-white/90 max-w-3xl mx-auto leading-relaxed">
                        Create the perfect soundtrack for every moment of your Providence anniversary. From romantic dinners to adventurous explorations - build collaborative playlists that capture the magic of your love story.
                    </p>
                </div>

                <!-- Music Service Connection Status -->
                <div class="flex justify-center mb-12">
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20">
                        <h3 class="text-lg font-semibold text-white mb-4 text-center">🔗 Connect Your Music Services</h3>
                        <div class="grid md:grid-cols-3 gap-4">
                            <!-- Spotify Connection -->
                            <div class="music-service-card bg-white/5 rounded-xl p-4 border border-white/10 hover:border-green-400/50 transition-colors cursor-pointer" onclick="connectMusicService('spotify')">
                                <div class="text-center">
                                    <div class="text-4xl mb-3">🎵</div>
                                    <h4 class="font-semibold text-white mb-2">Spotify</h4>
                                    <div class="flex items-center justify-center gap-2 mb-3">
                                        <span class="w-2 h-2 bg-red-400 rounded-full" id="spotify-status"></span>
                                        <span class="text-white/80 text-sm" id="spotify-status-text">Not Connected</span>
                                    </div>
                                    <button class="bg-green-500 text-white px-4 py-2 rounded-full text-sm hover:bg-green-600 transition-colors w-full">
                                        Connect
                                    </button>
                                </div>
                            </div>

                            <!-- YouTube Music Connection -->
                            <div class="music-service-card bg-white/5 rounded-xl p-4 border border-white/10 hover:border-red-400/50 transition-colors cursor-pointer" onclick="connectMusicService('youtube')">
                                <div class="text-center">
                                    <div class="text-4xl mb-3">📺</div>
                                    <h4 class="font-semibold text-white mb-2">YouTube Music</h4>
                                    <div class="flex items-center justify-center gap-2 mb-3">
                                        <span class="w-2 h-2 bg-red-400 rounded-full" id="youtube-status"></span>
                                        <span class="text-white/80 text-sm" id="youtube-status-text">Not Connected</span>
                                    </div>
                                    <button class="bg-red-500 text-white px-4 py-2 rounded-full text-sm hover:bg-red-600 transition-colors w-full">
                                        Connect
                                    </button>
                                </div>
                            </div>

                            <!-- Qobuz Connection -->
                            <div class="music-service-card bg-white/5 rounded-xl p-4 border border-white/10 hover:border-blue-400/50 transition-colors cursor-pointer" onclick="connectMusicService('qobuz')">
                                <div class="text-center">
                                    <div class="text-4xl mb-3">�</div>
                                    <h4 class="font-semibold text-white mb-2">Qobuz</h4>
                                    <div class="flex items-center justify-center gap-2 mb-3">
                                        <span class="w-3 h-3 bg-red-400 rounded-full" id="qobuz-status"></span>
                                        <span class="text-white/80 text-sm" id="qobuz-status-text">Not Connected</span>
                                    </div>
                                    <button class="bg-blue-900 text-white px-4 py-2 rounded-full text-sm hover:bg-blue-800 transition-colors w-full">
                                        Connect
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Playlist Management Interface -->
                <div class="grid lg:grid-cols-3 gap-8 mb-12">
                    <!-- Create New Playlist Card -->
                    <div class="playlist-creation-card bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20 text-center hover:border-purple-400/50 transition-all duration-300 cursor-pointer" onclick="openCreatePlaylistModal()">
                        <div class="text-6xl mb-4">➕</div>
                        <h3 class="text-xl font-bold text-white mb-2">Create New Playlist</h3>
                        <p class="text-white/80 text-sm mb-6">Start building the perfect soundtrack for your Providence adventure</p>
                        <button class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-semibold hover:from-purple-600 hover:to-pink-600 transition-colors">
                            🎵 Create Playlist
                        </button>
                    </div>

                    <!-- Music Search Card -->
                    <div class="music-search-card bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
                        <div class="text-center mb-6">
                            <div class="text-4xl mb-4">🔍</div>
                            <h3 class="text-xl font-bold text-white mb-2">Search Music</h3>
                            <p class="text-white/80 text-sm">Find the perfect songs across all connected services</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="relative">
                                <input type="text" id="music-search-input" placeholder="Search for songs, artists, or albums..." class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/60 focus:border-purple-400 focus:outline-none">
                                <button id="music-search-btn" class="absolute right-2 top-2 bg-purple-500 text-white p-2 rounded-lg hover:bg-purple-600 transition-colors">
                                    🔍
                                </button>
                            </div>
                            
                            <div id="music-search-results" class="hidden">
                                <div class="bg-white/5 rounded-xl p-4 max-h-64 overflow-y-auto">
                                    <h4 class="text-white font-semibold mb-3">Search Results</h4>
                                    <div id="search-results-list" class="space-y-2">
                                        <!-- Search results will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Active Playlist Card -->
                    <div class="active-playlist-card bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
                        <div class="text-center mb-6">
                            <div class="text-4xl mb-4">🎼</div>
                            <h3 class="text-xl font-bold text-white mb-2">Now Playing</h3>
                            <p class="text-white/80 text-sm">Currently editing: <span id="current-playlist-name">Providence Anniversary</span></p>
                        </div>
                        
                        <div class="space-y-3" id="current-playlist-songs">
                            <div class="song-item bg-white/5 rounded-lg p-3 flex items-center justify-between">
                                <div>
                                    <div class="text-white font-medium text-sm">Burning Blue</div>
                                    <div class="text-white/60 text-xs">Mariah the Scientist</div>
                                </div>
                                <div class="flex gap-2">
                                    <button class="text-white/60 hover:text-white text-sm">▶️</button>
                                    <button class="text-white/60 hover:text-white text-sm">❌</button>
                                </div>
                            </div>
                            
                            <div class="song-item bg-white/5 rounded-lg p-3 flex items-center justify-between">
                                <div>
                                    <div class="text-white font-medium text-sm">Little Things</div>
                                    <div class="text-white/60 text-xs">Ella Mai</div>
                                </div>
                                <div class="flex gap-2">
                                    <button class="text-white/60 hover:text-white text-sm">▶️</button>
                                    <button class="text-white/60 hover:text-white text-sm">❌</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4 text-center">
                            <button class="bg-purple-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-600 transition-colors w-full">
                                🔀 Shuffle & Play
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Playlist Templates Section -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-white text-center mb-8">🎯 Curated Playlist Templates</h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Romantic Dinner Template -->
                        <div class="playlist-template bg-gradient-to-br from-red-500/20 to-pink-500/20 rounded-xl p-6 border border-white/20 hover:border-red-400/50 transition-colors cursor-pointer" onclick="createFromTemplate('dinner')">
                            <div class="text-center">
                                <div class="text-4xl mb-3">🍽️</div>
                                <h4 class="text-lg font-bold text-white mb-2">Romantic Dinner</h4>
                                <p class="text-white/80 text-sm mb-4">Smooth jazz, soul, and intimate vocals for your special evening</p>
                                <div class="text-xs text-white/60">
                                    <p>• 12 hand-picked songs</p>
                                    <p>• 45 min duration</p>
                                    <p>• Perfect for Gracie's</p>
                                </div>
                            </div>
                        </div>

                        <!-- Adventure Time Template -->
                        <div class="playlist-template bg-gradient-to-br from-orange-500/20 to-yellow-500/20 rounded-xl p-6 border border-white/20 hover:border-orange-400/50 transition-colors cursor-pointer" onclick="createFromTemplate('adventure')">
                            <div class="text-center">
                                <div class="text-4xl mb-3">🚀</div>
                                <h4 class="text-lg font-bold text-white mb-2">Adventure Time</h4>
                                <p class="text-white/80 text-sm mb-4">Upbeat tracks for exploring Providence together</p>
                                <div class="text-xs text-white/60">
                                    <p>• 15 energetic songs</p>
                                    <p>• 55 min duration</p>
                                    <p>• Walking & sightseeing</p>
                                </div>
                            </div>
                        </div>

                        <!-- Chill & Relax Template -->
                        <div class="playlist-template bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-xl p-6 border border-white/20 hover:border-blue-400/50 transition-colors cursor-pointer" onclick="createFromTemplate('chill')">
                            <div class="text-center">
                                <div class="text-4xl mb-3">🌊</div>
                                <h4 class="text-lg font-bold text-white mb-2">Chill & Relax</h4>
                                <p class="text-white/80 text-sm mb-4">Mellow vibes for quiet moments and sunset walks</p>
                                <div class="text-xs text-white/60">
                                    <p>• 10 soothing songs</p>
                                    <p>• 35 min duration</p>
                                    <p>• Waterfront strolls</p>
                                </div>
                            </div>
                        </div>

                        <!-- Audiophile Experience Template (Qobuz Exclusive) -->
                        <div class="playlist-template bg-gradient-to-br from-blue-800/30 to-indigo-800/30 rounded-xl p-6 border border-blue-400/20 hover:border-blue-400/50 transition-colors cursor-pointer relative" onclick="createFromTemplate('audiophile')">
                            <div class="absolute top-2 right-2 bg-blue-900 text-white text-xs px-2 py-1 rounded-full">
                                🎧 Hi-Res
                            </div>
                            <div class="text-center">
                                <div class="text-4xl mb-3">🎧</div>
                                <h4 class="text-lg font-bold text-white mb-2">Audiophile Experience</h4>
                                <p class="text-white/80 text-sm mb-4">Lossless quality romantic tracks for the perfect sound experience</p>
                                <div class="text-xs text-white/60">
                                    <p>• 10 Hi-Res tracks</p>
                                    <p>• 42 min duration</p>
                                    <p>• 24-bit/96kHz quality</p>
                                    <p class="text-blue-200 mt-1">🎵 Requires Qobuz</p>
                                </div>
                            </div>
                        </div>

                        <!-- Road Trip Template -->
                        <div class="playlist-template bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-xl p-6 border border-white/20 hover:border-green-400/50 transition-colors cursor-pointer" onclick="createFromTemplate('roadtrip')">
                            <div class="text-center">
                                <div class="text-4xl mb-3">🚗</div>
                                <h4 class="text-lg font-bold text-white mb-2">Road Trip Vibes</h4>
                                <p class="text-white/80 text-sm mb-4">Feel-good classics for the journey to and from Providence</p>
                                <div class="text-xs text-white/60">
                                    <p>• 20 classic hits</p>
                                    <p>• 80 min duration</p>
                                    <p>• Car singalongs</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Your Playlists Grid -->
                <div class="mb-12">
                    <div class="flex justify-between items-center mb-8">
                        <h3 class="text-2xl font-bold text-white">📚 Your Playlists</h3>
                        <div class="flex gap-3">
                            <button class="bg-white/10 text-white px-4 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors">
                                🔄 Sync All
                            </button>
                            <button class="bg-purple-500 text-white px-4 py-2 rounded-lg text-sm hover:bg-purple-600 transition-colors" onclick="openCreatePlaylistModal()">
                                ➕ New Playlist
                            </button>
                        </div>
                    </div>

                    <div id="playlists-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Existing Playlists will be populated here -->
                        <div class="playlist-card bg-white/10 backdrop-blur-sm rounded-xl overflow-hidden border border-white/20 hover:border-purple-400/50 transition-all duration-300">
                            <div class="playlist-cover bg-gradient-to-br from-purple-500 to-pink-500 h-48 flex items-center justify-center">
                                <div class="text-6xl">💕</div>
                            </div>
                            <div class="p-4">
                                <h4 class="text-lg font-bold text-white mb-1">Providence Anniversary 2025</h4>
                                <p class="text-white/70 text-sm mb-2">Our romantic weekend soundtrack</p>
                                <div class="flex justify-between items-center text-xs text-white/60 mb-4">
                                    <span>12 songs • 48 min</span>
                                    <span>👫 Collaborative</span>
                                </div>
                                <div class="flex gap-2">
                                    <button class="flex-1 bg-purple-500 text-white py-2 rounded-lg text-sm hover:bg-purple-600 transition-colors">
                                        ▶️ Play
                                    </button>
                                    <button class="bg-white/10 text-white px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors" onclick="sharePlaylist('providence-2025')">
                                        🔗
                                    </button>
                                    <button class="bg-white/10 text-white px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors">
                                        ⋯
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="playlist-card bg-white/10 backdrop-blur-sm rounded-xl overflow-hidden border border-white/20 hover:border-red-400/50 transition-all duration-300">
                            <div class="playlist-cover bg-gradient-to-br from-red-500 to-orange-500 h-48 flex items-center justify-center">
                                <div class="text-6xl">🍽️</div>
                            </div>
                            <div class="p-4">
                                <h4 class="text-lg font-bold text-white mb-1">Dinner at Gracie's</h4>
                                <p class="text-white/70 text-sm mb-2">Smooth jazz for our special evening</p>
                                <div class="flex justify-between items-center text-xs text-white/60 mb-4">
                                    <span>8 songs • 32 min</span>
                                    <span>🎵 Jazz & Soul</span>
                                </div>
                                <div class="flex gap-2">
                                    <button class="flex-1 bg-red-500 text-white py-2 rounded-lg text-sm hover:bg-red-600 transition-colors">
                                        ▶️ Play
                                    </button>
                                    <button class="bg-white/10 text-white px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors" onclick="sharePlaylist('gracies-dinner')">
                                        🔗
                                    </button>
                                    <button class="bg-white/10 text-white px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors">
                                        ⋯
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="playlist-card bg-white/10 backdrop-blur-sm rounded-xl overflow-hidden border border-white/20 hover:border-blue-400/50 transition-all duration-300">
                            <div class="playlist-cover bg-gradient-to-br from-blue-500 to-cyan-500 h-48 flex items-center justify-center">
                                <div class="text-6xl">⛵</div>
                            </div>
                            <div class="p-4">
                                <h4 class="text-lg font-bold text-white mb-1">Waterfront Walks</h4>
                                <p class="text-white/70 text-sm mb-2">Chill vibes for seaside strolls</p>
                                <div class="flex justify-between items-center text-xs text-white/60 mb-4">
                                    <span>15 songs • 58 min</span>
                                    <span>🌊 Chill</span>
                                </div>
                                <div class="flex gap-2">
                                    <button class="flex-1 bg-blue-500 text-white py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors">
                                        ▶️ Play
                                    </button>
                                    <button class="bg-white/10 text-white px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors" onclick="sharePlaylist('waterfront-walks')">
                                        🔗
                                    </button>
                                    <button class="bg-white/10 text-white px-3 py-2 rounded-lg text-sm hover:bg-white/20 transition-colors">
                                        ⋯
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Phase 3: AI-Powered Playlist Generation -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-white text-center mb-8">🤖 AI-Powered Playlist Generation</h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <!-- Activity-Based Playlists -->
                        <div class="ai-feature-card bg-gradient-to-br from-indigo-500/20 to-purple-500/20 rounded-xl p-6 border border-white/20 hover:border-indigo-400/50 transition-colors">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-3">🍽️</div>
                                <h4 class="text-lg font-bold text-white mb-2">Dinner at Gracie's</h4>
                                <p class="text-white/80 text-sm mb-4">AI-curated jazz & soul for your romantic dinner</p>
                            </div>
                            <button onclick="generateActivityPlaylist('gracies')" class="w-full bg-indigo-500 text-white py-2 rounded-lg text-sm hover:bg-indigo-600 transition-colors">
                                🎯 Generate Playlist
                            </button>
                        </div>

                        <div class="ai-feature-card bg-gradient-to-br from-blue-500/20 to-cyan-500/20 rounded-xl p-6 border border-white/20 hover:border-blue-400/50 transition-colors">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-3">⛵</div>
                                <h4 class="text-lg font-bold text-white mb-2">Waterfront Cruise</h4>
                                <p class="text-white/80 text-sm mb-4">Ocean breeze vibes for scenic boat tours</p>
                            </div>
                            <button onclick="generateActivityPlaylist('waterfront')" class="w-full bg-blue-500 text-white py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors">
                                🌊 Generate Playlist
                            </button>
                        </div>

                        <div class="ai-feature-card bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl p-6 border border-white/20 hover:border-purple-400/50 transition-colors">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-3">🏛️</div>
                                <h4 class="text-lg font-bold text-white mb-2">Museum Visit</h4>
                                <p class="text-white/80 text-sm mb-4">Ambient & contemplative for art appreciation</p>
                            </div>
                            <button onclick="generateActivityPlaylist('museum')" class="w-full bg-purple-500 text-white py-2 rounded-lg text-sm hover:bg-purple-600 transition-colors">
                                🎨 Generate Playlist
                            </button>
                        </div>

                        <div class="ai-feature-card bg-gradient-to-br from-green-500/20 to-emerald-500/20 rounded-xl p-6 border border-white/20 hover:border-green-400/50 transition-colors">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-3">✈️</div>
                                <h4 class="text-lg font-bold text-white mb-2">Arrival Journey</h4>
                                <p class="text-white/80 text-sm mb-4">Upbeat travel anthems for your trip</p>
                            </div>
                            <button onclick="generateActivityPlaylist('arrival')" class="w-full bg-green-500 text-white py-2 rounded-lg text-sm hover:bg-green-600 transition-colors">
                                🚗 Generate Playlist
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Mood-Based Playlist Generation -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-white text-center mb-8">💭 Mood-Based Playlists</h3>
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
                        <div class="text-center mb-6">
                            <h4 class="text-xl font-bold text-white mb-2">How are you feeling right now?</h4>
                            <p class="text-white/80">Let AI create the perfect playlist based on your current mood</p>
                        </div>
                        
                        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                            <button onclick="generateMoodPlaylist('romantic')" class="mood-btn bg-gradient-to-br from-red-500/30 to-pink-500/30 border border-red-400/50 text-white py-4 px-6 rounded-xl hover:from-red-500/50 hover:to-pink-500/50 transition-all duration-300">
                                <div class="text-3xl mb-2">💕</div>
                                <div class="font-semibold">Romantic</div>
                                <div class="text-xs text-white/80">Love is in the air</div>
                            </button>
                            
                            <button onclick="generateMoodPlaylist('adventurous')" class="mood-btn bg-gradient-to-br from-orange-500/30 to-yellow-500/30 border border-orange-400/50 text-white py-4 px-6 rounded-xl hover:from-orange-500/50 hover:to-yellow-500/50 transition-all duration-300">
                                <div class="text-3xl mb-2">🚀</div>
                                <div class="font-semibold">Adventurous</div>
                                <div class="text-xs text-white/80">Ready to explore</div>
                            </button>
                            
                            <button onclick="generateMoodPlaylist('chill')" class="mood-btn bg-gradient-to-br from-blue-500/30 to-cyan-500/30 border border-blue-400/50 text-white py-4 px-6 rounded-xl hover:from-blue-500/50 hover:to-cyan-500/50 transition-all duration-300">
                                <div class="text-3xl mb-2">🌿</div>
                                <div class="font-semibold">Chill</div>
                                <div class="text-xs text-white/80">Relax and unwind</div>
                            </button>
                            
                            <button onclick="generateMoodPlaylist('energetic')" class="mood-btn bg-gradient-to-br from-green-500/30 to-emerald-500/30 border border-green-400/50 text-white py-4 px-6 rounded-xl hover:from-green-500/50 hover:to-emerald-500/50 transition-all duration-300">
                                <div class="text-3xl mb-2">⚡</div>
                                <div class="font-semibold">Energetic</div>
                                <div class="text-xs text-white/80">High energy vibes</div>
                            </button>
                        </div>
                        
                        <div id="mood-analysis" class="hidden bg-white/5 rounded-xl p-4 text-center">
                            <div class="text-2xl mb-2">🧠</div>
                            <div class="text-white font-semibold mb-2">Analyzing your mood...</div>
                            <div id="mood-result" class="text-white/80 text-sm"></div>
                        </div>
                    </div>
                </div>

                <!-- Local Providence Music Integration -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-white text-center mb-8">🏛️ Local Providence Music</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="local-music-card bg-gradient-to-br from-emerald-500/20 to-teal-500/20 rounded-xl p-6 border border-white/20 hover:border-emerald-400/50 transition-colors">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-3">🎸</div>
                                <h4 class="text-lg font-bold text-white mb-2">Local Artists</h4>
                                <p class="text-white/80 text-sm mb-4">Discover amazing musicians from Providence</p>
                            </div>
                            <button onclick="exploreLocalArtists()" class="w-full bg-emerald-500 text-white py-2 rounded-lg text-sm hover:bg-emerald-600 transition-colors">
                                🎵 Explore Local Artists
                            </button>
                        </div>

                        <div class="local-music-card bg-gradient-to-br from-teal-500/20 to-cyan-500/20 rounded-xl p-6 border border-white/20 hover:border-teal-400/50 transition-colors">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-3">🎪</div>
                                <h4 class="text-lg font-bold text-white mb-2">Venue Playlists</h4>
                                <p class="text-white/80 text-sm mb-4">Music inspired by Providence's iconic venues</p>
                            </div>
                            <button onclick="generateVenuePlaylist()" class="w-full bg-teal-500 text-white py-2 rounded-lg text-sm hover:bg-teal-600 transition-colors">
                                🏛️ Generate Venue Mix
                            </button>
                        </div>

                        <div class="local-music-card bg-gradient-to-br from-cyan-500/20 to-blue-500/20 rounded-xl p-6 border border-white/20 hover:border-cyan-400/50 transition-colors">
                            <div class="text-center mb-4">
                                <div class="text-4xl mb-3">📻</div>
                                <h4 class="text-lg font-bold text-white mb-2">Radio Hits</h4>
                                <p class="text-white/80 text-sm mb-4">Current popular songs from local radio</p>
                            </div>
                            <button onclick="getLocalRadioHits()" class="w-full bg-cyan-500 text-white py-2 rounded-lg text-sm hover:bg-cyan-600 transition-colors">
                                📻 Get Radio Hits
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Advanced Sharing & Export -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-white text-center mb-8">📤 Advanced Sharing & Export</h3>
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
                        <div class="grid md:grid-cols-2 gap-8">
                            <!-- Social Media Sharing -->
                            <div>
                                <h4 class="text-lg font-bold text-white mb-4">📱 Share on Social Media</h4>
                                <div class="space-y-3">
                                    <button onclick="shareToSocial('twitter')" class="w-full bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center gap-2">
                                        <span class="text-xl">🐦</span>
                                        Share on Twitter
                                    </button>
                                    <button onclick="shareToSocial('facebook')" class="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2">
                                        <span class="text-xl">📘</span>
                                        Share on Facebook
                                    </button>
                                    <button onclick="shareToSocial('instagram')" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 px-4 rounded-lg hover:from-purple-600 hover:to-pink-600 transition-colors flex items-center justify-center gap-2">
                                        <span class="text-xl">📸</span>
                                        Share on Instagram
                                    </button>
                                </div>
                            </div>

                            <!-- Playlist Export -->
                            <div>
                                <h4 class="text-lg font-bold text-white mb-4">💾 Export Playlists</h4>
                                <div class="space-y-3">
                                    <button onclick="exportPlaylist('spotify')" class="w-full bg-green-500 text-white py-3 px-4 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2">
                                        <span class="text-xl">🎵</span>
                                        Export to Spotify
                                    </button>
                                    <button onclick="exportPlaylist('youtube')" class="w-full bg-red-500 text-white py-3 px-4 rounded-lg hover:bg-red-600 transition-colors flex items-center justify-center gap-2">
                                        <span class="text-xl">📺</span>
                                        Export to YouTube Music
                                    </button>
                                    <button onclick="exportPlaylist('apple')" class="w-full bg-gray-600 text-white py-3 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center gap-2">
                                        <span class="text-xl">🍎</span>
                                        Export to Apple Music
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Real-Time Collaboration Simulation -->
                <div class="mb-12">
                    <h3 class="text-2xl font-bold text-white text-center mb-8">🔄 Real-Time Collaboration</h3>
                    <div class="bg-white/10 backdrop-blur-sm rounded-2xl p-8 border border-white/20">
                        <div class="grid md:grid-cols-2 gap-8">
                            <!-- Collaboration Controls -->
                            <div>
                                <h4 class="text-lg font-bold text-white mb-4">👫 Collaboration Features</h4>
                                <div class="space-y-4">
                                    <button onclick="simulateCollaboration()" class="w-full bg-purple-500 text-white py-3 px-4 rounded-lg hover:bg-purple-600 transition-colors">
                                        🎭 Start Collaboration Demo
                                    </button>
                                    <div class="bg-white/5 rounded-lg p-4">
                                        <div class="flex items-center gap-3 mb-3">
                                            <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                                            <span class="text-white text-sm font-semibold">Partner Status: Online</span>
                                        </div>
                                        <div class="text-white/80 text-sm">
                                            <p>• Real-time song additions</p>
                                            <p>• Live playlist synchronization</p>
                                            <p>• Instant notifications</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Live Activity Feed -->
                            <div>
                                <h4 class="text-lg font-bold text-white mb-4">📢 Live Activity Feed</h4>
                                <div class="bg-white/5 rounded-lg p-4 h-48 overflow-y-auto" id="collaboration-feed">
                                    <div class="text-center text-white/60 text-sm">
                                        Collaboration activity will appear here...
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Collaboration Features -->
                <div class="bg-gradient-to-r from-purple-500/20 to-pink-500/20 rounded-2xl p-8 border border-white/20">
                    <h3 class="text-2xl font-bold text-white text-center mb-6">👫 Collaborative Music Magic</h3>
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-4xl mb-3">🔄</div>
                            <h4 class="text-lg font-semibold text-white mb-2">Real-Time Sync</h4>
                            <p class="text-white/80 text-sm">Both partners can add songs simultaneously. Changes appear instantly for a truly collaborative experience.</p>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl mb-3">🎯</div>
                            <h4 class="text-lg font-semibold text-white mb-2">Smart Suggestions</h4>
                            <p class="text-white/80 text-sm">AI-powered recommendations based on both your music tastes and Providence activities.</p>
                        </div>
                        <div class="text-center">
                            <div class="text-4xl mb-3">💌</div>
                            <h4 class="text-lg font-semibold text-white mb-2">Song Stories</h4>
                            <p class="text-white/80 text-sm">Add romantic memories and stories to each song, creating a musical diary of your love.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="plan" class="py-16 md:py-24 bg-gradient-to-br from-amber-50 via-orange-50 to-pink-50 relative overflow-hidden">
            <!-- Animated background elements -->
            <div class="absolute inset-0 opacity-10">
                <div class="absolute top-10 left-10 text-6xl animate-pulse">✈️</div>
                <div class="absolute top-20 right-20 text-4xl animate-bounce delay-300">🗺️</div>
                <div class="absolute bottom-20 left-1/4 text-5xl animate-pulse delay-700">🧳</div>
                <div class="absolute bottom-10 right-1/3 text-3xl animate-bounce delay-1000">📱</div>
            </div>
            
            <div class="container mx-auto px-6 max-w-6xl relative">
                <div class="text-center mb-16">
                    <h2 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-[#C07F63] to-[#A9684C] bg-clip-text text-transparent font-display">
                        ✨ Plan Your Perfect Trip ✨
                    </h2>
                    <p class="text-xl text-[#433A3F]/80 max-w-3xl mx-auto leading-relaxed">
                        Ready to make your Providence anniversary absolutely magical? We've created the ultimate planning toolkit to ensure every moment is perfect. From insider secrets to romantic surprises - we've got you covered! 💕
                    </p>
                </div>

                <!-- Interactive Planning Cards Grid -->
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
                    <!-- Reservations Card -->
                    <div class="planning-card bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-[#C07F63]/20 group">
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-red-400 to-pink-500 rounded-full mx-auto flex items-center justify-center text-4xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300">
                                🍽️
                            </div>
                            <h3 class="text-2xl font-bold text-[#433A3F] mt-4 mb-2 font-display">Essential Reservations</h3>
                            <p class="text-[#433A3F]/70 text-lg">Lock in your romantic dining experiences</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-3 p-3 bg-gradient-to-r from-red-50 to-pink-50 rounded-xl">
                                <span class="text-2xl">⭐</span>
                                <div>
                                    <h4 class="font-semibold text-[#433A3F]">Gracie's (Must-Do!)</h4>
                                    <p class="text-sm text-[#433A3F]/70">Providence's most romantic restaurant</p>
                                    <a href="tel:401-272-7811" class="text-[#C07F63] hover:text-[#A9684C] font-medium text-sm">📞 401-272-7811</a>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-3 p-3 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl">
                                <span class="text-2xl">🦞</span>
                                <div>
                                    <h4 class="font-semibold text-[#433A3F]">Hemenway's</h4>
                                    <p class="text-sm text-[#433A3F]/70">Upscale seafood & ocean views</p>
                                    <a href="tel:401-351-8570" class="text-[#C07F63] hover:text-[#A9684C] font-medium text-sm">📞 401-351-8570</a>
                                </div>
                            </div>
                            
                            <div class="text-center mt-6">
                                <div class="inline-flex items-center bg-yellow-100 px-4 py-2 rounded-full text-sm font-medium text-yellow-800">
                                    💡 Book 1-2 weeks ahead!
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Transportation Card -->
                    <div class="planning-card bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-[#C07F63]/20 group">
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full mx-auto flex items-center justify-center text-4xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300">
                                🚗
                            </div>
                            <h3 class="text-2xl font-bold text-[#433A3F] mt-4 mb-2 font-display">Getting Around</h3>
                            <p class="text-[#433A3F]/70 text-lg">Navigate Providence like locals</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🚶‍♀️</span>
                                    <div>
                                        <h4 class="font-semibold text-[#433A3F]">Downtown Walking</h4>
                                        <p class="text-sm text-[#433A3F]/70">Most romantic spots are walkable</p>
                                    </div>
                                </div>
                                <span class="text-green-600 font-bold">FREE</span>
                            </div>
                            
                            <div class="flex items-center justify-between p-3 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">🚗</span>
                                    <div>
                                        <h4 class="font-semibold text-[#433A3F]">Uber/Lyft</h4>
                                        <p class="text-sm text-[#433A3F]/70">Convenient & private</p>
                                    </div>
                                </div>
                                <span class="text-purple-600 font-bold">$8-15</span>
                            </div>

                            <div class="text-center mt-4">
                                <button onclick="showTransportTips()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300">
                                    🗺️ Get Transport Tips
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Events & Experiences Card -->
                    <div class="planning-card bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-[#C07F63]/20 group">
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-orange-400 to-red-500 rounded-full mx-auto flex items-center justify-center text-4xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300">
                                🎭
                            </div>
                            <h3 class="text-2xl font-bold text-[#433A3F] mt-4 mb-2 font-display">Special Events</h3>
                            <p class="text-[#433A3F]/70 text-lg">Don't miss these magical experiences</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="p-3 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="text-2xl">🔥</span>
                                    <h4 class="font-semibold text-[#433A3F]">WaterFire</h4>
                                </div>
                                <p class="text-sm text-[#433A3F]/70 mb-2">Magical bonfire art installation on the river</p>
                                <a href="https://waterfire.org" target="_blank" class="text-[#C07F63] hover:text-[#A9684C] font-medium text-sm">🌐 Check Schedule</a>
                            </div>
                            
                            <div class="p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl">
                                <div class="flex items-center space-x-3 mb-2">
                                    <span class="text-2xl">⛵</span>
                                    <h4 class="font-semibold text-[#433A3F]">Wine & Brine Cruise</h4>
                                </div>
                                <p class="text-sm text-[#433A3F]/70 mb-2">2-hour romantic boat tour with wine & oysters</p>
                                <a href="https://providenceriverboat.com" target="_blank" class="text-[#C07F63] hover:text-[#A9684C] font-medium text-sm">🌐 Book Now</a>
                            </div>
                        </div>
                    </div>

                    <!-- Weather & Packing Card -->
                    <div class="planning-card bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-[#C07F63]/20 group">
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full mx-auto flex items-center justify-center text-4xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300">
                                🧳
                            </div>
                            <h3 class="text-2xl font-bold text-[#433A3F] mt-4 mb-2 font-display">What to Pack</h3>
                            <p class="text-[#433A3F]/70 text-lg">Be prepared for every romantic moment</p>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3 p-2 bg-gradient-to-r from-gray-50 to-slate-50 rounded-lg">
                                <span class="text-xl">👟</span>
                                <span class="text-sm font-medium text-[#433A3F]">Comfortable walking shoes</span>
                            </div>
                            <div class="flex items-center space-x-3 p-2 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg">
                                <span class="text-xl">👗</span>
                                <span class="text-sm font-medium text-[#433A3F]">Dressy outfit for fine dining</span>
                            </div>
                            <div class="flex items-center space-x-3 p-2 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg">
                                <span class="text-xl">🧥</span>
                                <span class="text-sm font-medium text-[#433A3F]">Light jacket for evenings</span>
                            </div>
                            <div class="flex items-center space-x-3 p-2 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg">
                                <span class="text-xl">📱</span>
                                <span class="text-sm font-medium text-[#433A3F]">Phone charger & camera</span>
                            </div>
                        </div>
                    </div>

                    <!-- Budget Tracker Card -->
                    <div class="planning-card bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-[#C07F63]/20 group">
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full mx-auto flex items-center justify-center text-4xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300">
                                💰
                            </div>
                            <h3 class="text-2xl font-bold text-[#433A3F] mt-4 mb-2 font-display">Budget Planner</h3>
                            <p class="text-[#433A3F]/70 text-lg">Smart spending for maximum romance</p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl">
                                <h4 class="font-semibold text-[#433A3F] mb-2">💡 Money-Saving Tips</h4>
                                <ul class="space-y-1 text-sm text-[#433A3F]/70">
                                    <li>• Free RISD Museum on Sundays</li>
                                    <li>• Happy hour specials 4-6pm</li>
                                    <li>• Walk downtown to save on rides</li>
                                    <li>• Picnic in Roger Williams Park</li>
                                </ul>
                            </div>
                            
                            <div class="text-center">
                                <button onclick="scrollToCalculator()" class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300">
                                    🧮 Use Budget Calculator
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Emergency & Contacts Card -->
                    <div class="planning-card bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-xl hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 border border-[#C07F63]/20 group">
                        <div class="text-center mb-6">
                            <div class="w-20 h-20 bg-gradient-to-br from-red-400 to-pink-500 rounded-full mx-auto flex items-center justify-center text-4xl text-white shadow-lg group-hover:scale-110 transition-transform duration-300">
                                📞
                            </div>
                            <h3 class="text-2xl font-bold text-[#433A3F] mt-4 mb-2 font-display">Important Contacts</h3>
                            <p class="text-[#433A3F]/70 text-lg">Just in case you need them</p>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="p-3 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl">
                                <h4 class="font-semibold text-[#433A3F] mb-1">🏨 Neptune Hotel</h4>
                                <a href="tel:401-272-4040" class="text-[#C07F63] hover:text-[#A9684C] font-medium">401-272-4040</a>
                            </div>
                            <div class="p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-xl">
                                <h4 class="font-semibold text-[#433A3F] mb-1">🚕 Uber/Lyft</h4>
                                <p class="text-sm text-[#433A3F]/70">Available via app 24/7</p>
                            </div>
                            <div class="p-3 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl">
                                <h4 class="font-semibold text-[#433A3F] mb-1">🚨 Emergency</h4>
                                <a href="tel:911" class="text-red-600 hover:text-red-700 font-bold">911</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Romance Tips Section -->
                <div class="bg-gradient-to-r from-pink-100 via-purple-50 to-indigo-100 rounded-3xl p-8 md:p-12 mb-12 shadow-xl border border-[#C07F63]/20">
                    <div class="text-center mb-8">
                        <h3 class="text-3xl font-bold text-[#433A3F] mb-4 font-display">💕 Romantic Providence Secrets 💕</h3>
                        <p class="text-lg text-[#433A3F]/80">Insider tips to make your anniversary extra special</p>
                    </div>
                    
                    <div class="grid md:grid-cols-3 gap-6">
                        <div class="text-center p-6 bg-white/60 rounded-2xl backdrop-blur-sm">
                            <div class="text-4xl mb-3">🌅</div>
                            <h4 class="font-bold text-[#433A3F] mb-2">Best Photo Spots</h4>
                            <p class="text-sm text-[#433A3F]/70">Prospect Terrace for sunset views, Federal Hill for cute street shots, and the WaterFire bridges for magical night photos</p>
                        </div>
                        <div class="text-center p-6 bg-white/60 rounded-2xl backdrop-blur-sm">
                            <div class="text-4xl mb-3">🎵</div>
                            <h4 class="font-bold text-[#433A3F] mb-2">Hidden Gems</h4>
                            <p class="text-sm text-[#433A3F]/70">The Boombox karaoke at your hotel, secret rooftop bars, and the intimate corners of RISD Museum for quiet moments</p>
                        </div>
                        <div class="text-center p-6 bg-white/60 rounded-2xl backdrop-blur-sm">
                            <div class="text-4xl mb-3">🌙</div>
                            <h4 class="font-bold text-[#433A3F] mb-2">Perfect Timing</h4>
                            <p class="text-sm text-[#433A3F]/70">Dinner at 7pm for sunset views, boat tours at 6pm for golden hour, and late-night strolls when the city sparkles</p>
                        </div>
                    </div>
                </div>

                <!-- Call to Action -->
                <div class="text-center">
                    <div class="inline-flex items-center bg-gradient-to-r from-[#C07F63] to-[#A9684C] text-white px-8 py-4 rounded-full text-lg font-bold shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-105">
                        <span class="mr-3">🎉</span>
                        Ready to create magical memories?
                        <span class="ml-3">✨</span>
                    </div>
                    <p class="mt-4 text-[#433A3F]/70 text-lg">Your Providence anniversary adventure awaits!</p>
                </div>
            </div>
        </section>

        <!-- Our Chat History Section -->
        <section id="our-story" class="py-16 md:py-24 bg-gradient-to-br from-pink-50 to-orange-50">
            <div class="container mx-auto px-6 max-w-4xl">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold text-[#433A3F] mb-4 font-display">Our Love Story</h2>
                    <p class="text-lg text-[#433A3F] opacity-80">Where it all began... our Facebook Dating conversations from May 2025</p>
                </div>

                <div class="chat-container bg-white/95 backdrop-blur-lg rounded-3xl p-8 shadow-2xl max-h-96 overflow-y-auto">
                    <!-- Real Facebook Dating conversation -->
                    <div class="date-header text-center py-4 text-gray-500 text-sm font-medium relative">
                        <span class="bg-white px-4">May 15, 2025</span>
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                You are incredible.
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">11:04 PM</div>
                        </div>
                    </div>

                    <div class="date-header text-center py-4 text-gray-500 text-sm font-medium relative">
                        <span class="bg-white px-4">May 22, 2025</span>
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Thank you Tim 😊
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">10:48 AM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                You're very hand
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">10:48 AM</div>
                        </div>
                    </div>

                    <div class="date-header text-center py-4 text-gray-500 text-sm font-medium relative">
                        <span class="bg-white px-4">May 24, 2025</span>
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Thank you. I assume you mean handsome 😄 how are you?
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">9:16 AM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Omg you're already finishing my sentences
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">8:40 PM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Lol I'm doing good how are you?
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">8:40 PM</div>
                        </div>
                    </div>

                    <div class="date-header text-center py-4 text-gray-500 text-sm font-medium relative">
                        <span class="bg-white px-4">May 25, 2025</span>
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Lol that's so cute. But I'm well I'm waiting for my fajitas rn
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">5:25 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                You live and work in Boston?
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">6:15 PM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Nice
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">6:15 PM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Yea I'm in Boston now but I visit West Hartford pretty frequently my family lives there
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">6:15 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Your immediate family?
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">6:43 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                I'm looking into moving back to New Haven soon but rn I'm in new Milford
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">6:43 PM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Nice and yes my mother and brothers are there. I grew up there
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">7:07 AM (next day)</div>
                        </div>
                    </div>

                    <div class="date-header text-center py-4 text-gray-500 text-sm font-medium relative">
                        <span class="bg-white px-4">May 26, 2025</span>
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Ooo I'm curious I went to Avon old farms in 2014... hall or conard?
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">10:02 AM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Ahh an Avon old farms boy
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">10:19 AM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                I went to hall lol
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">10:19 AM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Haha I was just a one year lax bro 😄
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">10:43 AM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Lol I could see you being a lax bro
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">11:47 AM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                I think I skipped that phase haha
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">11:47 AM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Haha well at 1 pm my kinda Alma mater (played at Maryland for a year) is playing in the national championship
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">12:00 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Definitely a skippable phase
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">12:00 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Very cool. Still play?
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">7:35 PM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                lol I coach but I do not play... I do not need to be an adult with an acl tear lol
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">7:59 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Fair enough lol
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">7:59 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                You seem very athletic
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">7:59 PM</div>
                        </div>
                    </div>

                    <div class="message received flex justify-start mb-4">
                        <div class="max-w-xs lg:max-w-md">
                            <div class="message-bubble bg-gray-100 rounded-2xl px-4 py-3 text-[#433A3F]">
                                Ehh like fake athletic lol you obviously were more active as a teenager but I try to keep up
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2">7:59 PM</div>
                        </div>
                    </div>

                    <div class="message sent flex justify-end mb-4">
                        <div class="max-w-xs lg:max-w-md"></div>
                            <div class="message-bubble bg-[#C07F63] text-white rounded-2xl px-4 py-3">
                                Lol well I think you're doing pretty good job faking it 💕
                            </div>
                            <div class="message-time text-xs text-gray-500 mt-1 px-2 text-right">8:00 PM</div>
                        </div>
                    </div>

                    <!-- Continue with more messages... -->
                    <div class="text-center py-4">
                        <a href="our-chat-history.html" class="text-[#C07F63] hover:text-[#A9684C] font-medium transition-colors">
                            View Complete Conversation (50 messages) →
                        </a>
                    </div>
                </div>

                <!-- Chat Statistics -->
                <div class="mt-8 bg-white/80 backdrop-blur-sm rounded-2xl p-6 text-center">
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <div class="text-2xl font-bold text-[#C07F63]">50</div>
                            <div class="text-sm text-[#433A3F] opacity-80">Messages</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-[#C07F63]">18</div>
                            <div class="text-sm text-[#433A3F] opacity-80">Days</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-[#C07F63]">12</div>
                            <div class="text-sm text-[#433A3F] opacity-80">Hearts</div>
                        </div>
                    </div>
                    <p class="mt-4 text-[#433A3F] opacity-70 italic text-sm">
                        "From that first 'You are incredible' to forever..."
                    </p>
                </div>
            </div>
        </section>

    </main>

    <!-- Real-Time Weather Integration -->
    <section id="weather" class="bg-gradient-to-br from-blue-50 via-white to-orange-50 py-16">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-[#433A3F] mb-4 font-display">
                    🌤️ Providence Weather for Your Trip
                </h2>
                <p class="text-[#433A3F]/70 text-lg max-w-2xl mx-auto">
                    Real-time weather forecast to help you plan the perfect romantic getaway. Updated every hour for July 11-14, 2025.
                </p>
            </div>

            <!-- Current Weather Display -->
            <div class="mb-8">
                <div id="current-weather" class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg text-center max-w-md mx-auto">
                    <div class="animate-pulse">
                        <div class="text-lg font-semibold text-[#433A3F] mb-2">Loading current weather...</div>
                        <div class="text-6xl mb-4">⏳</div>
                        <div class="text-sm text-[#433A3F]/70">Please wait a moment</div>
                    </div>
                </div>
            </div>

            <!-- 4-Day Forecast -->
            <div class="mb-8">
                <h3 class="text-2xl font-bold text-[#433A3F] text-center mb-6 font-display">
                    Your Anniversary Weekend Forecast
                </h3>
                <div id="weather-forecast" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Weather cards will be populated by JavaScript -->
                    <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-lg animate-pulse">
                        <div class="text-lg font-semibold text-[#433A3F] mb-2">Loading...</div>
                        <div class="text-3xl mb-2">⏳</div>
                        <div class="text-sm text-[#433A3F]/70">Fetching weather data</div>
                    </div>
                    <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-lg animate-pulse">
                        <div class="text-lg font-semibold text-[#433A3F] mb-2">Loading...</div>
                        <div class="text-3xl mb-2">⏳</div>
                        <div class="text-sm text-[#433A3F]/70">Fetching weather data</div>
                    </div>
                    <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-lg animate-pulse">
                        <div class="text-lg font-semibold text-[#433A3F] mb-2">Loading...</div>
                        <div class="text-3xl mb-2">⏳</div>
                        <div class="text-sm text-[#433A3F]/70">Fetching weather data</div>
                    </div>
                    <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-lg animate-pulse">
                        <div class="text-lg font-semibold text-[#433A3F] mb-2">Loading...</div>
                        <div class="text-3xl mb-2">⏳</div>
                        <div class="text-sm text-[#433A3F]/70">Fetching weather data</div>
                    </div>
                </div>
            </div>

            <!-- Weather-Based Recommendations -->
            <div class="bg-white/80 backdrop-blur-sm rounded-2xl p-8 shadow-lg">
                <h3 class="text-2xl font-bold text-[#433A3F] text-center mb-6 font-display">
                    💡 Weather-Smart Planning Tips
                </h3>
                <div id="weather-tips" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="tip-card bg-gradient-to-br from-yellow-50 to-orange-50 p-6 rounded-xl border border-yellow-200/50">
                        <h4 class="font-bold text-[#433A3F] mb-3 flex items-center">
                            ☀️ Sunny Days
                        </h4>
                        <ul class="text-[#433A3F]/80 text-sm space-y-2">
                            <li>• Perfect for waterfront walks and Roger Williams Park</li>
                            <li>• Book outdoor dining patios at restaurants</li>
                            <li>• Don't forget sunscreen for boat tours</li>
                            <li>• Evening WaterFire events are magical</li>
                        </ul>
                    </div>
                    <div class="tip-card bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200/50">
                        <h4 class="font-bold text-[#433A3F] mb-3 flex items-center">
                            🌧️ Rainy Weather
                        </h4>
                        <ul class="text-[#433A3F]/80 text-sm space-y-2">
                            <li>• Perfect excuse for cozy indoor dining</li>
                            <li>• Visit RISD Museum or Providence Athenaeum</li>
                            <li>• Federal Hill covered markets and shops</li>
                            <li>• Romantic umbrella walks through downtown</li>
                        </ul>
                    </div>
                </div>
                
                <!-- Packing Suggestions Based on Weather -->
                <div class="mt-6 p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-200/50">
                    <h4 class="font-bold text-[#433A3F] mb-3">👜 Smart Packing for Your Forecast</h4>
                    <div id="packing-suggestions" class="text-[#433A3F]/80 text-sm">
                        <p>Packing suggestions will update based on your weather forecast...</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Full Screen Image Modal -->
    <div id="imageModal" class="modal">
        <span class="modal-close" onclick="closeModal()">&times;</span>
        <img id="modalImage" class="modal-content" alt="Full size image">
    </div>
    
    <!-- Itinerary Item Modal -->
    <div id="itinerary-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 id="modal-title" class="text-xl font-bold text-[#433A3F]">Add Activity</h3>
                        <button id="close-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                    </div>
                    <form id="itinerary-form">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Time</label>
                                <input type="text" id="activity-time" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="e.g., Morning, 2:00 PM" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Icon</label>
                                <div class="flex flex-wrap gap-2 mb-2">
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="🍽️">🍽️</button>
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="☕">☕</button>
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="🎨">🎨</button>
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="⛵">⛵</button>
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="🎤">🎤</button>
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="🌙">🌙</button>
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="🧳">🧳</button>
                                    <button type="button" class="icon-btn px-2 py-1 border rounded" data-icon="🛍️">🛍️</button>
                                </div>
                                <input type="text" id="activity-icon" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="Or enter custom emoji" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Title</label>
                                <input type="text" id="activity-title" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="Activity name" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Description</label>
                                <textarea id="activity-desc" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="Describe this activity..." required></textarea>
                            </div>
                        </div>
                        <div class="flex justify-end gap-2 mt-6">
                            <button type="button" id="cancel-modal" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-[#C07F63] text-white rounded-lg hover:bg-[#A9684C]">Save Activity</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Song Modal -->
    <div id="add-song-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-lg w-full">
                <div class="p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-bold text-[#433A3F]">Add a Memory Song</h3>
                        <button id="close-song-modal" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                    </div>
                    <form id="add-song-form">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Song Title</label>
                                <input type="text" id="song-title" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="Enter the song title" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Artist</label>
                                <input type="text" id="song-artist" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="Artist name" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">When This Became Special</label>
                                <input type="text" id="song-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="e.g., December 2024, Our first date" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Your Memory</label>
                                <textarea id="song-memory" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="Tell the story of why this song is special to your relationship..." required></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Music Platform (Optional)</label>
                                <select id="song-platform" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent">
                                    <option value="">Select platform</option>
                                    <option value="spotify">Spotify</option>
                                    <option value="youtube">YouTube Music</option>
                                    <option value="soundcloud">SoundCloud</option>
                                    <option value="apple">Apple Music</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-[#433A3F] mb-1">Link to Song (Optional)</label>
                                <input type="url" id="song-url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#C07F63] focus:border-transparent" placeholder="https://...">
                            </div>
                        </div>
                        <div class="flex justify-end gap-2 mt-6">
                            <button type="button" id="cancel-song-modal" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50">Cancel</button>
                            <button type="submit" class="px-4 py-2 bg-[#C07F63] text-white rounded-lg hover:bg-[#A9684C]">Add Memory Song</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-[#433A3F] text-[#FDF8F0] py-8 text-center">
        <p>Crafted with love for a memorable anniversary in Providence.</p>
    </footer>

<script>
// Interactive Providence Map using Leaflet (OpenStreetMap)
let leafletMap;
let leafletMarkers = [];
let leafletMarkerLayer;

const providenceLocations = [
    // Primary Restaurants from Main Site
    { name: "Gracie's Restaurant", lat: 41.8264, lng: -71.4106, type: "restaurant", category: "restaurants romantic", description: "Most romantic restaurant in Providence", price: "$59.99 Menu", rating: "★★★★★", address: "194 Washington St" },
    { name: "The Dorrance", lat: 41.8240, lng: -71.4128, type: "restaurant", category: "restaurants", description: "Historic bank turned elegant restaurant", price: "$$$$", rating: "★★★★☆", address: "60 Dorrance St" },
    { name: "Hemenway's Restaurant", lat: 41.8236, lng: -71.4128, type: "restaurant", category: "restaurants", description: "Fresh seafood with harbor views", price: "$$$", rating: "★★★☆☆", address: "121 South Main St" },
    { name: "CAV Providence", lat: 41.8134, lng: -71.4079, type: "restaurant", category: "restaurants", description: "Contemporary cuisine in Jewelry District", price: "$$$", rating: "★★★★☆", address: "14 Imperial Pl" },
    { name: "Massimo Restaurant", lat: 41.8162, lng: -71.4225, type: "restaurant", category: "restaurants italian", description: "Authentic Italian Federal Hill", price: "$$", rating: "★★★★☆", address: "134 Atwells Ave" },
    
    // Restaurant Week Premium Restaurants ($55+)
    { name: "Mill's Tavern", lat: 41.8162, lng: -71.4225, type: "restaurant", category: "restaurants romantic", description: "Contemporary American cuisine", price: "$55 Menu", rating: "★★★★☆", address: "Federal Hill" },
    { name: "Capital Grille", lat: 41.8240, lng: -71.4128, type: "restaurant", category: "restaurants steakhouse", description: "Upscale steakhouse", price: "~$60", rating: "★★★★☆", address: "Downtown" },
    { name: "Capriccio", lat: 41.8230, lng: -71.4120, type: "restaurant", category: "restaurants italian", description: "Italian & Mediterranean", price: "$51.95", rating: "★★★☆☆", address: "Providence" },
    { name: "Fogo de Chao", lat: 41.8240, lng: -71.4130, type: "restaurant", category: "restaurants steakhouse", description: "Brazilian steakhouse experience", price: "$59", rating: "★★★☆☆", address: "Downtown" },
    { name: "Fleming's Prime Steakhouse", lat: 41.8240, lng: -71.4125, type: "restaurant", category: "restaurants steakhouse", description: "Premium steakhouse", price: "~$60", rating: "★★★★☆", address: "Providence" },
    
    // Restaurant Week Moderate Restaurants ($30-55)
    { name: "Legal Sea Foods", lat: 41.8190, lng: -71.4300, type: "restaurant", category: "restaurants seafood", description: "Fresh seafood chain", price: "$30-45", rating: "★★★☆☆", address: "Cranston" },
    { name: "Il Massimo", lat: 41.8170, lng: -71.4230, type: "restaurant", category: "restaurants italian", description: "New Age Classic Neapolitan", price: "$37-48", rating: "★★★★☆", address: "Providence" },
    { name: "Mare Rooftop", lat: 41.8245, lng: -71.4130, type: "restaurant", category: "restaurants seafood", description: "Rooftop seafood dining", price: "$$$", rating: "★★★★☆", address: "Downtown" },
    { name: "Waterman Grille", lat: 41.8280, lng: -71.4020, type: "restaurant", category: "restaurants american", description: "American cuisine", price: "$$$", rating: "★★★☆☆", address: "East Side" },
    
    // Italian Restaurants from Restaurant Week
    { name: "Angelo's Civita Farnese", lat: 41.8162, lng: -71.4225, type: "restaurant", category: "restaurants italian", description: "Southern Italian comfort - Federal Hill classic", price: "$$", rating: "★★★☆☆", address: "311 Atwells Ave" },
    { name: "Bacaro Restaurant", lat: 41.8220, lng: -71.4090, type: "restaurant", category: "restaurants italian", description: "Traditional Italian", price: "$$$", rating: "★★★★☆", address: "262 S Water St" },
    { name: "Cassarino's Ristorante", lat: 41.8162, lng: -71.4220, type: "restaurant", category: "restaurants italian", description: "Traditional Italian comfort food", price: "$$", rating: "★★★☆☆", address: "177 Atwells Ave" },
    { name: "Pane e Vino", lat: 41.8162, lng: -71.4215, type: "restaurant", category: "restaurants italian", description: "Neapolitan cuisine with wood-fired oven", price: "$$", rating: "★★★★☆", address: "365 Atwells Ave" },
    { name: "Trattoria Appia", lat: 41.8170, lng: -71.4200, type: "restaurant", category: "restaurants italian", description: "Southern Italian with special dessert deal", price: "$$", rating: "★★★☆☆", address: "Federal Hill" },
    
    // American & Contemporary Restaurants
    { name: "Cafe Nuovo", lat: 41.8240, lng: -71.4100, type: "restaurant", category: "restaurants american", description: "New American with waterfront views", price: "$$$", rating: "★★★★☆", address: "1 Citizens Plaza" },
    { name: "New Rivers", lat: 41.8260, lng: -71.4050, type: "restaurant", category: "restaurants american romantic", description: "Seasonal & local New American - farm-to-table pioneer", price: "$$$", rating: "★★★★★", address: "7 Steeple St" },
    { name: "Oberlin", lat: 41.8290, lng: -71.4010, type: "restaurant", category: "restaurants american", description: "Contemporary with natural wine focus", price: "$$$", rating: "★★★★☆", address: "Wayland Square" },
    { name: "Parkside Rotisserie", lat: 41.8235, lng: -71.4125, type: "restaurant", category: "restaurants american", description: "American bistro with French technique", price: "$$$", rating: "★★★★☆", address: "76 S Main St" },
    
    // Global & Specialty Restaurants
    { name: "CHOP (Culinary Hub)", lat: 41.8280, lng: -71.4000, type: "restaurant", category: "restaurants", description: "Food hall with multiple cuisine stations", price: "$$", rating: "★★★★☆", address: "267 Thayer St" },
    { name: "Jacky's Waterplace", lat: 41.8245, lng: -71.4105, type: "restaurant", category: "restaurants", description: "Contemporary Asian with waterfront views", price: "$$$", rating: "★★★★☆", address: "200 Exchange St" },
    
    // Track 15 Food Hall
    { name: "Track 15 Food Hall", lat: 41.8290, lng: -71.4140, type: "restaurant", category: "restaurants", description: "Modern food hall with multiple vendors", price: "$", rating: "★★★★☆", address: "15 Station St" },
    
    // Attractions
    { name: "Providence Riverwalk", lat: 41.8270, lng: -71.4101, type: "attraction", category: "attractions waterfront romantic", description: "Romantic waterfront walkway", price: "FREE", rating: "★★★★★", address: "Downtown Waterfront" },
    { name: "Federal Hill (Little Italy)", lat: 41.8162, lng: -71.4225, type: "attraction", category: "attractions", description: "Italian neighborhood with restaurants", price: "FREE", rating: "★★★★☆", address: "Atwells Avenue" },
    { name: "Benefit Street", lat: 41.8264, lng: -71.4012, type: "attraction", category: "attractions", description: "'Mile of History' historic walking tour", price: "FREE", rating: "★★★★☆", address: "The Hill" },
    { name: "WaterFire Providence", lat: 41.8270, lng: -71.4101, type: "attraction", category: "attractions waterfront romantic", description: "Iconic romantic fire sculpture installation", price: "FREE", rating: "★★★★★", address: "Downtown Rivers" },
    { name: "RISD Museum", lat: 41.8264, lng: -71.4012, type: "attraction", category: "attractions", description: "World-class art museum", price: "$15", rating: "★★★★☆", address: "224 Benefit St" },
    { name: "Brown University", lat: 41.8264, lng: -71.4025, type: "attraction", category: "attractions", description: "Historic Ivy League campus", price: "FREE", rating: "★★★★☆", address: "The Hill" },
    { name: "Roger Williams Park", lat: 41.7887, lng: -71.4141, type: "outdoor", category: "attractions", description: "Large park with zoo and gardens", price: "FREE", rating: "★★★★☆", address: "South Providence" },
    
    // Hotels
    { name: "Graduate Providence", lat: 41.8264, lng: -71.4012, type: "hotel", category: "hotels", description: "Boutique hotel in The Hill", price: "$200-300/night", rating: "★★★★☆", address: "The Hill" },
    { name: "Hampton Inn Downtown", lat: 41.8240, lng: -71.4128, type: "hotel", category: "hotels", description: "Modern downtown hotel", price: "$150-250/night", rating: "★★★★☆", address: "Downtown" },
    { name: "Omni Providence", lat: 41.8240, lng: -71.4128, type: "hotel", category: "hotels", description: "Luxury downtown hotel", price: "$250-400/night", rating: "★★★★★", address: "1 W Exchange St" },
    
    // Romantic Spots
    { name: "Prospect Terrace", lat: 41.8264, lng: -71.4012, type: "romantic", category: "romantic", description: "Scenic overlook of downtown", price: "FREE", rating: "★★★★★", address: "Congdon St" },
    { name: "India Point Park", lat: 41.8085, lng: -71.3938, type: "romantic", category: "romantic waterfront", description: "Waterfront park with city views", price: "FREE", rating: "★★★★☆", address: "India St" },
    { name: "Blackstone Park", lat: 41.8350, lng: -71.3800, type: "romantic", category: "romantic", description: "Riverside park perfect for walks", price: "FREE", rating: "★★★★☆", address: "East Providence" }
];

function initLeafletMap() {
    // Initialize the Leaflet map
    leafletMap = L.map('providence-map').setView([41.8240, -71.4128], 14);

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
        maxZoom: 19
    }).addTo(leafletMap);

    // Create marker layer group
    leafletMarkerLayer = L.layerGroup().addTo(leafletMap);

    // Add markers for all locations
    providenceLocations.forEach(location => {
        addLeafletMarker(location);
    });

    // Add map filter functionality
    const filterButtons = document.querySelectorAll('.map-filter');
    filterButtons.forEach(button => {
        button.addEventListener('click', function() {
            const category = this.getAttribute('data-map-category');
            filterLeafletMarkers(category);
            
            // Update button states
            filterButtons.forEach(btn => {
                btn.classList.remove('active');
                btn.classList.remove('bg-white', 'text-[#433A3F]');
                btn.classList.add('bg-white/20', 'text-white');
            });
            this.classList.add('active');
            this.classList.add('bg-white', 'text-[#433A3F]');
            this.classList.remove('bg-white/20', 'text-white');
        });
    });
}

function addLeafletMarker(location) {
    const icon = getLeafletMarkerIcon(location.type);
    
    const marker = L.marker([location.lat, location.lng], { icon: icon })
        .bindPopup(createLeafletPopupContent(location))
        .addTo(leafletMarkerLayer);

    // Store marker with its categories for filtering
    marker.categories = location.category;
    leafletMarkers.push(marker);
}

function getLeafletMarkerIcon(type) {
    const colors = {
        restaurant: '#ef4444', // red
        attraction: '#3b82f6', // blue  
        hotel: '#8b5cf6',      // purple
        romantic: '#ec4899',   // pink
        outdoor: '#10b981'     // green
    };
    
    const iconHtml = `
        <div style="
            background-color: ${colors[type] || '#6b7280'};
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        "></div>
    `;
    
    return L.divIcon({
        html: iconHtml,
        className: 'custom-marker',
        iconSize: [20, 20],
        iconAnchor: [10, 10]
    });
}

function createLeafletPopupContent(location) {
    return `
        <div class="p-4 max-w-xs">
            <h3 class="font-bold text-lg mb-2 text-[#433A3F]">${location.name}</h3>
            <p class="text-sm text-[#433A3F]/80 mb-2">${location.description}</p>
            <p class="text-xs text-[#433A3F]/60 mb-2">📍 ${location.address}</p>
            <div class="flex justify-between items-center mb-3">
                <span class="text-sm font-semibold text-green-600">${location.price}</span>
                <span class="text-sm text-yellow-500">${location.rating}</span>
            </div>
            <div class="flex gap-2">
                <button onclick="getDirections('${location.name}')" class="bg-[#C07F63] text-white px-3 py-1 rounded text-xs hover:bg-[#A9684C] transition-colors">
                    📍 Directions
                </button>
                <button onclick="callUber(${location.lat}, ${location.lng})" class="bg-[#433A3F] text-white px-3 py-1 rounded text-xs hover:bg-black transition-colors">
                    🚗 Uber
                </button>
            </div>
        </div>
    `;
}

function filterLeafletMarkers(category) {
    leafletMarkerLayer.clearLayers();
    
    providenceLocations.forEach(location => {
        if (category === 'all' || location.category.includes(category)) {
            addLeafletMarker(location);
        }
    });
}

// Focus on specific location for Leaflet map
window.focusMapLocation = function(locationId) {
    const locationMap = {
        'gracies': { lat: 41.8264, lng: -71.4106, zoom: 16 },
        'mills-tavern': { lat: 41.8162, lng: -71.4225, zoom: 16 },
        'riverwalk': { lat: 41.8270, lng: -71.4101, zoom: 15 },
        'federal-hill': { lat: 41.8162, lng: -71.4225, zoom: 15 },
        'benefit-street': { lat: 41.8264, lng: -71.4012, zoom: 15 },
        'waterfire': { lat: 41.8270, lng: -71.4101, zoom: 16 },
        'downtown': { lat: 41.8240, lng: -71.4128, zoom: 14 },
        'east-side': { lat: 41.8264, lng: -71.4012, zoom: 14 },
        'hill': { lat: 41.8264, lng: -71.4012, zoom: 15 },
        'waterfront': { lat: 41.8270, lng: -71.4101, zoom: 15 }
    };

    const area = locationMap[locationId];
    if (area && leafletMap) {
        leafletMap.setView([area.lat, area.lng], area.zoom);
    }
};

// Initialize Leaflet map when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Small delay to ensure the map container is ready
    setTimeout(initLeafletMap, 500);
    // Initialize custom points system
    setTimeout(initializeCustomPoints, 600);
});

// Enhanced Map Features: Custom Points of Interest
let customPoints = [];
let isAddingCustomPoint = false;

function initializeCustomPoints() {
    // Load saved custom points from localStorage
    const savedPoints = localStorage.getItem('providence-custom-points');
    if (savedPoints) {
        customPoints = JSON.parse(savedPoints);
        customPoints.forEach(point => {
            addCustomPointToMap(point);
        });
    }
    
    updateCustomPointsUI();
    
    // Add click listener to map for adding custom points
    if (leafletMap) {
        leafletMap.on('click', function(e) {
            if (isAddingCustomPoint) {
                addCustomPointAtLocation(e.latlng);
            }
        });
    }
}

function startAddingCustomPoint() {
    const name = document.getElementById('custom-place-name').value.trim();
    const category = document.getElementById('custom-place-category').value;
    const notes = document.getElementById('custom-place-notes').value.trim();
    
    if (!name) {
        showStatusMessage('Please enter a name for your special place!', 'error');
        return;
    }
    
    isAddingCustomPoint = true;
    showStatusMessage('Click anywhere on the map to place your marker!', 'info');
    
    // Change cursor style
    if (leafletMap) {
        leafletMap.getContainer().style.cursor = 'crosshair';
    }
}

function addCustomPointAtLocation(latlng) {
    const name = document.getElementById('custom-place-name').value.trim();
    const category = document.getElementById('custom-place-category').value;
    const notes = document.getElementById('custom-place-notes').value.trim();
    
    const customPoint = {
        id: Date.now(),
        name: name,
        category: category,
        notes: notes,
        lat: latlng.lat,
        lng: latlng.lng,
        dateAdded: new Date().toLocaleDateString()
    };
    
    customPoints.push(customPoint);
    addCustomPointToMap(customPoint);
    saveCustomPoints();
    updateCustomPointsUI();
    
    // Clear form
    document.getElementById('custom-place-name').value = '';
    document.getElementById('custom-place-notes').value = '';
    
    // Reset map cursor and adding state
    isAddingCustomPoint = false;
    if (leafletMap) {
        leafletMap.getContainer().style.cursor = '';
    }
    
    showStatusMessage(`Added "${name}" to your map! 💕`, 'success');
}

function addCustomPointToMap(point) {
    const categoryIcons = {
        'memory': '💕',
        'restaurant': '🍽️',
        'shop': '🛍️',
        'attraction': '🎭',
        'photo-spot': '📸',
        'other': '📍'
    };
    
    const icon = L.divIcon({
        html: `<div style="
            background-color: #ec4899;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 3px solid white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            font-size: 14px;
        ">${categoryIcons[point.category] || '📍'}</div>`,
        className: 'custom-marker',
        iconSize: [30, 30],
        iconAnchor: [15, 15]
    });
    
    const marker = L.marker([point.lat, point.lng], { icon: icon })
        .bindPopup(createCustomPointPopup(point))
        .addTo(leafletMarkerLayer);
    
    marker.isCustom = true;
    marker.customPointId = point.id;
    leafletMarkers.push(marker);
}

function createCustomPointPopup(point) {
    return `
        <div class="p-4 min-w-[250px]">
            <div class="flex justify-between items-start mb-3">
                <h3 class="font-bold text-lg text-[#433A3F]">${point.name}</h3>
                <span class="text-xs bg-pink-100 text-pink-800 px-2 py-1 rounded-full">${point.category.replace('-', ' ')}</span>
            </div>
            ${point.notes ? `<p class="text-sm text-gray-600 mb-3">${point.notes}</p>` : ''}
            <div class="text-xs text-gray-500 mb-3">Added: ${point.dateAdded}</div>
            <div class="flex gap-2">
                <button onclick="getDirections('${point.name}, Providence, RI')" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
                    🗺️ Directions
                </button>
                <button onclick="removeCustomPoint(${point.id})" class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600">
                    🗑️ Remove
                </button>
            </div>
        </div>
    `;
}

function removeCustomPoint(pointId) {
    customPoints = customPoints.filter(point => point.id !== pointId);
    
    // Remove marker from map
    leafletMarkers = leafletMarkers.filter(marker => {
        if (marker.customPointId === pointId) {
            leafletMarkerLayer.removeLayer(marker);
            return false;
        }
        return true;
    });
    
    saveCustomPoints();
    updateCustomPointsUI();
    showStatusMessage('Custom point removed', 'info');
}

function viewCustomPoints() {
    if (customPoints.length === 0) {
        showStatusMessage('No custom points added yet! Add some special places to your map.', 'info');
        return;
    }
    
    let content = '<div class="space-y-3">';
    customPoints.forEach(point => {
        content += `
            <div class="bg-gray-50 p-3 rounded-lg border">
                <div class="flex justify-between items-start mb-2">
                    <h4 class="font-semibold text-[#433A3F]">${point.name}</h4>
                    <span class="text-xs bg-pink-100 text-pink-800 px-2 py-1 rounded-full">${point.category.replace('-', ' ')}</span>
                </div>
                ${point.notes ? `<p class="text-sm text-gray-600 mb-2">${point.notes}</p>` : ''}
                <div class="flex justify-between items-center">
                    <span class="text-xs text-gray-500">Added: ${point.dateAdded}</span>
                    <button onclick="focusCustomPoint(${point.id})" class="text-blue-600 hover:text-blue-800 text-sm">View on Map →</button>
                </div>
            </div>
        `;
    });
    content += '</div>';
    
    showInfoModal(`📌 Your Special Places (${customPoints.length})`, content);
}

function focusCustomPoint(pointId) {
    const point = customPoints.find(p => p.id === pointId);
    if (point && leafletMap) {
        leafletMap.setView([point.lat, point.lng], 16);
        
        // Find and open the marker popup
        const marker = leafletMarkers.find(m => m.customPointId === pointId);
        if (marker) {
            marker.openPopup();
        }
    }
}

function clearCustomPoints() {
    if (customPoints.length === 0) {
        showStatusMessage('No custom points to clear!', 'info');
        return;
    }
    
    if (confirm(`Are you sure you want to remove all ${customPoints.length} custom points? This cannot be undone.`)) {
        // Remove all custom markers from map
        leafletMarkers = leafletMarkers.filter(marker => {
            if (marker.isCustom) {
                leafletMarkerLayer.removeLayer(marker);
                return false;
            }
            return true;
        });
        
        customPoints = [];
        saveCustomPoints();
        updateCustomPointsUI();
        showStatusMessage('All custom points cleared', 'info');
    }
}

function saveCustomPoints() {
    localStorage.setItem('providence-custom-points', JSON.stringify(customPoints));
}

function updateCustomPointsUI() {
    const count = customPoints.length;
    document.getElementById('custom-points-count').textContent = count;
    document.getElementById('custom-total-count').textContent = count;
}

function showStatusMessage(message, type = 'info') {
    const statusDiv = document.getElementById('custom-points-status');
    if (statusDiv) {
        const colors = {
            'info': 'text-blue-100',
            'success': 'text-green-100',
            'error': 'text-red-100'
        };
        
        statusDiv.className = `mt-3 text-sm ${colors[type] || 'text-white/60'}`;
        statusDiv.textContent = message;
        
        // Reset after 5 seconds
        setTimeout(() => {
            statusDiv.className = 'mt-3 text-sm text-white/60';
            statusDiv.textContent = 'Click the "📌 Click Map to Add Point" button, then click anywhere on the map to add your special place!';
        }, 5000);
    }
}

// Enhanced popup content with quick info
function createLeafletPopupContent(location) {
    const quickInfo = `
        <div class="p-4 min-w-[280px] max-w-[320px]">
            <div class="flex justify-between items-start mb-3">
                <h3 class="font-bold text-lg text-[#433A3F] pr-2">${location.name}</h3>
                <div class="flex items-center">
                    <span class="text-sm">${location.rating}</span>
                </div>
            </div>
            
            <div class="mb-3">
                <p class="text-sm text-gray-600 mb-2">${location.description}</p>
                <div class="flex items-center text-sm text-gray-500 mb-1">
                    <span class="mr-2">📍</span>
                    <span>${location.address}</span>
                </div>
                <div class="flex items-center text-sm font-semibold text-green-600">
                    <span class="mr-2">💰</span>
                    <span>${location.price}</span>
                </div>
            </div>
            
            ${getInsiderTips(location)}
            
            <div class="flex gap-2 pt-3 border-t border-gray-200">
                <button onclick="getDirections('${location.name}, Providence, RI')" class="bg-[#C07F63] text-white px-3 py-1 rounded text-sm hover:bg-[#A9684C] transition-colors">
                    🗺️ Directions
                </button>
                <button onclick="callUber(${location.lat}, ${location.lng})" class="bg-[#433A3F] text-white px-3 py-1 rounded text-sm hover:bg-black transition-colors">
                    🚗 Uber
                </button>
                <button onclick="showLocationInfo('${location.name}')" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition-colors">
                    📋 Info
                </button>
            </div>
        </div>
    `;
    
    return quickInfo;
}

function getInsiderTips(location) {
    const tips = {
        "Gracie's Restaurant": "💡 Reserve the Chef's Table for an intimate anniversary experience! Best time: 7:30 PM for optimal lighting.",
        "Providence Riverwalk": "💡 Best romantic walk time is sunset (around 7 PM in July). Look for the pedestrian bridges!",
        "WaterFire Providence": "💡 Arrive 30 minutes early to find the best viewing spots. Bring a blanket for riverside seating!",
        "Federal Hill": "💡 Start at Atwells Avenue for authentic Italian groceries. Perfect for picking up dessert!",
        "RISD Museum": "💡 Free admission on Sundays for RI residents. The Egyptian collection is surprisingly romantic!",
        "Mill's Tavern": "💡 Request a table by the windows for Federal Hill people-watching. Try their craft cocktails!"
    };
    
    if (tips[location.name]) {
        return `<div class="bg-blue-50 p-3 rounded-lg border border-blue-200 mb-3">
            <p class="text-xs text-blue-800">${tips[location.name]}</p>
        </div>`;
    }
    
    return '';
}

function showLocationInfo(locationName) {
    const location = providenceLocations.find(loc => loc.name === locationName);
    if (!location) return;
    
    updateLocationInfoPanel(location);
    
    // Scroll to info panel
    const panel = document.getElementById('location-info-panel');
    if (panel) {
        panel.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
}

function updateLocationInfoPanel(location) {
    const panel = document.getElementById('location-info-panel');
    if (!panel) return;
    
    panel.innerHTML = `
        <div class="space-y-4">
            <div class="flex justify-between items-start">
                <h3 class="text-xl font-bold text-white">${location.name}</h3>
                <span class="text-sm text-white/70">${location.rating}</span>
            </div>
            
            <div class="grid md:grid-cols-2 gap-4">
                <div>
                    <h4 class="font-semibold text-white mb-2">📍 Location Details</h4>
                    <p class="text-white/80 text-sm mb-1">${location.address}</p>
                    <p class="text-white/80 text-sm mb-1">${location.description}</p>
                    <p class="text-green-400 text-sm font-semibold">${location.price}</p>
                </div>
                
                <div>
                    <h4 class="font-semibold text-white mb-2">💡 Quick Actions</h4>
                    <div class="flex flex-col gap-2">
                        <button onclick="getDirections('${location.name}, Providence, RI')" class="bg-[#C07F63] text-white px-4 py-2 rounded text-sm hover:bg-[#A9684C] transition-colors">
                            🗺️ Get Directions
                        </button>
                        <button onclick="callUber(${location.lat}, ${location.lng})" class="bg-[#433A3F] text-white px-4 py-2 rounded text-sm hover:bg-black transition-colors">
                            🚗 Call Uber
                        </button>
                    </div>
                </div>
            </div>
            
            ${getInsiderTips(location)}
        </div>
    `;
}

// ...existing code...

    // Collaborative Playlist Builder (Phase 2)
    let playlists = [];
    let currentPlaylist = null;
    let connectedServices = {
        spotify: { connected: false, token: null },
        youtube: { connected: false, token: null },
        qobuz: { connected: false, credentials: null }
    };
    let searchCache = {};

    // Load playlists from localStorage
    function loadPlaylists() {
        const saved = localStorage.getItem('providence-playlists');
        if (saved) {
            try {
                playlists = JSON.parse(saved);
                renderPlaylistsGrid();
            } catch (e) {
                console.warn('Failed to load saved playlists:', e);
            }
        }
    }

    // Save playlists to localStorage
    function savePlaylists() {
        try {
            localStorage.setItem('providence-playlists', JSON.stringify(playlists));
            showNotification('Playlists saved successfully!', 'success');
        } catch (e) {
            showNotification('Failed to save playlists. Please try again.', 'error');
        }
    }

    // Load connected services status
    function loadConnectedServices() {
        const saved = localStorage.getItem('providence-music-services');
        if (saved) {
            try {
                connectedServices = { ...connectedServices, ...JSON.parse(saved) };
                updateServiceConnectionStatus();
            } catch (e) {
                console.warn('Failed to load service connections:', e);
            }
        }
    }

    // Save connected services
    function saveConnectedServices() {
        try {
            localStorage.setItem('providence-music-services', JSON.stringify(connectedServices));
        } catch (e) {
            console.warn('Failed to save service connections:', e);
        }
    }

    // Update service connection status UI
    function updateServiceConnectionStatus() {
        const services = ['spotify', 'youtube', 'qobuz'];
        services.forEach(service => {
            const statusEl = document.getElementById(`${service}-status`);
            if (statusEl) {
                statusEl.className = `w-3 h-3 rounded-full ${connectedServices[service].connected ? 'bg-green-400' : 'bg-red-400'}`;
            }
        });
    }

    // Render playlists grid
    function renderPlaylistsGrid() {
        const grid = document.getElementById('playlists-grid');
        if (!grid) return;

        if (playlists.length === 0) {
            grid.innerHTML = `
                <div class="empty-playlists text-center py-12 col-span-full">
                    <div class="text-6xl mb-4">🎼</div>
                    <h4 class="text-xl font-semibold text-[#433A3F] mb-2">No playlists yet</h4>
                    <p class="text-[#433A3F]/70 mb-6">Create your first romantic playlist to get started!</p>
                    <button class="create-first-playlist bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all">
                        Create Your First Playlist
                    </button>
                </div>
            `;
            return;
        }

        grid.innerHTML = playlists.map((playlist, index) => `
            <div class="playlist-card rounded-2xl p-6 cursor-pointer" data-playlist-index="${index}">
                <div class="playlist-cover w-full h-32 rounded-xl mb-4">
                    ${getPlaylistEmoji(playlist.type)}
                </div>
                <h4 class="font-bold text-[#433A3F] mb-2 truncate">${playlist.name}</h4>
                <p class="text-[#433A3F]/70 text-sm mb-3 line-clamp-2">${playlist.description || 'No description'}</p>
                <div class="flex items-center justify-between text-sm text-[#433A3F]/60">
                    <span>${playlist.songs.length} songs</span>
                    <span class="flex items-center gap-1">
                        ${playlist.collaborative ? '<span title="Collaborative">👫</span>' : '<span title="Private">🔒</span>'}
                        ${playlist.type !== 'custom' ? `<span class="bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs">${playlist.type}</span>` : ''}
                    </span>
                </div>
                <div class="flex gap-2 mt-4">
                    <button class="play-playlist-btn flex-1 bg-green-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-green-600 transition-colors" data-playlist-index="${index}">
                        ▶️ Play
                    </button>
                    <button class="edit-playlist-btn bg-gray-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-gray-600 transition-colors" data-playlist-index="${index}">
                        ✏️
                    </button>
                    <button class="share-playlist-btn bg-blue-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-blue-600 transition-colors" data-playlist-index="${index}">
                        🔗
                    </button>
                </div>
            </div>
        `).join('');
    }

    // Get emoji for playlist type
    function getPlaylistEmoji(type) {
        const emojis = {
            custom: '🎵',
            dinner: '🍽️',
            travel: '🚗',
            adventure: '⛵',
            chill: '🌙',
            dance: '💃',
            audiophile: '🎧'
        };
        return emojis[type] || '🎵';
    }

    // Open create playlist modal
    function openCreatePlaylistModal(template = null) {
        const modal = document.getElementById('create-playlist-modal');
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
        
        if (template) {
            document.getElementById('playlist-type').value = template;
            updateSuggestedSongs(template);
        }
    }

    // Close create playlist modal
    function closeCreatePlaylistModal() {
        const modal = document.getElementById('create-playlist-modal');
        modal.classList.add('hidden');
        document.body.style.overflow = '';
        document.getElementById('create-playlist-form').reset();
    }

    // Update suggested songs based on playlist type
    function updateSuggestedSongs(type) {
        const suggestions = {
            dinner: [
                { title: 'The Way You Look Tonight', artist: 'Frank Sinatra' },
                { title: 'At Last', artist: 'Etta James' },
                { title: 'La Vie En Rose', artist: 'Édith Piaf' }
            ],
            travel: [
                { title: 'Life is a Highway', artist: 'Tom Cochrane' },
                { title: 'Born to Be Wild', artist: 'Steppenwolf' },
                { title: 'Take Me Home, Country Roads', artist: 'John Denver' }
            ],
            adventure: [
                { title: 'Adventure of a Lifetime', artist: 'Coldplay' },
                { title: 'Roar', artist: 'Katy Perry' },
                { title: 'High Hopes', artist: 'Panic! At The Disco' }
            ],
            chill: [
                { title: 'Stay', artist: 'Rihanna' },
                { title: 'Golden', artist: 'Harry Styles' },
                { title: 'Breathe', artist: 'Telepopmusik' }
            ],
            dance: [
                { title: 'Uptown Funk', artist: 'Mark Ronson ft. Bruno Mars' },
                { title: 'Can\'t Stop the Feeling!', artist: 'Justin Timberlake' },
                { title: 'Levitating', artist: 'Dua Lipa' }
            ],
            audiophile: [
                { title: 'Hotel California (Hi-Res)', artist: 'Eagles', quality: '24-bit/96kHz' },
                { title: 'Bohemian Rhapsody (Remastered)', artist: 'Queen', quality: '24-bit/192kHz' },
                { title: 'The Sound of Silence (Lossless)', artist: 'Simon & Garfunkel', quality: '24-bit/96kHz' },
                { title: 'Imagine (Hi-Res)', artist: 'John Lennon', quality: '24-bit/96kHz' }
            ]
        };

        const container = document.getElementById('suggested-songs');
        if (suggestions[type]) {
            container.innerHTML = suggestions[type].map(song => {
                const qualityBadge = song.quality ? `<span class="qobuz-quality-badge ml-2">${song.quality}</span>` : '';
                return `
                    <div class="flex items-center justify-between text-sm">
                        <div class="flex items-center">
                            <span class="text-[#433A3F]">${song.title} - ${song.artist}</span>
                            ${qualityBadge}
                        </div>
                        <button class="add-suggested-song text-purple-500 hover:text-purple-700" data-title="${song.title}" data-artist="${song.artist}" data-quality="${song.quality || ''}">
                            ➕
                        </button>
                    </div>
                `;
            }).join('');
            
            // Add special note for audiophile playlist
            if (type === 'audiophile') {
                container.innerHTML += `
                    <div class="mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                        <div class="flex items-center gap-2 text-blue-800 text-sm">
                            <span class="text-lg">🎧</span>
                            <span class="font-semibold">Qobuz Hi-Res Experience</span>
                        </div>
                        <p class="text-blue-700 text-xs mt-1">These tracks are available in lossless, high-resolution audio quality for the ultimate listening experience.</p>
                    </div>
                `;
            }
        } else {
            container.innerHTML = '<p class="text-sm text-[#433A3F]/60">No suggestions for this playlist type</p>';
        }
    }

    // Handle create playlist form submission
    function handleCreatePlaylistSubmit(e) {
        e.preventDefault();
        
        const name = document.getElementById('playlist-name').value;
        const description = document.getElementById('playlist-description').value;
        const type = document.getElementById('playlist-type').value;
        const collaborative = document.getElementById('playlist-collaborative').checked;
        
        const newPlaylist = {
            id: Date.now().toString(),
            name,
            description,
            type,
            collaborative,
            songs: [],
            createdAt: new Date().toISOString(),
            lastModified: new Date().toISOString()
        };
        
        playlists.push(newPlaylist);
        savePlaylists();
        renderPlaylistsGrid();
        closeCreatePlaylistModal();
        
        showNotification(`Playlist "${name}" created successfully!`, 'success');
    }

    // Open OAuth modal for service connection
    function openOAuthModal(service) {
        const modal = document.getElementById('oauth-modal');
        const serviceInfo = {
            spotify: {
                icon: '🎵',
                name: 'Spotify',
                description: 'Connect your Spotify account to search millions of songs and create collaborative playlists.',
                buttonText: '🎵 Connect with Spotify',
                color: 'black'
            },
            youtube: {
                icon: '📺',
                name: 'YouTube Music',
                description: 'Access YouTube\'s vast music library and discover new songs for your playlists.',
                buttonText: '📺 Connect with YouTube',
                color: 'red-600'
            },
            qobuz: {
                icon: '🎧',
                name: 'Qobuz',
                description: 'High-quality audio streaming for audiophiles. Coming soon!',
                buttonText: '🎧 Connect with Qobuz',
                color: 'blue-900'
            }
        };

        const info = serviceInfo[service];
        document.getElementById('oauth-icon').textContent = info.icon;
        document.getElementById('oauth-service-name').textContent = info.name;
        document.getElementById('oauth-description').textContent = info.description;
        document.getElementById('oauth-connect-btn').textContent = info.buttonText;
        document.getElementById('oauth-connect-btn').className = `w-full bg-${info.color} text-white py-3 rounded-xl font-semibold hover:bg-gray-800 transition-colors`;
        document.getElementById('oauth-connect-btn').setAttribute('data-service', service);

        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    // Close OAuth modal
    function closeOAuthModal() {
        const modal = document.getElementById('oauth-modal');
        modal.classList.add('hidden');
        document.body.style.overflow = '';
    }

    // Handle OAuth connection (placeholder)
    function handleOAuthConnection(service) {
        showNotification(`${service} integration coming soon! For now, you can create playlists and add songs manually.`, 'info');
        
        // Simulate connection for demo purposes
        if (service !== 'qobuz') {
            connectedServices[service].connected = true;
            saveConnectedServices();
            updateServiceConnectionStatus();
            closeOAuthModal();
            showNotification(`${service} connected! (Demo mode)`, 'success');
        }
    }

    // Perform music search (placeholder)
    function performMusicSearch(query, filter = 'all') {
        const resultsContainer = document.getElementById('search-results');
        
        if (!query.trim()) {
            resultsContainer.innerHTML = `
                <div class="text-center text-[#433A3F]/60 py-8">
                    <span class="text-3xl">🎵</span>
                    <p class="mt-2">Enter a search term to find music!</p>
                </div>
            `;
            return;
        }

        // Show loading
        resultsContainer.innerHTML = `
            <div class="text-center py-8">
                <div class="loading-spinner mx-auto mb-4"></div>
                <p class="text-[#433A3F]/60">Searching for "${query}"...</p>
            </div>
        `;

        // Simulate search results with Qobuz support (replace with actual API calls)
        setTimeout(() => {
            const mockResults = [
                {
                    id: '1',
                    title: query,
                    artist: 'Various Artists',
                    album: 'Search Results',
                    platform: 'spotify',
                    duration: '3:45',
                    quality: 'High',
                    preview_url: null
                },
                {
                    id: '2',
                    title: `${query} (Acoustic Version)`,
                    artist: 'Indie Artist',
                    album: 'Acoustic Sessions',
                    platform: 'youtube',
                    duration: '4:12',
                    quality: 'Standard',
                    preview_url: null
                },
                {
                    id: '3',
                    title: `${query} (Hi-Res)`,
                    artist: 'Audiophile Edition',
                    album: 'Lossless Collection',
                    platform: 'qobuz',
                    duration: '3:58',
                    quality: 'Hi-Res 24-bit/96kHz',
                    preview_url: null
                }
            ];

            renderSearchResults(mockResults, query);
        }, 1000);
    }

    // Render search results
    function renderSearchResults(results, query) {
        const container = document.getElementById('search-results');
        
        if (results.length === 0) {
            container.innerHTML = `
                <div class="text-center text-[#433A3F]/60 py-8">
                    <span class="text-3xl">😔</span>
                    <p class="mt-2">No results found for "${query}"</p>
                </div>
            `;
            return;
        }

        container.innerHTML = results.map(song => {
            let platformIcon = '🎵';
            let platformColor = 'from-purple-400 to-pink-400';
            let qualityBadge = '';
            
            if (song.platform === 'spotify') {
                platformIcon = '🎵';
                platformColor = 'from-green-400 to-green-600';
            } else if (song.platform === 'youtube') {
                platformIcon = '📺';
                platformColor = 'from-red-400 to-red-600';
            } else if (song.platform === 'qobuz') {
                platformIcon = '🎧';
                platformColor = 'from-blue-800 to-blue-900';
                qualityBadge = `<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full ml-2">${song.quality}</span>`;
            }
            
            return `
                <div class="search-result-item flex items-center gap-3 p-3 border border-gray-200 rounded-lg" data-platform="${song.platform}">
                    <div class="w-12 h-12 bg-gradient-to-br ${platformColor} rounded-lg flex items-center justify-center text-white font-semibold">
                        ${platformIcon}
                    </div>
                    <div class="flex-1 min-w-0">
                        <h4 class="font-semibold text-[#433A3F] truncate">${song.title}</h4>
                        <p class="text-sm text-[#433A3F]/70 truncate">${song.artist} • ${song.album}</p>
                        <div class="flex items-center">
                            <p class="text-xs text-[#433A3F]/50">${song.duration} • ${song.platform}</p>
                            ${qualityBadge}
                        </div>
                    </div>
                    <button class="add-to-playlist-btn bg-purple-500 text-white px-3 py-2 rounded-lg text-sm hover:bg-purple-600 transition-colors" data-song='${JSON.stringify(song)}'>
                        ➕ Add
                    </button>
                </div>
            `;
        }).join('');
    }

    // Set current playlist
    function setCurrentPlaylist(playlistIndex) {
        if (playlistIndex >= 0 && playlistIndex < playlists.length) {
            currentPlaylist = playlists[playlistIndex];
            updateCurrentPlaylistDisplay();
        }
    }

    // Update current playlist display
    function updateCurrentPlaylistDisplay() {
        const nameEl = document.getElementById('current-playlist-name');
        const songsEl = document.getElementById('current-playlist-songs');
        const playBtn = document.getElementById('play-playlist');
        const shareBtn = document.getElementById('share-playlist');

        if (!currentPlaylist) {
            nameEl.textContent = 'Select or create a playlist';
            songsEl.innerHTML = `
                <div class="text-center text-[#433A3F]/60 py-8">
                    <span class="text-3xl">📝</span>
                    <p class="mt-2">Your playlist songs will appear here</p>
                </div>
            `;
            playBtn.disabled = true;
            shareBtn.disabled = true;
            return;
        }

        nameEl.textContent = currentPlaylist.name;
        playBtn.disabled = currentPlaylist.songs.length === 0;
        shareBtn.disabled = false;

        if (currentPlaylist.songs.length === 0) {
            songsEl.innerHTML = `
                <div class="text-center text-[#433A3F]/60 py-8">
                    <span class="text-3xl">🎵</span>
                    <p class="mt-2">Add songs to this playlist!</p>
                </div>
            `;
        } else {
            songsEl.innerHTML = currentPlaylist.songs.map((song, index) => `
                <div class="song-item flex items-center gap-3 p-2 rounded-lg">
                    <button class="play-btn w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm hover:bg-green-600 transition-colors">
                        ▶️
                    </button>
                    <div class="flex-1 min-w-0">
                        <h5 class="font-medium text-[#433A3F] truncate text-sm">${song.title}</h5>
                        <p class="text-xs text-[#433A3F]/70 truncate">${song.artist}</p>
                    </div>
                    <button class="remove-song-btn text-red-500 hover:text-red-700 text-sm" data-song-index="${index}">
                        🗑️
                    </button>
                </div>
            `).join('');
        }
    }

// Interactive functions for enhanced Plan Your Trip section

window.showTransportTips = () => {
    const tips = [
        "🚶‍♀️ Most romantic spots in downtown Providence are within walking distance",
        "🚗 Uber/Lyft typically take 3-5 minutes to arrive in downtown area",
        "🅿️ Parking can be challenging - rideshare is more romantic anyway!",
        "🌉 Walking across the bridges offers beautiful photo opportunities",
        "⏰ Book rides 10 minutes early during dinner rush (6-8pm)"
    ];
    
    showInfoModal("🗺️ Transportation Tips", tips.join("<br><br>"));
};

window.scrollToCalculator = () => {
    const calculator = document.querySelector('#restaurant-week');
    if (calculator) {
        calculator.scrollIntoView({ behavior: 'smooth', block: 'center' });
        // Highlight the calculator section briefly
        calculator.style.background = 'linear-gradient(135deg, #fef3c7, #fde68a)';
        setTimeout(() => {
            calculator.style.background = '';
        }, 2000);
    }
};

function showInfoModal(title, content) {
    // Create modal
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4';
    modal.innerHTML = `
        <div class="bg-white rounded-3xl p-8 max-w-md w-full shadow-2xl transform transition-all duration-300 scale-95 opacity-0" id="info-modal-content">
            <div class="text-center mb-6">
                <h3 class="text-2xl font-bold text-[#433A3F] font-display">${title}</h3>
            </div>
            <div class="text-[#433A3F]/80 leading-relaxed mb-8">
                ${content}
            </div>
            <div class="text-center">
                <button onclick="closeInfoModal()" class="bg-gradient-to-r from-[#C07F63] to-[#A9684C] text-white px-8 py-3 rounded-full font-medium hover:shadow-lg transition-all duration-300">
                    Got it! ✨
                </button>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // Animate in
    setTimeout(() => {
        const content = document.getElementById('info-modal-content');
        content.classList.remove('scale-95', 'opacity-0');
        content.classList.add('scale-100', 'opacity-100');
    }, 10);
    
    // Close on backdrop click
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            closeInfoModal();
        }
    });
    
    // Store reference for closing
    window.currentInfoModal = modal;
}

window.closeInfoModal = () => {
    const modal = window.currentInfoModal;
    if (modal) {
        const content = modal.querySelector('#info-modal-content');
        content.classList.add('scale-95', 'opacity-0');
        content.classList.remove('scale-100', 'opacity-100');
        
        setTimeout(() => {
            modal.remove();
            window.currentInfoModal = null;
        }, 300);
    }
};

const AppData = {
    itinerary: {
        day1: [
            { time: 'Afternoon', icon: '🧳', title: 'Arrival & Settling In', desc: 'Check into the stylish Neptune Hotel, your home base. Grab a coffee and relax before the romantic weekend begins. Ride-sharing services like Uber or Lyft are recommended for a smooth arrival.' },
            { time: 'Evening', icon: '🍽️', title: 'Exquisite Anniversary Dinner', desc: 'Celebrate at one of Providence\'s most romantic restaurants. Gracie\'s offers an intimate setting with tasting menus, while Hemenway\'s is perfect for seafood lovers. For a unique vibe, try CAV.' },
            { time: 'Night', icon: '🍸', title: 'Sophisticated Cocktails', desc: 'End your first night with a perfectly crafted cocktail. Visit Clementine Cocktail Bar for classic drinks or enjoy a convenient, intimate nightcap at The Bar inside your hotel.' }
        ],
        day2: [
            { time: 'Morning', icon: '☕', title: 'Leisurely Brunch & Culture', desc: 'Start with brunch at CAV or grab an artisan coffee from Little City Coffee. Then, immerse yourselves in culture at the historic Providence Athenaeum or the acclaimed RISD Museum.' },
            { time: 'Afternoon', icon: '⛵', title: 'Scenic Outdoor Adventure', desc: 'Experience Providence from the water with a Providence River Boat Company tour. The "Wine & Brine Cruise" is exceptionally romantic. Alternatively, enjoy a classic swan boat ride in Roger Williams Park.' },
            { time: 'Evening', icon: '🍝', title: 'Exploring Federal Hill', desc: 'Dine in Providence\'s "Little Italy." Massimo Restaurant is a favorite for its seasonal Italian menu. Afterwards, take a romantic stroll and maybe catch a sunset from Prospect Terrace Park.' },
            { time: 'Night', icon: '🎤', title: 'Unique Entertainment', desc: 'Check the WaterFire schedule for a magical bonfire display on the river. For a guaranteed fun and private night, head back to The Boombox karaoke lounge at the Neptune Hotel.' }
        ],
        day3: [
            { time: 'Morning', icon: '🏛️', title: 'Sunday Cultural Morning', desc: 'Enjoy a leisurely brunch and take advantage of FREE Sunday admission at the RISD Museum. Perfect time for art appreciation and reflection on your wonderful weekend together.' },
            { time: 'Afternoon', icon: '🌳', title: 'Roger Williams Park & Relaxation', desc: 'Spend a peaceful afternoon at Roger Williams Park. Take swan boat rides, walk the beautiful gardens, or simply enjoy each other\'s company in this urban oasis.' },
            { time: 'Evening', icon: '🍽️', title: 'Final Anniversary Dinner', desc: 'Cap off your celebration with one last romantic dinner. If it\'s your final Restaurant Week opportunity, make it count at a participating restaurant you haven\'t tried yet.' },
            { time: 'Night', icon: '🌙', title: 'Romantic Evening Stroll', desc: 'Take a moonlit walk through Providence\'s historic downtown. Check if WaterFire is happening for a magical finale to your anniversary weekend.' }
        ],
        day4: [
            { time: 'Morning', icon: '☕', title: 'Farewell Coffee & Breakfast', desc: 'Start your last morning with coffee and pastries from a favorite local café you\'ve discovered. Take time to reflect on all the wonderful memories you\'ve created.' },
            { time: 'Late Morning', icon: '🛍️', title: 'Last-Minute Souvenirs', desc: 'Pick up some Providence mementos - perhaps something from Federal Hill, local artisan goods, or a photo book to commemorate your anniversary trip.' },
            { time: 'Afternoon', icon: '🚗', title: 'Departure', desc: 'Check out and head home with hearts full of beautiful memories from your extended Providence anniversary celebration. The magic of this trip will stay with you always.' }
        ]
    },
    explore: [
        { id: 1, category: 'Dining', title: 'Gracie\'s', desc: 'Warm & intimate, considered the "best romantic dinner" in Providence. Features exquisite multi-course tasting menus.', keyInfo: 'Price: $$$$', icon: '⭐' },
        { id: 2, category: 'Dining', title: 'Hemenway\'s Restaurant', desc: 'An upscale city staple for nearly 40 years, focusing on the freshest seafood, including whole lobster and oysters.', keyInfo: 'Price: $$$$', icon: '🦞' },
        { id: 3, category: 'Dining', title: 'Massimo Restaurant', desc: 'A Federal Hill favorite with a seasonal Italian menu served in a cozy, inviting atmosphere.', keyInfo: 'Price: $$', icon: '🇮🇹' },
        { id: 4, category: 'Dining', title: 'CAV Providence', desc: 'Unique "dining in a museum" experience in a historic loft with an eclectic, award-winning menu.', keyInfo: 'Price: $$', icon: '🖼️' },
        { id: 5, category: 'Tour', title: 'Wine & Brine Cruise', desc: 'A 2-hour tour with freshly shucked local oysters and complimentary wine. Ultimate romantic experience.', keyInfo: '$95/person', icon: '🥂' },
        { id: 6, category: 'Tour', title: 'Twilight River Cruise', desc: 'A 75-minute sunset tour to see the city bathed in a soft, golden light. Perfect for photos. (21+)', keyInfo: '$40/person', icon: '🌇' },
        { id: 7, category: 'Tour', title: 'Private Charter', desc: 'The epitome of exclusivity. A 1-hour private boat tour for just the two of you to create your own itinerary.', keyInfo: '$450/charter', icon: '💎' },
        { id: 8, category: 'Culture', title: 'RISD Museum', desc: 'A renowned art and design museum with diverse collections spanning ancient to contemporary works.', keyInfo: 'Free on Sundays!', icon: '🎨' },
        { id: 9, category: 'Culture', title: 'Providence Athenaeum', desc: 'A historic and intimate library on Benefit Street. Perfect for a quiet, intellectual stroll. (Closed Sundays)', keyInfo: 'Pay-what-you-can', icon: '📚' },
        { id: 10, category: 'Outdoor', title: 'Roger Williams Park', desc: 'A 435-acre urban oasis. Enjoy beautiful trails, picnic spots, or a charming swan boat ride on the pond.', keyInfo: 'Park is Free', icon: '🦢' },
        { id: 11, category: 'Outdoor', title: 'WaterFire', desc: 'A signature Providence event. An art installation of bonfires on the rivers, creating a magical atmosphere. (Schedule varies)', keyInfo: 'Check Schedule', icon: '🔥' },
        { id: 12, category: 'Culture', title: 'The Boombox', desc: 'Providence\'s only plush karaoke lounge, located in the Neptune Hotel. A fun, private spot for late-night revelry.', keyInfo: 'At your hotel!', icon: '🎤' }
    ],
    plan: [
        { title: 'Advance Reservations are Key', content: 'For a celebratory weekend, planning ahead is crucial. Top restaurants like Gracie\'s and sought-after boat tours fill up quickly. We highly recommend making reservations at least 1-2 weeks in advance to secure your preferred times and avoid disappointment.' },
        { title: 'Check Event Schedules', content: 'Providence\'s event calendar can change. The WaterFire schedule is typically released in the spring; check their official website closer to your trip. Similarly, while major shows at PPAC may not be running, check their site for any concerts or smaller performances that might be added.' },
        { title: 'Getting Around Providence', content: 'The downtown area is very walkable. For longer distances, ride-sharing services (Uber/Lyft) are readily available and offer a convenient, private way to travel. While public transit (RIPTA) is an option, rideshares align better with the stress-free nature of a romantic getaway.' },
        { title: 'What to Pack', content: 'Comfort is key for exploring the city\'s charming streets, so bring comfortable walking shoes. Providence weather in June can vary, so packing layers (a light jacket or sweater for evenings) is always a smart choice. Don\'t forget a slightly dressier outfit for your special anniversary dinner!' }
    ]
};

document.addEventListener('DOMContentLoaded', () => {
    const tabContainer = document.getElementById('tab-content');
    const exploreGrid = document.getElementById('explore-grid');
    // const accordionContainer = document.getElementById('accordion-container'); // No longer needed

    // Photo storage for each day
    const photoStorage = {
        1: [],
        2: [],
        3: [],
        4: []
    };

    // Love notes array
    const loveNotes = [
        "I love how you make every ordinary moment feel like magic ✨",
        "Your smile is my favorite view in any city, including Providence 😊",
        "Thank you for being my adventure partner in life and love 💕",
        "Every day with you feels like our first date all over again 🥰",
        "You make my heart feel at home, no matter where we are 🏡",
        "I choose you today, tomorrow, and for all our adventures to come 💖",
        "Your laugh is the best soundtrack to any trip we take together 🎵",
        "With you, even planning is part of the romance 📝💕"
    ];

    // Facebook Dating Style Bubble
    function showDatingBubble() {
        const bubble = document.getElementById('dating-bubble');
        if (bubble) {
            setTimeout(() => {
                bubble.classList.add('show');
            }, 2000); // Show after 2 seconds
            
            // Hide bubble when clicked
            bubble.addEventListener('click', () => {
                bubble.classList.remove('show');
                createFloatingHeart(
                    bubble.offsetLeft + bubble.offsetWidth / 2,
                    bubble.offsetTop + bubble.offsetHeight / 2
                );
            });
            
            // Auto hide after 10 seconds, then show again after 30 seconds
            setTimeout(() => {
                if (bubble.classList.contains('show')) {
                    bubble.classList.remove('show');
                }
                
                // Show again after 30 seconds
                setTimeout(() => {
                    bubble.classList.add('show');
                }, 30000);
            }, 10000);
        }
    }

    // Romantic Interactive Features
    function createFloatingHeart(x, y) {
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        heart.textContent = ['💖', '💕', '💝', '💗', '💘'][Math.floor(Math.random() * 5)];
        heart.style.left = x + 'px';
        heart.style.top = y + 'px';
        document.body.appendChild(heart);
        
        setTimeout(() => heart.remove(), 4000);
    }

    function showLoveNote() {
        const note = document.createElement('div');
        note.className = 'love-note';
        note.textContent = loveNotes[Math.floor(Math.random() * loveNotes.length)];
        
        // Random position
        note.style.top = Math.random() * (window.innerHeight - 200) + 'px';
        note.style.left = Math.random() * (window.innerWidth - 250) + 'px';
        
        document.getElementById('love-notes-container').appendChild(note);
        
        setTimeout(() => note.classList.add('show'), 100);
        
        note.addEventListener('click', () => {
            note.classList.remove('show');
            setTimeout(() => note.remove(), 500);
        });
        
        // Auto remove after 8 seconds
        setTimeout(() => {
            if (note.parentNode) {
                note.classList.remove('show');
                setTimeout(() => note.remove(), 500);
            }
        }, 8000);
    }

    function scrollToSection(sectionId) {
        document.getElementById(sectionId).scrollIntoView({ 
            behavior: 'smooth' 
        });
    }

    function startCountdown() {
        const targetDate = new Date('2025-07-11T16:00:00'); // Friday, July 11th, 2025 at 4:00 PM
        const now = new Date();
        const timeDiff = targetDate.getTime() - now.getTime();
        
        const countdownElement = document.getElementById('countdown-days');
        const labelElement = document.querySelector('.countdown-label');
        const messageElement = document.querySelector('.countdown-container p');
        
        if (countdownElement && labelElement) {
            if (timeDiff > 0) {
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                
                if (days > 0) {
                    countdownElement.textContent = days;
                    labelElement.textContent = days === 1 ? 'Day Until Our Trip' : 'Days Until Our Trip';
                    if (messageElement) {
                        messageElement.textContent = `Providence awaits us on July 11th at 4 PM! 💕`;
                    }
                } else if (hours > 0) {
                    countdownElement.textContent = hours;
                    labelElement.textContent = hours === 1 ? 'Hour Until Our Trip' : 'Hours Until Our Trip';
                    if (messageElement) {
                        messageElement.textContent = `Almost time for our Providence adventure! 🎉`;
                    }
                } else {
                    countdownElement.textContent = minutes;
                    labelElement.textContent = minutes === 1 ? 'Minute Until Our Trip' : 'Minutes Until Our Trip';
                    if (messageElement) {
                        messageElement.textContent = `Our romantic getaway starts any moment now! ✨`;
                    }
                }
            } else {
                countdownElement.textContent = '🎉';
                labelElement.textContent = 'Our Trip Has Begun!';
                if (messageElement) {
                    messageElement.textContent = 'Welcome to our magical Providence weekend! 💖';
                }
            }
        }
    }

    // Add random floating hearts on scroll
    let lastScrollY = window.scrollY;
    window.addEventListener('scroll', () => {
        if (Math.random() < 0.05) { // 5% chance on scroll
            createFloatingHeart(
                Math.random() * window.innerWidth,
                window.innerHeight + 50
            );
        }
        lastScrollY = window.scrollY;
    });

    // Make these functions global
    window.showLoveNote = showLoveNote;
    window.scrollToSection = scrollToSection;
    window.createFloatingHeart = createFloatingHeart;

    // Music player functionality
    let isPlaying = false;
    
    window.toggleMusic = () => {
        const playBtn = document.getElementById('music-play-btn');
        const playIcon = document.getElementById('play-icon');
        
        if (!isPlaying) {
            playBtn.classList.add('playing');
            playIcon.textContent = '⏸️';
            isPlaying = true;
            
            // Create floating music notes
            setInterval(() => {
                if (isPlaying) {
                    createMusicNote();
                }
            }, 2000);
            
        } else {
            playBtn.classList.remove('playing');
            playIcon.textContent = '▶️';
            isPlaying = false;
        }
    };

    function createMusicNote() {
        const note = document.createElement('div');
        note.className = 'floating-heart';
        note.textContent = ['🎵', '🎶', '♪', '♫'][Math.floor(Math.random() * 4)];
        note.style.left = Math.random() * window.innerWidth + 'px';
        note.style.top = window.innerHeight + 'px';
        note.style.color = '#C07F63';
        document.body.appendChild(note);
        
        setTimeout(() => note.remove(), 4000);
    }

    // Start countdown
    startCountdown();
    
    // Update countdown every minute
    setInterval(startCountdown, 60000);
    
    // Initialize dating bubble
    showDatingBubble();
    
    // Add click hearts to memory cards
    document.addEventListener('click', (e) => {
        if (e.target.closest('.memory-card')) {
            createFloatingHeart(e.clientX, e.clientY);
        }
    });

    // Dynamic Itinerary Management
    let isEditMode = false;
    let editingItem = null;
    let currentDay = 'day1';

    // Load custom itinerary from localStorage or use default
    function loadItinerary() {
        const saved = localStorage.getItem('providence-itinerary');
        if (saved) {
            try {
                const parsed = JSON.parse(saved);
                AppData.itinerary = { ...AppData.itinerary, ...parsed };
            } catch (e) {
                console.warn('Failed to load saved itinerary:', e);
            }
        }
    }

    // Save itinerary to localStorage
    function saveItinerary() {
        try {
            localStorage.setItem('providence-itinerary', JSON.stringify(AppData.itinerary));
            showNotification('Itinerary saved successfully!', 'success');
        } catch (e) {
            showNotification('Failed to save itinerary. Please try again.', 'error');
        }
    }

    // Show notification
    function showNotification(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `fixed top-4 right-4 z-50 px-4 py-2 rounded-lg text-white text-sm font-medium transition-all duration-300 transform translate-x-full`;
        notification.style.backgroundColor = type === 'success' ? '#10B981' : type === 'error' ? '#EF4444' : '#6B7280';
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => notification.style.transform = 'translate-x-0', 100);
        setTimeout(() => {
            notification.style.transform = 'translate-x-full';
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    }

    function renderItinerary(day) {
        console.log('renderItinerary called with day:', day);
        console.log('AppData.itinerary:', AppData.itinerary);
        console.log('tabContainer:', tabContainer);
        
        currentDay = day;
        const items = AppData.itinerary[day];
        if (!items) {
            console.error('No items found for day:', day);
            return;
        }
        
        console.log('Items for', day, ':', items);
        
        tabContainer.innerHTML = `
            <div class="relative max-w-2xl mx-auto" id="itinerary-timeline">
                <div class="absolute left-4 top-0 h-full w-0.5 bg-[#EAE0D5]"></div>
                ${items.map((item, index) => `
                    <div class="itinerary-item relative pl-12 pb-12 ${isEditMode ? 'edit-mode' : ''}" 
                         data-index="${index}" 
                         ${isEditMode ? 'draggable="true"' : ''}>
                        <div class="absolute left-0 top-1.5 flex items-center justify-center bg-[#C07F63] text-white rounded-full h-8 w-8 text-xl">${item.icon}</div>
                        <div class="itinerary-content">
                            <h3 class="text-xl font-bold font-display">${item.title} <span class="text-sm font-normal text-gray-500 ml-2">${item.time}</span></h3>
                            <p class="mt-1 text-[#433A3F]/80">${item.desc}</p>
                            ${isEditMode ? `
                                <div class="mt-3 flex gap-2">
                                    <button class="edit-item-btn bg-[#C07F63] text-white px-3 py-1 rounded-full text-xs hover:bg-[#A9684C] transition-colors" data-index="${index}">
                                        ✏️ Edit
                                    </button>
                                    <button class="delete-item-btn bg-red-600 text-white px-3 py-1 rounded-full text-xs hover:bg-red-700 transition-colors" data-index="${index}">
                                        🗑️ Delete
                                    </button>
                                    <button class="move-up-btn bg-gray-600 text-white px-3 py-1 rounded-full text-xs hover:bg-gray-700 transition-colors ${index === 0 ? 'opacity-50 cursor-not-allowed' : ''}" data-index="${index}" ${index === 0 ? 'disabled' : ''}>
                                        ⬆️ Up
                                    </button>
                                    <button class="move-down-btn bg-gray-600 text-white px-3 py-1 rounded-full text-xs hover:bg-gray-700 transition-colors ${index === items.length - 1 ? 'opacity-50 cursor-not-allowed' : ''}" data-index="${index}" ${index === items.length - 1 ? 'disabled' : ''}>
                                        ⬇️ Down
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                        ${isEditMode ? '<div class="drag-handle absolute right-0 top-1.5 cursor-move text-gray-400 hover:text-gray-600">⋮⋮</div>' : ''}
                    </div>
                `).join('')}
                ${isEditMode ? `
                    <div class="text-center pt-4">
                        <button class="add-item-inline bg-[#C07F63] text-white px-4 py-2 rounded-full text-sm hover:bg-[#A9684C] transition-colors">
                            ➕ Add Activity Here
                        </button>
                    </div>
                ` : ''}
            </div>
        `;

        // Add drag and drop functionality if in edit mode
        if (isEditMode) {
            setupDragAndDrop();
        }
    }

    // Setup drag and drop functionality
    function setupDragAndDrop() {
        const timeline = document.getElementById('itinerary-timeline');
        if (!timeline) return;
        
        let draggedElement = null;
        let draggedIndex = null;

        // Remove existing event listeners if any
        const clonedTimeline = timeline.cloneNode(true);
        timeline.parentNode.replaceChild(clonedTimeline, timeline);
        
        // Get the new reference
        const newTimeline = document.getElementById('itinerary-timeline');

        newTimeline.addEventListener('dragstart', (e) => {
            if (e.target.classList.contains('itinerary-item')) {
                draggedElement = e.target;
                draggedIndex = parseInt(e.target.dataset.index);
                e.target.style.opacity = '0.5';
                e.dataTransfer.effectAllowed = 'move';
            }
        });

        newTimeline.addEventListener('dragend', (e) => {
            if (e.target.classList.contains('itinerary-item')) {
                e.target.style.opacity = '';
                draggedElement = null;
                draggedIndex = null;
            }
        });

        newTimeline.addEventListener('dragover', (e) => {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        });

        newTimeline.addEventListener('drop', (e) => {
            e.preventDefault();
            if (draggedElement && e.target.closest('.itinerary-item')) {
                const dropTarget = e.target.closest('.itinerary-item');
                const dropIndex = parseInt(dropTarget.dataset.index);
                
                if (draggedIndex !== dropIndex) {
                    moveItineraryItem(currentDay, draggedIndex, dropIndex);
                    renderItinerary(currentDay);
                    saveItinerary(); // Save after drag and drop
                }
            }
        });
    }

    // Setup inline action buttons (called once during initialization)
    function setupInlineActions() {
        // This function is now empty since event delegation is handled globally
    }

    // Move itinerary item
    function moveItineraryItem(day, fromIndex, toIndex) {
        const items = AppData.itinerary[day];
        const [movedItem] = items.splice(fromIndex, 1);
        items.splice(toIndex, 0, movedItem);
    }

    // Delete itinerary item
    function deleteItineraryItem(day, index) {
        AppData.itinerary[day].splice(index, 1);
    }

    // Edit itinerary item
    function editItineraryItem(day, index) {
        const item = AppData.itinerary[day][index];
        editingItem = { day, index };
        openItineraryModal(item);
    }

    // Open itinerary modal
    function openItineraryModal(item = null) {
        const modal = document.getElementById('itinerary-modal');
        const title = document.getElementById('modal-title');
        const form = document.getElementById('itinerary-form');
        
        title.textContent = item ? 'Edit Activity' : 'Add Activity';
        
        if (item) {
            document.getElementById('activity-time').value = item.time;
            document.getElementById('activity-icon').value = item.icon;
            document.getElementById('activity-title').value = item.title;
            document.getElementById('activity-desc').value = item.desc;
        } else {
            form.reset();
            editingItem = null;
        }
        
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden';
    }

    // Close itinerary modal
    function closeItineraryModal() {
        const modal = document.getElementById('itinerary-modal');
        modal.classList.add('hidden');
        document.body.style.overflow = '';
        editingItem = null;
    }

    // Handle itinerary form submission
    function handleItineraryFormSubmit(e) {
        e.preventDefault();
        
        const time = document.getElementById('activity-time').value;
        const icon = document.getElementById('activity-icon').value;
        const title = document.getElementById('activity-title').value;
        const desc = document.getElementById('activity-desc').value;
        
        const newItem = { time, icon, title, desc };
        
        if (editingItem) {
            // Edit existing item
            AppData.itinerary[editingItem.day][editingItem.index] = newItem;
            showNotification('Activity updated successfully!', 'success');
        } else {
            // Add new item
            AppData.itinerary[currentDay].push(newItem);
            showNotification('Activity added successfully!', 'success');
        }
        
        renderItinerary(currentDay);
        saveItinerary(); // Auto-save after adding/editing
        closeItineraryModal();
    }

    // Reset itinerary to default
    function resetItinerary() {
        if (confirm('This will reset your itinerary to the default. Are you sure?')) {
            localStorage.removeItem('providence-itinerary');
            location.reload();
        }
    }

    // Toggle edit mode
    function toggleEditMode() {
        isEditMode = !isEditMode;
        const btn = document.getElementById('toggle-edit-mode');
        btn.innerHTML = isEditMode 
            ? '<span>👁️</span> View Mode' 
            : '<span>✏️</span> Edit Mode';
        btn.style.backgroundColor = isEditMode ? '#10B981' : '#433A3F';
        renderItinerary(currentDay);
    }

    function renderExploreCards(filter = 'all') {
        const filteredItems = filter === 'all' 
            ? AppData.explore 
            : AppData.explore.filter(item => item.category === filter);
        
        exploreGrid.innerHTML = filteredItems.map(item => {
            // Enhanced location data for all locations
            const getLocationData = (title) => {
                const locationData = {
                    "Gracie's": {
                        address: "194 Washington St, Providence, RI",
                        mapUrl: "https://maps.google.com/?q=Gracies+Restaurant+194+Washington+St+Providence+RI",
                        uberLocation: "Gracies%20Restaurant%20194%20Washington%20St%20Providence%20RI",
                        menuUrl: "https://graciesprov.com/menu/"
                    },
                    "Hemenway's Restaurant": {
                        address: "121 South Main St, Providence, RI",
                        mapUrl: "https://maps.google.com/?q=Hemenwaysrestaurant+121+South+Main+St+Providence+RI",
                        uberLocation: "Hemenwaysrestaurant%20121%20South%20Main%20St%20Providence%20RI",
                        menuUrl: "https://www.hemenwaysrestaurant.com/menu/"
                    },
                    "Massimo Restaurant": {
                        address: "134 Atwells Ave, Federal Hill, RI",
                        mapUrl: "https://maps.google.com/?q=Massimo+Restaurant+134+Atwells+Ave+Providence+RI",
                        uberLocation: "Massimo%20Restaurant%20134%20Atwells%20Ave%20Providence%20RI",
                        menuUrl: "https://massimori.com/menu/"
                    },
                    "CAV Providence": {
                        address: "14 Imperial Pl, Providence, RI",
                        mapUrl: "https://maps.google.com/?q=CAV+Restaurant+14+Imperial+Pl+Providence+RI",
                        uberLocation: "CAV%20Restaurant%2014%20Imperial%20Pl%20Providence%20RI",
                        menuUrl: "https://cavrestaurant.com/providence-jewelry-district-cav-providence-food-menu"
                    },
                    "Wine & Brine Cruise": {
                        address: "Providence Harbor, RI",
                        mapUrl: "https://maps.google.com/?q=Providence+Harbor+Providence+RI",
                        uberLocation: "Providence%20Harbor%20Providence%20RI",
                        website: "https://providenceriverboat.com/"
                    },
                    "Twilight River Cruise": {
                        address: "Providence Harbor, RI", 
                        mapUrl: "https://maps.google.com/?q=Providence+Harbor+Providence+RI",
                        uberLocation: "Providence%20Harbor%20Providence%20RI",
                        website: "https://providenceriverboat.com/"
                    },
                    "Private Charter": {
                        address: "Providence Harbor, RI",
                        mapUrl: "https://maps.google.com/?q=Providence+Harbor+Providence+RI", 
                        uberLocation: "Providence%20Harbor%20Providence%20RI",
                        website: "https://providenceriverboat.com/"
                    },
                    "RISD Museum": {
                        address: "20 N Main St, Providence, RI",
                        mapUrl: "https://maps.google.com/?q=RISD+Museum+20+N+Main+St+Providence+RI",
                        uberLocation: "RISD%20Museum%2020%20N%20Main%20St%20Providence%20RI",
                        website: "https://risdmuseum.org/"
                    },
                    "Providence Athenaeum": {
                        address: "251 Benefit St, Providence, RI",
                        mapUrl: "https://maps.google.com/?q=Providence+Athenaeum+251+Benefit+St+Providence+RI",
                        uberLocation: "Providence%20Athenaeum%20251%20Benefit%20St%20Providence%20RI",
                        website: "https://providenceathenaeum.org/"
                    },
                    "Roger Williams Park": {
                        address: "1000 Elmwood Ave, Providence, RI",
                        mapUrl: "https://maps.google.com/?q=Roger+Williams+Park+1000+Elmwood+Ave+Providence+RI",
                        uberLocation: "Roger%20Williams%20Park%201000%20Elmwood%20Ave%20Providence%20RI",
                        website: "https://www.providenceri.gov/parks/"
                    },
                    "WaterFire": {
                        address: "Downtown Providence Rivers, RI",
                        mapUrl: "https://maps.google.com/?q=WaterFire+Providence+RI",
                        uberLocation: "WaterFire%20Providence%20RI",
                        website: "https://waterfire.org/"
                    },
                    "The Boombox": {
                        address: "11 Dorrance St (Neptune Hotel), RI",
                        mapUrl: "https://maps.google.com/?q=The+Graduate+Providence+11+Dorrance+St+Providence+RI",
                        uberLocation: "The%20Graduate%20Providence%2011%20Dorrance%20St%20Providence%20RI",
                        website: "https://www.graduatehotels.com/providence/"
                    }
                };
                
                return locationData[title] || {
                    address: "Providence, RI",
                    mapUrl: `https://maps.google.com/?q=${encodeURIComponent(title + ' Providence RI')}`,
                    uberLocation: encodeURIComponent(title + ' Providence RI'),
                    website: null
                };
            };
            
            const locationData = getLocationData(item.title);
            const uberUrl = `https://m.uber.com/looking?pickup=my_location&dropoff[formatted_address]=${locationData.uberLocation}`;
            
            // Enhanced action buttons for all cards
            let actionButtons = `
                <div class="grid grid-cols-2 gap-2 mt-4">
                    <a href="${locationData.mapUrl}" target="_blank" 
                       class="bg-[#433A3F] text-white px-3 py-2 rounded-lg text-sm text-center hover:bg-black transition-colors flex items-center justify-center">
                        <span class="mr-1">📍</span> Directions
                    </a>
                    <a href="${uberUrl}" target="_blank" 
                       class="bg-green-600 text-white px-3 py-2 rounded-lg text-sm text-center hover:bg-green-700 transition-colors flex items-center justify-center">
                        <span class="mr-1">🚗</span> Uber
                    </a>
            `;
            
            // Add category-specific buttons in second row
            if (item.category === 'Dining' && locationData.menuUrl) {
                actionButtons += `
                    <a href="${locationData.menuUrl}" target="_blank" 
                       class="bg-[#C07F63] text-white px-3 py-2 rounded-lg text-sm text-center hover:bg-[#A9684C] transition-colors flex items-center justify-center col-span-2">
                        <span class="mr-1">🍽️</span> View Menu
                    </a>
                `;
            } else if (locationData.website) {
                actionButtons += `
                    <a href="${locationData.website}" target="_blank" 
                       class="bg-[#C07F63] text-white px-3 py-2 rounded-lg text-sm text-center hover:bg-[#A9684C] transition-colors flex items-center justify-center col-span-2">
                        <span class="mr-1">🌐</span> Visit Website
                    </a>
                `;
            } else {
                actionButtons += `
                    <button onclick="focusMapLocation('${item.title.toLowerCase().replace(/[^a-z0-9]/g, '-')}')" 
                            class="bg-[#C07F63] text-white px-3 py-2 rounded-lg text-sm text-center hover:bg-[#A9684C] transition-colors flex items-center justify-center col-span-2">
                        <span class="mr-1">🗺️</span> Show on Map
                    </button>
                `;
            }
            
            actionButtons += '</div>';
            
            return `
                <div class="card bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 border border-gray-100" data-category="${item.category}">
                    <div class="p-6">
                        <div class="flex items-start mb-4">
                            <div class="text-4xl mr-4 flex-shrink-0">${item.icon}</div>
                            <div class="flex-1">
                                <h3 class="text-xl font-bold font-display text-[#433A3F] mb-1">${item.title}</h3>
                                <p class="text-sm text-[#C07F63] font-medium mb-1">${item.category}</p>
                                <p class="text-xs text-gray-500">${locationData.address}</p>
                            </div>
                        </div>
                        <p class="text-[#433A3F]/80 mb-4 line-clamp-3">${item.desc}</p>
                        <div class="bg-[#EAE0D5] rounded-lg px-3 py-2 mb-4">
                            <div class="text-sm font-semibold text-[#433A3F]">${item.keyInfo}</div>
                        </div>
                        ${actionButtons}
                    </div>
                </div>
            `;
        }).join('');
    }

    function renderAccordion() {
        accordionContainer.innerHTML = AppData.plan.map((item, index) => `
            <div class="accordion-item bg-white rounded-lg shadow-sm">
                <h2>
                    <button type="button" class="flex items-center justify-between w-full p-5 font-medium text-left text-gray-700" data-accordion-target="#accordion-body-${index}" aria-expanded="${index === 0 ? 'true' : 'false'}">
                        <span class="text-lg font-display">${item.title}</span>
                        <svg class="w-6 h-6 shrink-0 transition-transform duration-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                    </button>
                </h2>
                <div id="accordion-body-${index}" class="${index === 0 ? '' : 'hidden'} p-5 border-t border-gray-200">
                    <p class="text-gray-600">${item.content}</p>
                </div>
            </div>
        `).join('');
    }

    // Enhanced Photo upload functionality
    function setupPhotoUpload(dayNumber) {
        console.log(`Setting up photo upload for day ${dayNumber}`);
        
        const uploadInput = document.getElementById(`photo-upload-${dayNumber}`);
        const gallery = document.getElementById(`photo-gallery-${dayNumber}`);
        const emptyState = document.getElementById(`empty-state-${dayNumber}`);
        const photoCount = document.getElementById(`photo-count-${dayNumber}`);

        // Check if all elements exist
        if (!uploadInput || !gallery || !emptyState || !photoCount) {
            console.error(`Missing photo upload elements for day ${dayNumber}:`, {
                uploadInput: !!uploadInput,
                gallery: !!gallery,
                emptyState: !!emptyState,
                photoCount: !!photoCount
            });
            return;
        }

        // Setup drag and drop
        const uploadZone = uploadInput.parentElement.querySelector('.upload-zone');
        if (!uploadZone) {
            console.error(`Upload zone not found for day ${dayNumber}`);
            return;
        }
        
        // Prevent default drag behaviors
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadZone.addEventListener(eventName, preventDefaults, false);
            document.body.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        // Highlight drop zone when item is dragged over it
        ['dragenter', 'dragover'].forEach(eventName => {
            uploadZone.addEventListener(eventName, () => {
                uploadZone.classList.add('border-[#C07F63]', 'bg-[#C07F63]/10');
            }, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            uploadZone.addEventListener(eventName, () => {
                uploadZone.classList.remove('border-[#C07F63]', 'bg-[#C07F63]/10');
            }, false);
        });
        
        // Handle dropped files
        uploadZone.addEventListener('drop', (e) => {
            const dt = e.dataTransfer;
            const files = Array.from(dt.files);
            console.log(`Files dropped for day ${dayNumber}:`, files);
            handleFiles(files, dayNumber);
        }, false);

        // Handle file input change
        uploadInput.addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            console.log(`Files selected for day ${dayNumber}:`, files);
            handleFiles(files, dayNumber);
        });
        
        // Make upload zone clickable
        uploadZone.addEventListener('click', () => {
            uploadInput.click();
        });
        
        // Initial render
        updatePhotoDisplay(dayNumber);
        console.log(`Photo upload setup complete for day ${dayNumber}`);
    }

    function handleFiles(files, dayNumber) {
        console.log(`Handling ${files.length} files for day ${dayNumber}`);
        
        if (files.length === 0) {
            console.log('No files to handle');
            return;
        }

        // Show loading indicator
        const photoCount = document.getElementById(`photo-count-${dayNumber}`);
        if (photoCount) {
            photoCount.textContent = `Uploading ${files.length} photo${files.length !== 1 ? 's' : ''}...`;
            photoCount.classList.add('text-blue-500');
        }

        let uploadedCount = 0;
        const totalFiles = files.filter(file => file.type.startsWith('image/')).length;

        files.forEach((file, index) => {
            console.log(`Processing file ${index + 1}:`, file.name, file.type, file.size);
            
            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    console.log(`File ${file.name} loaded successfully`);
                    
                    const photoData = {
                        id: Date.now() + Math.random(),
                        src: e.target.result,
                        name: file.name,
                        uploadDate: new Date().toISOString()
                    };
                    
                    // Ensure photoStorage[dayNumber] exists and is an array
                    if (!photoStorage[dayNumber]) {
                        photoStorage[dayNumber] = [];
                    }
                    
                    photoStorage[dayNumber].push(photoData);
                    uploadedCount++;
                    
                    console.log(`Photo added to storage for day ${dayNumber}. Total photos:`, photoStorage[dayNumber].length);
                    
                    savePhotosToStorage();
                    updatePhotoDisplay(dayNumber);

                    // Show success feedback for final upload
                    if (uploadedCount === totalFiles) {
                        showSuccessMessage(`${totalFiles} photo${totalFiles !== 1 ? 's' : ''} uploaded successfully!`);
                    }
                };
                
                reader.onerror = (e) => {
                    console.error(`Error reading file ${file.name}:`, e);
                    showErrorMessage(`Failed to upload ${file.name}`);
                    
                    uploadedCount++;
                    if (uploadedCount === totalFiles) {
                        updatePhotoDisplay(dayNumber);
                    }
                };
                
                reader.readAsDataURL(file);
            } else {
                console.warn(`File ${file.name} is not an image (${file.type}). Skipping.`);
                showErrorMessage(`${file.name} is not a valid image file`);
            }
        });
    }

    // Show success message to user
    function showSuccessMessage(message) {
        const successDiv = document.createElement('div');
        successDiv.className = 'fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center';
        successDiv.innerHTML = `
            <span class="mr-2">✅</span>
            <span>${message}</span>
        `;
        document.body.appendChild(successDiv);
        
        // Remove after 3 seconds
        setTimeout(() => {
            successDiv.remove();
        }, 3000);
    }

    function updatePhotoDisplay(dayNumber) {
        console.log(`Updating photo display for day ${dayNumber}`);
        
        const gallery = document.getElementById(`photo-gallery-${dayNumber}`);
        const emptyState = document.getElementById(`empty-state-${dayNumber}`);
        const photoCount = document.getElementById(`photo-count-${dayNumber}`);
        
        if (!gallery || !emptyState || !photoCount) {
            console.error(`Missing photo display elements for day ${dayNumber}:`, {
                gallery: !!gallery,
                emptyState: !!emptyState,
                photoCount: !!photoCount
            });
            return;
        }
        
        const photos = photoStorage[dayNumber] || [];
        console.log(`Found ${photos.length} photos for day ${dayNumber}`);

        // Reset loading state and update photo count
        photoCount.classList.remove('text-blue-500');
        photoCount.textContent = `${photos.length} photo${photos.length !== 1 ? 's' : ''}`;

        if (photos.length === 0) {
            gallery.classList.add('hidden');
            emptyState.classList.remove('hidden');
            console.log(`Showing empty state for day ${dayNumber}`);
        } else {
            gallery.classList.remove('hidden');
            emptyState.classList.add('hidden');
            
            gallery.innerHTML = photos.map(photo => `
                <div class="relative group">
                    <img src="${photo.src}" alt="${photo.name}" class="w-full h-32 object-cover rounded-xl shadow-sm" loading="lazy">
                    <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 rounded-xl flex items-center justify-center">
                        <button 
                            onclick="removePhoto(${dayNumber}, '${photo.id}')" 
                            class="bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 text-sm font-bold opacity-0 group-hover:opacity-100 transition-all duration-300 shadow-lg"
                            title="Remove photo"
                            aria-label="Remove photo ${photo.name}"
                        >×</button>
                    </div>
                    <div class="absolute bottom-2 left-2 right-2">
                        <div class="bg-black/60 text-white text-xs px-2 py-1 rounded backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                            ${photo.name.length > 20 ? photo.name.substring(0, 20) + '...' : photo.name}
                        </div>
                    </div>
                </div>
            `).join('');
            
            console.log(`Gallery updated with ${photos.length} photos for day ${dayNumber}`);
        }
    }

    // Make removePhoto function global
    window.removePhoto = (dayNumber, photoId) => {
        console.log(`Removing photo ${photoId} from day ${dayNumber}`);
        
        if (!photoStorage[dayNumber]) {
            console.error(`No photos found for day ${dayNumber}`);
            return;
        }
        
        const initialCount = photoStorage[dayNumber].length;
        photoStorage[dayNumber] = photoStorage[dayNumber].filter(photo => photo.id != photoId);
        const finalCount = photoStorage[dayNumber].length;
        
        if (initialCount === finalCount) {
            console.warn(`Photo ${photoId} not found in day ${dayNumber} storage`);
            return;
        }
        
        console.log(`Photo removed. Remaining photos for day ${dayNumber}: ${finalCount}`);
        savePhotosToStorage();
        updatePhotoDisplay(dayNumber);
    };

    // Enhanced Notes functionality
    function setupNotes(dayNumber) {
        const textarea = document.getElementById(`notes-text-${dayNumber}`);
        const charCount = document.getElementById(`char-count-${dayNumber}`);
        const saveBtn = document.getElementById(`save-notes-${dayNumber}`);
        const saveStatus = document.getElementById(`save-status-${dayNumber}`);

        // Load saved notes
        const savedNotes = localStorage.getItem(`anniversary-notes-${dayNumber}`);
        if (savedNotes) {
            textarea.value = savedNotes;
            updateCharCount(dayNumber);
        }

        // Auto-save functionality
        let saveTimeout;
        textarea.addEventListener('input', () => {
            updateCharCount(dayNumber);
            
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
                autoSaveNotes(dayNumber);
            }, 1000); // Auto-save after 1 second of no typing
        });

        // Manual save
        saveBtn.addEventListener('click', () => {
            saveNotes(dayNumber);
        });

        // Quick note buttons
        document.querySelectorAll(`#notes${dayNumber} .quick-note-btn`).forEach(btn => {
            btn.addEventListener('click', () => {
                const text = btn.dataset.text;
                const currentText = textarea.value;
                const newText = currentText ? currentText + '\n\n' + text : text;
                textarea.value = newText;
                updateCharCount(dayNumber);
                autoSaveNotes(dayNumber);
            });
        });
    }

    function updateCharCount(dayNumber) {
        const textarea = document.getElementById(`notes-text-${dayNumber}`);
        const charCount = document.getElementById(`char-count-${dayNumber}`);
        charCount.textContent = `${textarea.value.length} character${textarea.value.length !== 1 ? 's' : ''}`;
    }

    function autoSaveNotes(dayNumber) {
        const textarea = document.getElementById(`notes-text-${dayNumber}`);
        const saveStatus = document.getElementById(`save-status-${dayNumber}`);
        
        localStorage.setItem(`anniversary-notes-${dayNumber}`, textarea.value);
        
        // Show auto-save indicator
        saveStatus.classList.remove('opacity-0');
        setTimeout(() => {
            saveStatus.classList.add('opacity-0');
        }, 2000);
    }

    function saveNotes(dayNumber) {
        const textarea = document.getElementById(`notes-text-${dayNumber}`);
        const saveBtn = document.getElementById(`save-notes-${dayNumber}`);
        
        localStorage.setItem(`anniversary-notes-${dayNumber}`, textarea.value);
        
        // Visual feedback
        const originalContent = saveBtn.innerHTML;
        saveBtn.innerHTML = '<span class="mr-1">✅</span>Saved!';
        saveBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
        saveBtn.classList.add('bg-blue-500', 'hover:bg-blue-600');
        
        setTimeout(() => {
            saveBtn.innerHTML = originalContent;
            saveBtn.classList.remove('bg-blue-500', 'hover:bg-blue-600');
            saveBtn.classList.add('bg-green-500', 'hover:bg-green-600');
        }, 2000);
    }

    // Save photos to localStorage
    function savePhotosToStorage() {
        try {
            const photoData = JSON.stringify(photoStorage);
            localStorage.setItem('anniversary-photos', photoData);
            console.log('Photos saved to localStorage successfully');
        } catch (error) {
            console.error('Error saving photos to localStorage:', error);
            // Show user-friendly error message
            showErrorMessage('Unable to save photos. Your browser storage might be full.');
        }
    }

    // Load photos from localStorage
    function loadPhotosFromStorage() {
        try {
            const saved = localStorage.getItem('anniversary-photos');
            if (saved) {
                const parsed = JSON.parse(saved);
                console.log('Loading photos from localStorage:', parsed);
                
                // Ensure all day arrays exist
                for (let i = 1; i <= 4; i++) {
                    if (!parsed[i]) {
                        parsed[i] = [];
                    }
                }
                
                Object.assign(photoStorage, parsed);
                console.log('Photos loaded successfully:', photoStorage);
                
                // Update all photo displays
                for (let i = 1; i <= 4; i++) {
                    updatePhotoDisplay(i);
                }
            } else {
                console.log('No saved photos found');
            }
        } catch (error) {
            console.error('Error loading photos from localStorage:', error);
            // Initialize empty storage if loading fails
            for (let i = 1; i <= 4; i++) {
                photoStorage[i] = [];
            }
        }
    }

    // Show error message to user
    function showErrorMessage(message) {
        // Create a toast-style error message
        const errorDiv = document.createElement('div');
        errorDiv.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50';
        errorDiv.textContent = message;
        document.body.appendChild(errorDiv);
        
        // Remove after 5 seconds
        setTimeout(() => {
            errorDiv.remove();
        }, 5000);
    }
    
    // Initial renders
    console.log('About to call renderItinerary for day1');
    renderItinerary('day1');
    renderExploreCards();
    // renderAccordion(); // Removed - replaced with enhanced planning cards
    
    // Initialize dynamic itinerary management
    loadItinerary();
    
    // Initialize song memories
    loadSongMemories();
    updateMusicServiceStatus();
    
    // Song Memory Event Listeners
    document.getElementById('add-song-btn').addEventListener('click', openAddSongModal);
    document.getElementById('close-song-modal').addEventListener('click', closeAddSongModal);
    document.getElementById('cancel-song-modal').addEventListener('click', closeAddSongModal);
    document.getElementById('add-song-form').addEventListener('submit', handleAddSongSubmit);
    
    // Close song modal when clicking outside
    document.getElementById('add-song-modal').addEventListener('click', (e) => {
        if (e.target === e.currentTarget) {
            closeAddSongModal();
        }
    });
    
    // Event delegation for edit/delete song buttons and itinerary inline actions
    document.addEventListener('click', (e) => {
        // Song memory buttons
        if (e.target.matches('.edit-song-btn') || e.target.closest('.edit-song-btn')) {
            const btn = e.target.closest('.edit-song-btn');
            const index = parseInt(btn.dataset.songIndex);
            // TODO: Implement edit functionality
            showNotification('Edit functionality coming soon!', 'info');
        }
        
        if (e.target.matches('.delete-song-btn') || e.target.closest('.delete-song-btn')) {
            const btn = e.target.closest('.delete-song-btn');
            const index = parseInt(btn.dataset.songIndex);
            deleteSongMemory(index);
        }
        
        // Itinerary inline action buttons
        if (e.target.matches('.edit-item-btn') || e.target.closest('.edit-item-btn')) {
            const btn = e.target.closest('.edit-item-btn');
            const index = parseInt(btn.dataset.index);
            editItineraryItem(currentDay, index);
        }
        
        if (e.target.matches('.delete-item-btn') || e.target.closest('.delete-item-btn')) {
            const btn = e.target.closest('.delete-item-btn');
            const index = parseInt(btn.dataset.index);
            if (confirm('Are you sure you want to delete this activity?')) {
                deleteItineraryItem(currentDay, index);
                renderItinerary(currentDay);
                saveItinerary(); // Save after deletion
            }
        }
        
        if (e.target.matches('.move-up-btn') || e.target.closest('.move-up-btn')) {
            const btn = e.target.closest('.move-up-btn');
            const index = parseInt(btn.dataset.index);
            if (index > 0) {
                moveItineraryItem(currentDay, index, index - 1);
                renderItinerary(currentDay);
                saveItinerary(); // Save after reordering
            }
        }
        
        if (e.target.matches('.move-down-btn') || e.target.closest('.move-down-btn')) {
            const btn = e.target.closest('.move-down-btn');
            const index = parseInt(btn.dataset.index);
            const items = AppData.itinerary[currentDay];
            if (index < items.length - 1) {
                moveItineraryItem(currentDay, index, index + 1);
                renderItinerary(currentDay);
                saveItinerary(); // Save after reordering
            }
        }
        
        if (e.target.matches('.add-item-inline') || e.target.closest('.add-item-inline')) {
            openItineraryModal();
        }
    });
    
    // Connect music services button (placeholder)
    document.querySelector('.connect-services-btn').addEventListener('click', () => {
        showNotification('Music service integration coming soon! For now, you can add songs manually.', 'info');
    });
    
    // Dynamic Itinerary Management Event Listeners
    document.getElementById('add-item-btn').addEventListener('click', () => {
        openItineraryModal();
    });
    
    document.getElementById('toggle-edit-mode').addEventListener('click', toggleEditMode);
    
    document.getElementById('save-itinerary').addEventListener('click', saveItinerary);
    
    document.getElementById('reset-itinerary').addEventListener('click', resetItinerary);
    
    // Modal event listeners
    document.getElementById('close-modal').addEventListener('click', closeItineraryModal);
    document.getElementById('cancel-modal').addEventListener('click', closeItineraryModal);
    document.getElementById('itinerary-form').addEventListener('submit', handleItineraryFormSubmit);
    
    // Close modal when clicking outside
    document.getElementById('itinerary-modal').addEventListener('click', (e) => {
        if (e.target === e.currentTarget) {
            closeItineraryModal();
        }
    });
    
    // Icon selector functionality
    document.querySelectorAll('.icon-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            // Remove active class from all icon buttons
            document.querySelectorAll('.icon-btn').forEach(b => {
                b.classList.remove('active');
            });
            
            // Add active class to clicked button
            btn.classList.add('active');
            
            // Set the icon in the input
            document.getElementById('activity-icon').value = btn.dataset.icon;
        });
    });
    
    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            if (!document.getElementById('itinerary-modal').classList.contains('hidden')) {
                closeItineraryModal();
            }
            if (!document.getElementById('add-song-modal').classList.contains('hidden')) {
                closeAddSongModal();
            }
        }
    });
    
    // Wait for DOM to be fully ready before setting up photo uploads
    setTimeout(() => {
        console.log('Setting up photo uploads and notes for all days...');
        
        // Setup notes and photos for each day
        for (let i = 1; i <= 4; i++) {
            setupPhotoUpload(i);
            setupNotes(i);
        }
        
        // Load saved photos after setup is complete
        loadPhotosFromStorage();
        
        console.log('Photo upload setup complete for all days');
    }, 100);
    
    // Event Listeners for itinerary tabs
    document.querySelector('.tab-btn[data-tab="day1"]').classList.add('active-tab');
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active-tab', 'text-[#C07F63]'));
            btn.classList.add('active-tab');
            renderItinerary(btn.dataset.tab);
        });
    });

    // Enhanced Event Listeners for notes tabs
    document.querySelectorAll('.notes-tab-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            // Remove active class from all notes tabs
            document.querySelectorAll('.notes-tab-btn').forEach(b => {
                b.classList.remove('active-tab', 'bg-[#C07F63]', 'text-white', 'shadow-lg');
                b.classList.add('text-[#433A3F]/70', 'hover:text-[#C07F63]', 'hover:bg-white/50');
            });
            
            // Add active class to clicked tab
            btn.classList.add('active-tab', 'bg-[#C07F63]', 'text-white', 'shadow-lg');
            btn.classList.remove('text-[#433A3F]/70', 'hover:text-[#C07F63]', 'hover:bg-white/50');
            
            // Hide all notes content
            document.querySelectorAll('.notes-day-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Show selected notes content with animation
            const targetContent = document.getElementById(btn.dataset.notesTab);
            if (targetContent) {
                targetContent.classList.remove('hidden');
                // Add fade-in animation
                targetContent.style.opacity = '0';
                requestAnimationFrame(() => {
                    targetContent.style.transition = 'opacity 0.3s ease-in-out';
                    targetContent.style.opacity = '1';
                });
            }
        });
    });

    document.querySelectorAll('.btn-filter').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.btn-filter').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderExploreCards(btn.dataset.filter);
        });
    });

    // accordionContainer.addEventListener('click', (e) => {
    //     const button = e.target.closest('button[data-accordion-target]');
    //     if (button) {
    //         const targetId = button.getAttribute('data-accordion-target');
    //         const body = document.querySelector(targetId);
    //         const isExpanded = button.getAttribute('aria-expanded') === 'true';

    //         button.setAttribute('aria-expanded', !isExpanded);
    //         body.classList.toggle('hidden');
    //         button.querySelector('svg').classList.toggle('rotate-180');
    //     }
    // }); // Commented out - replaced with enhanced planning cards

    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    menuBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Image Modal Functions
    window.openModal = (imageSrc, imageAlt) => {
        const modal = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        
        modalImage.src = imageSrc;
        modalImage.alt = imageAlt;
        modal.classList.add('show');
        
        // Prevent body scroll when modal is open
        document.body.style.overflow = 'hidden';
    };

    window.closeModal = () => {
        const modal = document.getElementById('imageModal');
        modal.classList.remove('show');
        
        // Restore body scroll
        document.body.style.overflow = 'auto';
    };

    // Close modal when clicking outside the image
    document.getElementById('imageModal').addEventListener('click', (e) => {
        if (e.target === e.currentTarget) {
            closeModal();
        }
    });

    // Close modal with Escape key
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
            closeModal();
        }
    });
    
    // Charts
    const diningCtx = document.getElementById('diningChart').getContext('2d');
    new Chart(diningCtx, {
        type: 'bar',
        data: {
            labels: ['Massimo', 'CAV', 'Hemenway\'s', 'Gracie\'s'],
            datasets: [{
                label: 'Estimated Cost per Person ($)',
                data: [75, 85, 120, 150],
                backgroundColor: ['#EAE0D5', '#D6C6B3', '#C07F63', '#A9684C'],
                borderColor: '#FDF8F0',
                borderWidth: 2
            }]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return `Est. $${context.raw}`;
                        }
                    }
                }
            },
            scales: {
                x: {
                    grid: { color: '#EAE0D5' },
                    ticks: {
                         font: { family: "'Roboto', sans-serif" }
                    }
                },
                y: {
                     grid: { display: false },
                     ticks: {
                         font: { family: "'Roboto', sans-serif", size: 14 }
                    }
                }
            }
        }
    });

    // Restaurant Week Functionality
    
    // Restaurant search functionality (enhanced)
    const restaurantSearch = document.getElementById('restaurant-search');
    if (restaurantSearch) {
        restaurantSearch.addEventListener('input', (e) => {
            applyAllFilters();
        });
    }

    // Restaurant filter buttons (enhanced)
    document.querySelectorAll('.restaurant-filter').forEach(btn => {
        btn.addEventListener('click', () => {
            // Update active filter button
            document.querySelectorAll('.restaurant-filter').forEach(b => {
                b.classList.remove('active', 'bg-[#C07F63]', 'text-white');
                b.classList.add('bg-white/70', 'text-[#433A3F]');
            });
            btn.classList.add('active', 'bg-[#C07F63]', 'text-white');
            btn.classList.remove('bg-white/70', 'text-[#433A3F]');
            
            // Update current filter and apply all filters
            currentFilters.category = btn.dataset.category;
            applyAllFilters();
        });
    });

    // Comparison table filter buttons
    document.querySelectorAll('.comparison-filter').forEach(btn => {
        btn.addEventListener('click', () => {
            // Update active comparison filter button
            document.querySelectorAll('.comparison-filter').forEach(b => {
                b.classList.remove('active', 'bg-[#C07F63]', 'text-white');
                b.classList.add('bg-white', 'text-[#433A3F]');
            });
            btn.classList.add('active', 'bg-[#C07F63]', 'text-white');
            btn.classList.remove('bg-white', 'text-[#433A3F]');
            
            // Sort or filter comparison table
            const sortType = btn.dataset.sort;
            sortComparisonTable(sortType);
        });
    });

    function filterRestaurants(searchTerm) {
        const restaurantCards = document.querySelectorAll('.restaurant-card');
        const restaurantRows = document.querySelectorAll('.restaurant-comparison-row');
        
        // Filter restaurant cards
        restaurantCards.forEach(card => {
            const restaurantName = card.querySelector('h5').textContent.toLowerCase();
            const cuisineType = card.textContent.toLowerCase();
            
            if (restaurantName.includes(searchTerm) || cuisineType.includes(searchTerm)) {
                card.style.display = 'block';
                card.parentElement.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
        
        // Filter comparison table rows
        restaurantRows.forEach(row => {
            const restaurantName = row.querySelector('td').textContent.toLowerCase();
            const rowContent = row.textContent.toLowerCase();
            
            if (restaurantName.includes(searchTerm) || rowContent.includes(searchTerm)) {
                row.style.display = 'table-row';
            } else {
                row.style.display = 'none';
            }
        });
        
        // Hide empty categories
        const categories = document.querySelectorAll('.restaurant-category');
        categories.forEach(category => {
            const visibleCards = category.querySelectorAll('.restaurant-card[style="display: block"], .restaurant-card:not([style*="display: none"])');
            if (visibleCards.length === 0) {
                category.style.display = 'none';
            } else {
                category.style.display = 'block';
            }
        });
    }

    function filterRestaurantsByCategory(category) {
        const restaurantCards = document.querySelectorAll('.restaurant-card');
        const restaurantRows = document.querySelectorAll('.restaurant-comparison-row');
        const categories = document.querySelectorAll('.restaurant-category');
        
        // Clear search if active
        if (restaurantSearch) {
            restaurantSearch.value = '';
        }
        
        if (category === 'all') {
            // Show all restaurants
            restaurantCards.forEach(card => {
                card.style.display = 'block';
            });
            restaurantRows.forEach(row => {
                row.style.display = 'table-row';
            });
            categories.forEach(cat => {
                cat.style.display = 'block';
            });
        } else if (category === 'romantic') {
            // Show only romantic restaurants
            restaurantCards.forEach(card => {
                const categories = card.dataset.categories || '';
                if (categories.includes('romantic') || categories.includes('premium')) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
            restaurantRows.forEach(row => {
                const categories = row.dataset.categories || '';
                if (categories.includes('romantic') || categories.includes('premium')) {
                    row.style.display = 'table-row';
                } else {
                    row.style.display = 'none';
                }
            });
        } else {
            // Show restaurants matching specific category
            restaurantCards.forEach(card => {
                const categories = card.dataset.categories || '';
                if (categories.includes(category)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
            restaurantRows.forEach(row => {
                const categories = row.dataset.categories || '';
                if (categories.includes(category)) {
                    row.style.display = 'table-row';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        // Hide empty categories
        categories.forEach(categoryDiv => {
            const visibleCards = categoryDiv.querySelectorAll('.restaurant-card[style="display: block"], .restaurant-card:not([style*="display: none"])');
            if (visibleCards.length === 0 && category !== 'all') {
                categoryDiv.style.display = 'none';
            } else {
                categoryDiv.style.display = 'block';
            }
        });
    }

    function sortComparisonTable(sortType) {
        const tbody = document.querySelector('.restaurant-comparison-row').parentElement;
        const rows = Array.from(document.querySelectorAll('.restaurant-comparison-row'));
        
        if (sortType === 'all') {
            // Show all rows in original order
            rows.forEach(row => row.style.display = 'table-row');
        } else if (sortType === 'romantic') {
            // Show only romantic restaurants
            rows.forEach(row => {
                const categories = row.dataset.categories || '';
                if (categories.includes('romantic') || categories.includes('premium')) {
                    row.style.display = 'table-row';
                } else {
                    row.style.display = 'none';
                }
            });
        } else if (sortType === 'price-low' || sortType === 'price-high') {
            // Sort by price
            const sortedRows = rows.sort((a, b) => {
                const priceA = parseFloat(a.querySelector('td:nth-child(2) .font-semibold').textContent.replace(/[^0-9.]/g, '')) || 0;
                const priceB = parseFloat(b.querySelector('td:nth-child(2) .font-semibold').textContent.replace(/[^0-9.]/g, '')) || 0;
                
                return sortType === 'price-low' ? priceA - priceB : priceB - priceA;
            });
            
            // Re-append sorted rows
            sortedRows.forEach(row => {
                tbody.appendChild(row);
                row.style.display = 'table-row';
            });
        }
    }

    // Add floating hearts when clicking restaurant cards
    document.addEventListener('click', (e) => {
        if (e.target.closest('.restaurant-card')) {
            createFloatingHeart(e.clientX, e.clientY);
        }
    });

    // Add anniversary celebration effect
    function createAnniversarySparkle(x, y) {
        const sparkle = document.createElement('div');
        sparkle.className = 'floating-heart';
        sparkle.innerHTML = '✨';
        sparkle.style.left = x + 'px';
        sparkle.style.top = y + 'px';
        sparkle.style.color = '#FFD700';
        sparkle.style.fontSize = '20px';
        sparkle.style.pointerEvents = 'none';
        sparkle.style.zIndex = '9999';
        
        document.body.appendChild(sparkle);
        
        setTimeout(() => sparkle.remove(), 2000);
    }

    // Add sparkles when hovering over romantic restaurants
    document.querySelectorAll('[data-categories*="romantic"]').forEach(card => {
        card.addEventListener('mouseenter', (e) => {
            if (Math.random() < 0.3) { // 30% chance
                const rect = card.getBoundingClientRect();
                createAnniversarySparkle(
                    rect.left + Math.random() * rect.width,
                    rect.top + Math.random() * rect.height
                );
            }
        });
    });

    // Enhanced Restaurant Filtering & Sorting System
    let currentFilters = {
        category: 'all',
        dietary: [],
        ambiance: 'all',
        sort: 'featured'
    };

    // Initialize enhanced filtering
    function initializeEnhancedFiltering() {
        // Dietary filters
        document.querySelectorAll('.dietary-filter').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                updateDietaryFilters();
            });
        });

        // Ambiance filter
        const ambianceFilter = document.getElementById('ambiance-filter');
        if (ambianceFilter) {
            ambianceFilter.addEventListener('change', function() {
                currentFilters.ambiance = this.value;
                applyAllFilters();
            });
        }

        // Sort dropdown
        const sortDropdown = document.getElementById('restaurant-sort');
        if (sortDropdown) {
            sortDropdown.addEventListener('change', function() {
                currentFilters.sort = this.value;
                applyAllFilters();
            });
        }

        // Clear filters button
        const clearButton = document.getElementById('clear-filters');
        if (clearButton) {
            clearButton.addEventListener('click', function() {
                clearAllFilters();
            });
        }
    }

    function updateDietaryFilters() {
        currentFilters.dietary = [];
        document.querySelectorAll('.dietary-filter:checked').forEach(checkbox => {
            currentFilters.dietary.push(checkbox.dataset.diet);
        });
        applyAllFilters();
    }

    function clearAllFilters() {
        // Reset category filter
        currentFilters.category = 'all';
        document.querySelectorAll('.restaurant-filter').forEach(btn => {
            btn.classList.remove('active', 'bg-[#C07F63]', 'text-white');
            btn.classList.add('bg-white/70', 'text-[#433A3F]');
        });
        document.querySelector('.restaurant-filter[data-category="all"]').classList.add('active', 'bg-[#C07F63]', 'text-white');

        // Reset dietary filters
        currentFilters.dietary = [];
        document.querySelectorAll('.dietary-filter').forEach(checkbox => {
            checkbox.checked = false;
        });

        // Reset ambiance and sort
        currentFilters.ambiance = 'all';
        currentFilters.sort = 'featured';
        document.getElementById('ambiance-filter').value = 'all';
        document.getElementById('restaurant-sort').value = 'featured';

        // Clear search
        const searchInput = document.getElementById('restaurant-search');
        if (searchInput) searchInput.value = '';

        // Apply filters
        applyAllFilters();
    }

    function applyAllFilters() {
        const restaurantCards = document.querySelectorAll('.restaurant-card');
        const categories = document.querySelectorAll('.restaurant-category');
        let visibleCount = 0;

        // Get search term
        const searchInput = document.getElementById('restaurant-search');
        const searchTerm = searchInput ? searchInput.value.toLowerCase() : '';

        // Filter and collect visible restaurants
        let visibleRestaurants = [];

        restaurantCards.forEach(card => {
            const isVisible = shouldShowRestaurant(card, searchTerm);
            if (isVisible) {
                visibleRestaurants.push(card);
                visibleCount++;
            }
            card.style.display = isVisible ? 'block' : 'none';
        });

        // Sort visible restaurants
        if (currentFilters.sort !== 'featured') {
            sortRestaurants(visibleRestaurants, currentFilters.sort);
        }

        // Hide empty categories
        categories.forEach(category => {
            const visibleCards = category.querySelectorAll('.restaurant-card[style="display: block"], .restaurant-card:not([style*="display: none"])');
            category.style.display = visibleCards.length > 0 ? 'block' : 'none';
        });

        // Update filter summary
        updateFilterSummary(visibleCount);
    }

    function shouldShowRestaurant(card, searchTerm) {
        // Search filter
        if (searchTerm) {
            const cardText = card.textContent.toLowerCase();
            if (!cardText.includes(searchTerm)) {
                return false;
            }
        }

        // Category filter
        if (currentFilters.category !== 'all') {
            const categories = card.dataset.categories || '';
            if (!categories.includes(currentFilters.category)) {
                return false;
            }
        }

        // Dietary filters
        if (currentFilters.dietary.length > 0) {
            const hasAnyDietary = currentFilters.dietary.some(diet => {
                return checkDietaryOption(card, diet);
            });
            if (!hasAnyDietary) {
                return false;
            }
        }

        // Ambiance filter
        if (currentFilters.ambiance !== 'all') {
            if (!checkAmbianceMatch(card, currentFilters.ambiance)) {
                return false;
            }
        }

        return true;
    }

    function checkDietaryOption(card, diet) {
        const cardText = card.textContent.toLowerCase();
        const dietaryInfo = card.querySelector('.dietary-info')?.textContent.toLowerCase() || '';
        
        switch (diet) {
            case 'vegetarian':
                return cardText.includes('vegetarian') || cardText.includes('plant-based') || dietaryInfo.includes('vegetarian');
            case 'gluten-free':
                return cardText.includes('gluten-free') || cardText.includes('gluten free') || dietaryInfo.includes('gluten-free');
            case 'vegan':
                return cardText.includes('vegan') || dietaryInfo.includes('vegan');
            default:
                return false;
        }
    }

    function checkAmbianceMatch(card, ambiance) {
        const categories = card.dataset.categories || '';
        const cardText = card.textContent.toLowerCase();
        
        switch (ambiance) {
            case 'intimate':
                return categories.includes('romantic') || cardText.includes('intimate') || cardText.includes('romantic');
            case 'upscale':
                return categories.includes('premium') || cardText.includes('upscale') || cardText.includes('fine dining');
            case 'casual':
                return categories.includes('moderate') || cardText.includes('casual') || cardText.includes('relaxed');
            case 'waterfront':
                return cardText.includes('waterfront') || cardText.includes('harbor') || cardText.includes('water');
            case 'historic':
                return cardText.includes('historic') || cardText.includes('heritage') || cardText.includes('1800s');
            default:
                return true;
        }
    }

    function sortRestaurants(restaurants, sortType) {
        const parent = restaurants[0]?.parentElement;
        if (!parent) return;

        restaurants.sort((a, b) => {
            switch (sortType) {
                case 'price-low':
                    return getPriceValue(a) - getPriceValue(b);
                case 'price-high':
                    return getPriceValue(b) - getPriceValue(a);
                case 'romance':
                    return getRomanceScore(b) - getRomanceScore(a);
                case 'alphabet':
                    return getRestaurantName(a).localeCompare(getRestaurantName(b));
                default:
                    return 0;
            }
        });

        // Reorder DOM elements
        restaurants.forEach(restaurant => {
            parent.appendChild(restaurant);
        });
    }

    function getPriceValue(card) {
        const text = card.textContent;
        if (text.includes('$55+') || text.includes('$59.99') || text.includes('Premium')) return 60;
        if (text.includes('$45') || text.includes('$49.99')) return 50;
        if (text.includes('$35') || text.includes('$39.99')) return 40;
        if (text.includes('$30')) return 30;
        return 45; // default
    }

    function getRomanceScore(card) {
        const categories = card.dataset.categories || '';
        const text = card.textContent.toLowerCase();
        let score = 0;
        
        if (categories.includes('romantic')) score += 10;
        if (categories.includes('premium')) score += 8;
        if (text.includes('intimate')) score += 5;
        if (text.includes('waterfront')) score += 3;
        if (text.includes('anniversary')) score += 7;
        
        return score;
    }

    function getRestaurantName(card) {
        return card.querySelector('h5')?.textContent || '';
    }

    function updateFilterSummary(count) {
        const summary = document.getElementById('filter-summary');
        if (!summary) return;

        let text = `Showing ${count} restaurant${count !== 1 ? 's' : ''}`;
        
        const activeFilters = [];
        if (currentFilters.category !== 'all') activeFilters.push(currentFilters.category);
        if (currentFilters.dietary.length > 0) activeFilters.push(`${currentFilters.dietary.length} dietary option${currentFilters.dietary.length > 1 ? 's' : ''}`);
        if (currentFilters.ambiance !== 'all') activeFilters.push(currentFilters.ambiance);

        if (activeFilters.length > 0) {
            text += ` with filters: ${activeFilters.join(', ')}`;
        }

        summary.textContent = text;
    }

    // Initialize enhanced filtering when page loads
    document.addEventListener('DOMContentLoaded', function() {
        setTimeout(initializeEnhancedFiltering, 100);
    });

    // Show special anniversary message when Gracie's is clicked
    document.addEventListener('click', (e) => {
        const graciesCard = e.target.closest('[data-categories*="premium"]:has([href*="graciesprov"])');
        if (graciesCard) {
            showLoveNote("Perfect choice for our anniversary dinner! Gracie's is known for creating magical moments for couples. 💕");
        }
    });

    // Budget Calculator Functions
    function calculateBudget() {
        const days = parseInt(document.getElementById('calc-days').value);
        const style = document.getElementById('calc-style').value;
        const drinks = document.getElementById('calc-drinks').value;
        const appetizers = document.getElementById('calc-appetizers').checked;
        const desserts = document.getElementById('calc-desserts').checked;
        const anniversary = document.getElementById('calc-anniversary').checked;

        // Base meal costs per person per meal
        const mealCosts = {
            conservative: 70,  // $60-80 average
            romantic: 125,     // $100-150 average  
            luxury: 175        // $150-200 average
        };

        // Drink costs per person per meal
        const drinkCosts = {
            none: 0,
            moderate: 65,      // $50-80 average
            premium: 100       // $80-120 average
        };

        // Calculate meals (assume 2-3 meals per day for 2 people)
        const mealsPerDay = days <= 2 ? 2 : 2.5; // Weekend vs longer stay
        const totalMeals = days * mealsPerDay;
        const people = 2;

        // Base costs
        const baseCost = totalMeals * mealCosts[style] * people;
        const drinksCost = drinks === 'none' ? 0 : totalMeals * drinkCosts[drinks] * people;

        // Extras
        let extrasCost = 0;
        if (appetizers) extrasCost += totalMeals * 30 * people;
        if (desserts) extrasCost += totalMeals * 25 * people;
        if (anniversary) extrasCost += 100; // One-time upgrade

        const subtotal = baseCost + drinksCost + extrasCost;
        const taxAndTip = subtotal * 0.25; // 25% for tax and tip
        const total = subtotal + taxAndTip;

        // Update display
        document.getElementById('calc-base-cost').textContent = `$${baseCost}`;
        document.getElementById('calc-drinks-cost').textContent = `$${drinksCost}`;
        document.getElementById('calc-extras-cost').textContent = `$${extrasCost}`;
        document.getElementById('calc-tax-cost').textContent = `$${Math.round(taxAndTip)}`;
        document.getElementById('calc-total-cost').textContent = `$${Math.round(total)}`;

        // Update recommendation
        const recommendation = document.getElementById('calc-recommendation');
        if (total < 600) {
            recommendation.textContent = "Great value for a romantic getaway!";
        } else if (total < 1000) {
            recommendation.textContent = "Perfect balance of romance and luxury!";
        } else {
            recommendation.textContent = "Ultimate luxury anniversary experience!";
        }

        return { days, style, drinks, total: Math.round(total), totalMeals: Math.round(totalMeals) };
    }

    function generateBudgetPlan() {
        const budget = calculateBudget();
        const planDiv = document.getElementById('calc-meal-plan');
        const contentDiv = document.getElementById('calc-plan-content');

        // Restaurant recommendations based on style
        const restaurants = {
            conservative: ['Hemenway\'s Bar & Bistro', 'Il Massimo Ristorante', 'Legal Sea Foods', 'Track 15'],
            romantic: ['Gracie\'s (Anniversary Dinner)', 'Mill\'s Tavern', 'CAV Restaurant', 'Capriccio'],
            luxury: ['Gracie\'s (Multiple Visits)', 'The Capital Grille', 'Mill\'s Tavern', 'Bacaro']
        };

        const dayPlans = [];
        const mealsPerDay = budget.days <= 2 ? 2 : 2.5;

        for (let day = 1; day <= budget.days; day++) {
            let dayPlan = `<strong>Day ${day}:</strong> `;
            
            if (day === 1) {
                // Arrival day
                if (mealsPerDay >= 2) {
                    dayPlan += `Lunch at ${restaurants[budget.style][Math.min(day, restaurants[budget.style].length - 1)]}, `;
                }
                dayPlan += `Dinner at ${restaurants[budget.style][0]}`;
            } else if (day === budget.days) {
                // Last day
                dayPlan += `Brunch/Lunch at ${restaurants[budget.style][Math.min(day, restaurants[budget.style].length - 1)]}`;
            } else {
                // Full days
                dayPlan += `Lunch at ${restaurants[budget.style][Math.min(day, restaurants[budget.style].length - 1)]}, `;
                dayPlan += `Dinner at ${restaurants[budget.style][Math.min(day + 1, restaurants[budget.style].length - 1)]}`;
            }

            dayPlans.push(dayPlan);
        }

        contentDiv.innerHTML = dayPlans.join('<br>') + 
            `<br><br><em>💡 Tip: Make reservations early, especially for Gracie's and premium restaurants!</em>`;
        
        planDiv.classList.remove('hidden');
    }

    // Add event listeners for calculator
    document.addEventListener('DOMContentLoaded', () => {
        const calcInputs = ['calc-days', 'calc-style', 'calc-drinks', 'calc-appetizers', 'calc-desserts', 'calc-anniversary'];
        
        calcInputs.forEach(id => {
            const element = document.getElementById(id);
            if (element) {
                element.addEventListener('change', calculateBudget);
            }
        });

        // Initial calculation
        calculateBudget();

        // Initialize enhanced features
        initializeScrollAnimations();
        initializeAccessibilityFeatures();
        initializePerformanceOptimizations();
        initializeEnhancedMobileMenu();
    });

    // Smooth scroll animations for elements entering viewport
    function initializeScrollAnimations() {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Add fade-in class to sections and observe them
        const sections = document.querySelectorAll('section:not(#hero)');
        sections.forEach(section => {
            section.classList.add('fade-in');
            observer.observe(section);
        });
    }

    // Enhanced accessibility features
    function initializeAccessibilityFeatures() {
        // Enhanced keyboard navigation
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Close any open modals
                const openModal = document.querySelector('.modal[style*="display: block"]');
                if (openModal) {
                    closeModal();
                }
                
                // Close mobile menu if open
                const mobileMenu = document.getElementById('mobile-menu');
                if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                    document.getElementById('menu-btn').setAttribute('aria-expanded', 'false');
                }
            }
        });

        // Announce dynamic content changes
        const announcer = document.createElement('div');
        announcer.setAttribute('aria-live', 'polite');
        announcer.setAttribute('aria-atomic', 'true');
        announcer.classList.add('sr-only');
        document.body.appendChild(announcer);
        
        window.announceToScreenReader = function(message) {
            announcer.textContent = message;
            setTimeout(() => {
                announcer.textContent = '';
            }, 1000);
        };
    }

    // Performance optimizations
    function initializePerformanceOptimizations() {
        // Optimize smooth scrolling
        const smoothScrollTo = (target) => {
            const element = document.querySelector(target);
            if (element) {
                const headerHeight = document.querySelector('header').offsetHeight;
                const elementPosition = element.offsetTop - headerHeight;
                
                window.scrollTo({
                    top: elementPosition,
                    behavior: 'smooth'
                });
            }
        };

        // Replace all anchor scrolling with optimized version
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = this.getAttribute('href');
                smoothScrollTo(target);
                
                // Announce navigation to screen readers
                const targetElement = document.querySelector(target);
                if (targetElement) {
                    const targetName = targetElement.querySelector('h1, h2, h3')?.textContent || 'section';
                    window.announceToScreenReader?.(`Navigated to ${targetName}`);
                }
            });
        });

        // Optimize animations on low-end devices
        const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)');
        if (prefersReducedMotion.matches) {
            document.documentElement.style.setProperty('--animation-duration', '0.01ms');
        }
    }

    // Enhanced mobile menu functionality
    function initializeEnhancedMobileMenu() {
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        
        if (menuBtn && mobileMenu) {
            menuBtn.addEventListener('click', function() {
                const isHidden = mobileMenu.classList.contains('hidden');
                
                if (isHidden) {
                    mobileMenu.classList.remove('hidden');
                    menuBtn.setAttribute('aria-expanded', 'true');
                    window.announceToScreenReader?.('Mobile menu opened');
                } else {
                    mobileMenu.classList.add('hidden');
                    menuBtn.setAttribute('aria-expanded', 'false');
                    window.announceToScreenReader?.('Mobile menu closed');
                }
            });

            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                if (!menuBtn.contains(e.target) && !mobileMenu.contains(e.target)) {
                    mobileMenu.classList.add('hidden');
                    menuBtn.setAttribute('aria-expanded', 'false');
                }
            });

            // Close menu when selecting a link
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function() {
                    mobileMenu.classList.add('hidden');
                    menuBtn.setAttribute('aria-expanded', 'false');
                });
            });
        }
    }

    // Interactive Map Functionality
    let map;
    let markers = [];
    let infoWindows = [];

    // Providence locations data
    const providenceLocations = {
        // Fine Dining Restaurants
        'gracies': {
            name: "Gracie's Restaurant",
            lat: 41.8236,
            lng: -71.4118,
            category: 'restaurants',
            type: 'fine-dining',
            color: '#ef4444', // red
            icon: '🌟',
            description: 'Most romantic restaurant in Providence',
            details: 'Contemporary American • $59.99 Restaurant Week Menu • ★★★★★ Romance',
            address: '194 Washington St',
            features: ['Intimate atmosphere', 'Tasting menus', 'Wine pairings', 'Anniversary perfect']
        },
        'mills-tavern': {
            name: "Mill's Tavern",
            lat: 41.8206,
            lng: -71.4161,
            category: 'restaurants',
            type: 'fine-dining',
            color: '#ef4444',
            icon: '🍽️',
            description: 'Contemporary American in Federal Hill area',
            details: 'Contemporary American • $55 Restaurant Week Menu • ★★★★☆ Romance',
            address: 'Federal Hill area',
            features: ['Curated wine list', 'Smart casual', 'Street parking']
        },
        'capital-grille': {
            name: 'The Capital Grille',
            lat: 41.8240,
            lng: -71.4100,
            category: 'restaurants',
            type: 'fine-dining',
            color: '#ef4444',
            icon: '🥩',
            description: 'Premium steakhouse downtown',
            details: 'Premium Steakhouse • ~$60 3-course dinner • Not available Saturdays',
            address: 'Downtown Providence',
            features: ['Award-winning wine list', 'Business casual', 'Valet available']
        },
        'capriccio': {
            name: 'Capriccio',
            lat: 41.8210,
            lng: -71.4130,
            category: 'restaurants',
            type: 'fine-dining',
            color: '#ef4444',
            icon: '🍷',
            description: 'Italian & Mediterranean cuisine',
            details: 'Italian & Mediterranean • $51.95 Restaurant Week Menu',
            address: 'Providence',
            features: ['Italian wine selection', 'Casual to smart casual', 'Parking available']
        },
        
        // Casual Dining
        'legal-sea-foods': {
            name: 'Legal Sea Foods',
            lat: 41.7879,
            lng: -71.4371,
            category: 'restaurants',
            type: 'casual-dining',
            color: '#f97316', // orange
            icon: '🐟',
            description: 'Fresh seafood with confirmed pricing',
            details: 'Fresh Seafood • $30 lunch, $45 dinner • Cranston location',
            address: 'Cranston',
            features: ['Famous chowder', 'Fresh daily catches', 'Reliable quality']
        },
        'il-massimo': {
            name: 'Il Massimo',
            lat: 41.8220,
            lng: -71.4150,
            category: 'restaurants',
            type: 'casual-dining',
            color: '#f97316',
            icon: '🍝',
            description: 'New Age Classic Neapolitan with wine included',
            details: 'Neapolitan • $37 pasta, $48 protein • Wine included!',
            address: 'Providence',
            features: ['Wine included', '3-course prix fixe', 'Italian authentic']
        },
        
        // Attractions
        'riverwalk': {
            name: 'Providence Riverwalk',
            lat: 41.8236,
            lng: -71.4128,
            category: 'attractions',
            type: 'outdoor',
            color: '#3b82f6', // blue
            icon: '🌊',
            description: 'Perfect for romantic evening strolls',
            details: 'Waterfront walking paths • FREE • Very romantic',
            address: 'Downtown Providence',
            features: ['Waterfront views', 'Perfect for photos', 'Evening ambiance', 'FREE access']
        },
        'federal-hill': {
            name: 'Federal Hill (Little Italy)',
            lat: 41.8198,
            lng: -71.4169,
            category: 'attractions',
            type: 'district',
            color: '#f97316',
            icon: '🇮🇹',
            description: 'Providence\'s Italian neighborhood',
            details: 'Food District • Multiple restaurants • Walkable',
            address: 'Atwells Avenue',
            features: ['Multiple restaurants', 'Authentic Italian', 'Historic area', 'Walking district']
        },
        'benefit-street': {
            name: 'Benefit Street',
            lat: 41.8252,
            lng: -71.4065,
            category: 'attractions',
            type: 'historic',
            color: '#3b82f6',
            icon: '🏛️',
            description: 'Mile of History walking tour',
            details: 'Historic walking tour • Photo opportunities • Free',
            address: 'The Hill neighborhood',
            features: ['Historic architecture', 'Photo opportunities', 'Self-guided tours', 'Beautiful homes']
        },
        'waterfire': {
            name: 'WaterFire Location',
            lat: 41.8240,
            lng: -71.4115,
            category: 'romantic',
            type: 'event',
            color: '#ec4899', // pink
            icon: '🔥',
            description: 'Iconic romantic experience',
            details: 'Art installation • Most romantic • Evening events',
            address: 'Downtown rivers',
            features: ['Magical atmosphere', 'Evening events', 'Perfect for couples', 'Iconic Providence']
        },
        'risd-museum': {
            name: 'RISD Museum',
            lat: 41.8262,
            lng: -71.4031,
            category: 'attractions',
            type: 'culture',
            color: '#3b82f6',
            icon: '🎨',
            description: 'Renowned art and design museum',
            details: 'Art museum • Free on Sundays • Diverse collections',
            address: 'The Hill',
            features: ['Free Sundays', 'World-class art', 'Contemporary works', 'Design focus']
        },
        'roger-williams-park': {
            name: 'Roger Williams Park',
            lat: 41.7915,
            lng: -71.4358,
            category: 'attractions',
            type: 'park',
            color: '#22c55e', // green
            icon: '🌳',
            description: '435-acre urban oasis with swan boats',
            details: 'Urban park • Swan boat rides • Free admission',
            address: 'South Providence',
            features: ['Swan boat rides', 'Beautiful gardens', 'Walking trails', 'Peaceful setting']
        },
        
        // Hotels
        'neptune-hotel': {
            name: 'Neptune Hotel',
            lat: 41.8230,
            lng: -71.4110,
            category: 'hotels',
            type: 'boutique',
            color: '#8b5cf6', // purple
            icon: '🏨',
            description: 'Stylish boutique hotel',
            details: 'Boutique hotel • Karaoke lounge • Central location',
            address: 'Downtown Providence',
            features: ['Boutique style', 'Karaoke lounge', 'Central location', 'Modern amenities']
        },
        
        // Food Hall
        'track-15': {
            name: 'Track 15 Food Hall',
            lat: 41.8277,
            lng: -71.4155,
            category: 'restaurants',
            type: 'food-hall',
            color: '#f97316',
            icon: '🏢',
            description: 'Modern food hall with multiple vendors',
            details: 'Food hall • Multiple vendors • Next to train station',
            address: '15 Station St',
            features: ['Multiple cuisines', 'Shared seating', 'Casual dining', 'Good for lunch']
        }
    };

    // Initialize map
    window.initMap = function() {
        // Center on downtown Providence
        const providenceCenter = { lat: 41.8236, lng: -71.4128 };
        
        map = new google.maps.Map(document.getElementById('providence-map'), {
            zoom: 14,
            center: providenceCenter,
            styles: [
                {
                    "featureType": "all",
                    "elementType": "geometry.fill",
                    "stylers": [{"weight": "2.00"}]
                },
                {
                    "featureType": "all",
                    "elementType": "geometry.stroke",
                    "stylers": [{"color": "#9c9c9c"}]
                },
                {
                    "featureType": "all",
                    "elementType": "labels.text",
                    "stylers": [{"visibility": "on"}]
                },
                {
                    "featureType": "landscape",
                    "elementType": "all",
                    "stylers": [{"color": "#f2f2f2"}]
                },
                {
                    "featureType": "landscape",
                    "elementType": "geometry.fill",
                    "stylers": [{"color": "#ffffff"}]
                },
                {
                    "featureType": "landscape.man_made",
                    "elementType": "geometry.fill",
                    "stylers": [{"color": "#ffffff"}]
                },
                {
                    "featureType": "poi",
                    "elementType": "all",
                    "stylers": [{"visibility": "off"}]
                },
                {
                    "featureType": "road",
                    "elementType": "all",
                    "stylers": [{"saturation": -100}, {"lightness": 45}]
                },
                {
                    "featureType": "road",
                    "elementType": "geometry.fill",
                    "stylers": [{"color": "#eeeeee"}]
                },
                {
                    "featureType": "road",
                    "elementType": "labels.text.fill",
                    "stylers": [{"color": "#7b7b7b"}]
                },
                {
                    "featureType": "road",
                    "elementType": "labels.text.stroke",
                    "stylers": [{"color": "#ffffff"}]
                },
                {
                    "featureType": "road.highway",
                    "elementType": "all",
                    "stylers": [{"visibility": "simplified"}]
                },
                {
                    "featureType": "road.arterial",
                    "elementType": "labels.icon",
                    "stylers": [{"visibility": "off"}]
                },
                {
                    "featureType": "transit",
                    "elementType": "all",
                    "stylers": [{"visibility": "off"}]
                },
                {
                    "featureType": "water",
                    "elementType": "all",
                    "stylers": [{"color": "#C07F63"}, {"visibility": "on"}]
                },
                {
                    "featureType": "water",
                    "elementType": "geometry.fill",
                    "stylers": [{"color": "#C07F63"}]
                },
                {
                    "featureType": "water",
                    "elementType": "labels.text.fill",
                    "stylers": [{"color": "#070707"}]
                },
                {
                    "featureType": "water",
                    "elementType": "labels.text.stroke",
                    "stylers": [{"color": "#ffffff"}]
                }
            ],
            mapTypeControl: false,
            streetViewControl: false,
            fullscreenControl: true
        });

        // Create markers for all locations
        createMarkers();
        
        // Set up filter event listeners
        setupMapFilters();
    };

    function createMarkers() {
        // Clear existing markers
        markers.forEach(marker => marker.setMap(null));
        markers = [];
        infoWindows.forEach(window => window.close());
        infoWindows = [];

        Object.keys(providenceLocations).forEach(locationKey => {
            const location = providenceLocations[locationKey];
            
            // Create custom marker
            const marker = new google.maps.Marker({
                position: { lat: location.lat, lng: location.lng },
                map: map,
                title: location.name,
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    fillColor: location.color,
                    fillOpacity: 0.8,
                    strokeColor: '#ffffff',
                    strokeWeight: 2,
                    scale: 8
                }
            });

            // Create info window
            const infoWindow = new google.maps.InfoWindow({
                content: createInfoWindowContent(location)
            });

            // Add click event
            marker.addListener('click', () => {
                // Close all other info windows
                infoWindows.forEach(window => window.close());
                infoWindow.open(map, marker);
            });

            markers.push(marker);
            infoWindows.push(infoWindow);
        });
    }

    function createInfoWindowContent(location) {
        return `
            <div class="p-4 max-w-sm">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="font-bold text-lg text-gray-900">${location.icon} ${location.name}</h3>
                </div>
                <p class="text-gray-700 mb-2">${location.description}</p>
                <p class="text-sm text-gray-600 mb-3">${location.details}</p>
                <div class="text-xs text-gray-500 mb-3">📍 ${location.address}</div>
                <div class="mb-3">
                    ${location.features.map(feature => `
                        <span class="inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs mr-1 mb-1">
                            ${feature}
                        </span>
                    `).join('')}
                </div>
                <div class="flex gap-2">
                    <button onclick="getDirections('${location.name}')" class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600">
                        🗺️ Directions
                    </button>
                    <button onclick="callUber('${location.lat}', '${location.lng}')" class="bg-black text-white px-3 py-1 rounded text-sm hover:bg-gray-800">
                        🚗 Uber
                    </button>
                </div>
            </div>
        `;
    }

    function setupMapFilters() {
        const filterButtons = document.querySelectorAll('.map-filter');
        
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update button states
                filterButtons.forEach(btn => {
                    btn.classList.remove('bg-white', 'text-[#433A3F]');
                    btn.classList.add('bg-white/20', 'text-white');
                });
                button.classList.remove('bg-white/20', 'text-white');
                button.classList.add('bg-white', 'text-[#433A3F]');

                // Filter markers
                const category = button.getAttribute('data-map-category');
                filterMarkers(category);
            });
        });
    }

    function filterMarkers(category) {
        markers.forEach((marker, index) => {
            const locationKey = Object.keys(providenceLocations)[index];
            const location = providenceLocations[locationKey];
            
            if (category === 'all' || location.category === category || 
                (category === 'romantic' && location.category === 'romantic') ||
                (category === 'waterfront' && (location.name.includes('River') || location.name.includes('Water') || location.name.includes('Park')))) {
                marker.setVisible(true);
            } else {
                marker.setVisible(false);
            }
        });
    }

    // Focus on specific locations
    window.focusMapLocation = function(locationKey) {
        const location = providenceLocations[locationKey];
        if (location) {
            map.setCenter({ lat: location.lat, lng: location.lng });
            map.setZoom(16);
            
            // Find and trigger the marker
            const markerIndex = Object.keys(providenceLocations).indexOf(locationKey);
            if (markers[markerIndex]) {
                google.maps.event.trigger(markers[markerIndex], 'click');
            }
        } else {
            // Handle area focus
            const areas = {
                'downtown': { lat: 41.8236, lng: -71.4128, zoom: 15 },
                'east-side': { lat: 41.8262, lng: -71.4031, zoom: 14 },
                'hill': { lat: 41.8252, lng: -71.4065, zoom: 15 },
                'waterfront': { lat: 41.8240, lng: -71.4115, zoom: 15 }
            };
            
            const area = areas[locationKey];
            if (area) {
                map.setCenter({ lat: area.lat, lng: area.lng });
                map.setZoom(area.zoom);
            }
        }
    };

    // Helper functions
    window.getDirections = function(locationName) {
        const encodedName = encodeURIComponent(locationName + ', Providence, RI');
        window.open(`https://maps.google.com/maps?daddr=${encodedName}`, '_blank');
    };

    window.callUber = function(lat, lng) {
        const uberUrl = `https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${lat}&dropoff[longitude]=${lng}`;
        window.open(uberUrl, '_blank');
    };

    // Initialize map when Google Maps API is loaded
    if (typeof google !== 'undefined' && google.maps) {
        initMap();
    }

});

</script>

<script>
    // Enhanced Qobuz Integration Features
    window.qobuzFeatures = {
        searchResults: {
            'romantic': [
                { title: 'At Last', artist: 'Etta James', album: 'At Last!', quality: '24-bit/96kHz', platform: 'qobuz' },
                { title: 'La Vie En Rose', artist: 'Édith Piaf', album: 'The Complete Recordings', quality: '24-bit/192kHz', platform: 'qobuz' },
                { title: 'The Way You Look Tonight', artist: 'Frank Sinatra', album: 'The Complete Capitol Collection', quality: '24-bit/96kHz', platform: 'qobuz' },
                { title: 'Summertime', artist: 'Ella Fitzgerald', album: 'Porgy and Bess', quality: '24-bit/96kHz', platform: 'qobuz' },
                { title: 'Fly Me to the Moon', artist: 'Diana Krall', album: 'The Look of Love', quality: '24-bit/192kHz', platform: 'qobuz' }
            ],
            'jazz': [
                { title: 'Take Five', artist: 'Dave Brubeck', album: 'Time Out', quality: '24-bit/96kHz', platform: 'qobuz' },
                { title: 'Blue in Green', artist: 'Miles Davis', album: 'Kind of Blue', quality: '24-bit/192kHz', platform: 'qobuz' },
                { title: 'Autumn Leaves', artist: 'Bill Evans Trio', album: 'Waltz for Debby', quality: '24-bit/96kHz', platform: 'qobuz' },
                { title: 'Body and Soul', artist: 'John Coltrane', album: 'Ballads', quality: '24-bit/96kHz', platform: 'qobuz' }
            ],
            'classical': [
                { title: 'Claire de Lune', artist: 'Claude Debussy', album: 'Suite Bergamasque', quality: '24-bit/192kHz', platform: 'qobuz' },
                { title: 'Canon in D', artist: 'Johann Pachelbel', album: 'Wedding Classics', quality: '24-bit/96kHz', platform: 'qobuz' },
                { title: 'Moonlight Sonata', artist: 'Ludwig van Beethoven', album: 'Piano Sonatas', quality: '24-bit/192kHz', platform: 'qobuz' }
            ]
        },
        
        qualityBadges: {
            '16-bit/44.1kHz': 'CD Quality',
            '24-bit/96kHz': 'Hi-Res',
            '24-bit/192kHz': 'Studio Master',
            'DSD64': 'DSD',
            'DSD128': 'DSD+'
        },
        
        generateQobuzPlaylist: (type) => {
            const templates = {
                audiophile: {
                    name: 'Audiophile Romance',
                    description: 'High-fidelity romantic tracks for the perfect listening experience',
                    songs: qobuzFeatures.searchResults.romantic.slice(0, 10),
                    totalDuration: '42:18',
                    averageQuality: '24-bit/144kHz'
                },
                jazz: {
                    name: 'Hi-Res Jazz Evening',
                    description: 'Premium jazz recordings for your special dinner',
                    songs: qobuzFeatures.searchResults.jazz,
                    totalDuration: '38:45',
                    averageQuality: '24-bit/128kHz'
                },
                classical: {
                    name: 'Classical Masterpieces',
                    description: 'Timeless classical pieces in studio master quality',
                    songs: qobuzFeatures.searchResults.classical,
                    totalDuration: '45:32',
                    averageQuality: '24-bit/176kHz'
                }
            };
            
            return templates[type] || templates.audiophile;
        },
        
        createQualityBadge: (quality) => {
            const badge = qobuzFeatures.qualityBadges[quality] || 'Hi-Res';
            return `<span class="qobuz-quality-badge">${badge}</span>`;
        },
        
        renderQobuzSearchResults: (query, container) => {
            if (!container) return;
            
            const searchCategory = query.toLowerCase().includes('jazz') ? 'jazz' : 
                                  query.toLowerCase().includes('classical') ? 'classical' : 'romantic';
            
            const results = qobuzFeatures.searchResults[searchCategory] || qobuzFeatures.searchResults.romantic;
            
            container.innerHTML = results.map(song => `
                <div class="search-result-item bg-white/5 rounded-lg p-3 cursor-pointer hover:bg-white/10 transition-colors" data-platform="qobuz">
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center gap-2">
                                <div class="text-white font-medium text-sm">${song.title}</div>
                                ${qobuzFeatures.createQualityBadge(song.quality)}
                            </div>
                            <div class="text-white/60 text-xs">${song.artist} • ${song.album}</div>
                            <div class="text-blue-200 text-xs">🎧 ${song.quality} • Qobuz</div>
                        </div>
                        <div class="flex gap-2">
                            <button class="text-white/60 hover:text-white text-sm transition-colors" onclick="playQobuzTrack('${song.title}', '${song.artist}')">
                                ▶️
                            </button>
                            <button class="text-white/60 hover:text-white text-sm transition-colors" onclick="addToPlaylist('${song.title}', '${song.artist}', 'qobuz')">
                                ➕
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
            
            // Add Qobuz branding
            const qobuzBranding = document.createElement('div');
            qobuzBranding.className = 'text-center py-3 border-t border-white/10 mt-3';
            qobuzBranding.innerHTML = `
                <div class="text-blue-200 text-xs">
                    🎧 Powered by Qobuz • Hi-Res & Lossless Audio
                </div>
            `;
            container.appendChild(qobuzBranding);
        }
    };
    
    // Enhanced music search with Qobuz integration
    window.searchMusic = (query) => {
        const resultsContainer = document.getElementById('search-results-list');
        const searchResultsDiv = document.getElementById('music-search-results');
        
        if (!resultsContainer || !query.trim()) {
            searchResultsDiv?.classList.add('hidden');
            return;
        }
        
        // Show loading state
        resultsContainer.innerHTML = `
            <div class="text-center py-4">
                <div class="loading-spinner mx-auto mb-2"></div>
                <div class="text-white/60 text-sm">Searching across all connected services...</div>
            </div>
        `;
        searchResultsDiv.classList.remove('hidden');
        
        // Simulate search delay
        setTimeout(() => {
            // Clear previous results
            resultsContainer.innerHTML = '';
            
            // Check if Qobuz is connected for hi-res results
            const qobuzConnected = connectedServices?.qobuz?.connected;
            
            if (qobuzConnected) {
                // Add Qobuz section header
                const qobuzHeader = document.createElement('div');
                qobuzHeader.className = 'mb-3 pb-2 border-b border-blue-400/30';
                qobuzHeader.innerHTML = `
                    <div class="flex items-center gap-2">
                        <span class="text-blue-200 font-semibold">🎧 Qobuz Hi-Res Results</span>
                        <span class="qobuz-quality-badge">Premium</span>
                    </div>
                `;
                resultsContainer.appendChild(qobuzHeader);
                
                // Add Qobuz results
                const qobuzResults = document.createElement('div');
                qobuzResults.className = 'mb-4';
                qobuzFeatures.renderQobuzSearchResults(query, qobuzResults);
                resultsContainer.appendChild(qobuzResults);
            }
            
            // Add standard results from other services
            const standardResults = [
                { title: 'Perfect', artist: 'Ed Sheeran', platform: 'spotify', quality: 'Standard' },
                { title: 'Thinking Out Loud', artist: 'Ed Sheeran', platform: 'spotify', quality: 'Standard' },
                { title: 'All of Me', artist: 'John Legend', platform: 'youtube', quality: 'Standard' },
                { title: 'A Thousand Years', artist: 'Christina Perri', platform: 'spotify', quality: 'Standard' }
            ];
            
            if (standardResults.length > 0) {
                const standardHeader = document.createElement('div');
                standardHeader.className = 'mb-3 pb-2 border-b border-white/20';
                standardHeader.innerHTML = `
                    <div class="text-white/80 font-semibold">🎵 Other Results</div>
                `;
                resultsContainer.appendChild(standardHeader);
                
                standardResults.forEach(song => {
                    const songElement = document.createElement('div');
                    songElement.className = 'search-result-item bg-white/5 rounded-lg p-3 cursor-pointer hover:bg-white/10 transition-colors mb-2';
                    songElement.innerHTML = `
                        <div class="flex items-center justify-between">
                            <div class="flex-1">
                                <div class="text-white font-medium text-sm">${song.title}</div>
                                <div class="text-white/60 text-xs">${song.artist} • ${song.platform.charAt(0).toUpperCase() + song.platform.slice(1)}</div>
                            </div>
                            <div class="flex gap-2">
                                <button class="text-white/60 hover:text-white text-sm transition-colors">▶️</button>
                                <button class="text-white/60 hover:text-white text-sm transition-colors">➕</button>
                            </div>
                        </div>
                    `;
                    resultsContainer.appendChild(songElement);
                });
            }
        }, 1500);
    };
    
    // Qobuz-specific functions
    window.playQobuzTrack = (title, artist) => {
        showNotification(`🎧 Now playing "${title}" by ${artist} in Hi-Res quality`, 'success');
    };
    
    window.createFromTemplate = (templateType) => {
        let templateName = '';
        let notification = '';
        
        switch(templateType) {
            case 'audiophile':
                templateName = 'Audiophile Experience';
                notification = '🎧 Created audiophile playlist with Hi-Res tracks! Perfect for your romantic evening.';
                break;
            case 'dinner':
                templateName = 'Romantic Dinner';
                notification = '🍽️ Created romantic dinner playlist! Smooth jazz and soul for your evening.';
                break;
            case 'adventure':
                templateName = 'Adventure Time';
                notification = '🚀 Created adventure playlist! Upbeat tracks for exploring Providence.';
                break;
            case 'chill':
                templateName = 'Chill & Relax';
                notification = '🌊 Created chill playlist! Perfect for waterfront walks and quiet moments.';
                break;
            case 'roadtrip':
                templateName = 'Road Trip Vibes';
                notification = '🚗 Created road trip playlist! Feel-good classics for your journey.';
                break;
            default:
                templateName = 'Custom Playlist';
                notification = '🎵 Created new playlist template!';
        }
        
        // Show notification
        showNotification(notification, 'success');
        
        // For Qobuz templates, add special Hi-Res notification
        if (templateType === 'audiophile' && connectedServices?.qobuz?.connected) {
            setTimeout(() => {
                showNotification('✨ Qobuz Hi-Res tracks added for premium audio quality!', 'info');
            }, 2000);
        }
    };
    
    // Initialize music search functionality
    document.addEventListener('DOMContentLoaded', () => {
        const searchInput = document.getElementById('music-search-input');
        const searchBtn = document.getElementById('music-search-btn');
        
        if (searchInput && searchBtn) {
            searchBtn.addEventListener('click', () => {
                searchMusic(searchInput.value);
            });
            
            searchInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    searchMusic(searchInput.value);
                }
            });
            
            // Auto-search on input with debounce
            let searchTimeout;
            searchInput.addEventListener('input', (e) => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    if (e.target.value.length > 2) {
                        searchMusic(e.target.value);
                    }
                }, 800);
            });
        }
    });

    // ================================
    // PHASE 3: AI-POWERED FEATURES & ADVANCED COLLABORATION
    // ================================

    // AI-Powered Activity Playlist Generation
    const activityPlaylists = {
        gracies: {
            name: "Dinner at Gracie's",
            description: "Sophisticated jazz & soul for intimate dining",
            mood: "romantic",
            duration: 45,
            songs: [
                { title: "The Way You Look Tonight", artist: "Frank Sinatra", genre: "Jazz", mood: "romantic" },
                { title: "At Last", artist: "Etta James", genre: "Soul", mood: "romantic" },
                { title: "La Vie En Rose", artist: "Édith Piaf", genre: "Jazz", mood: "romantic" },
                { title: "Fly Me to the Moon", artist: "Norah Jones", genre: "Jazz", mood: "romantic" },
                { title: "Summertime", artist: "Billie Holiday", genre: "Jazz", mood: "romantic" },
                { title: "Feeling Good", artist: "Nina Simone", genre: "Soul", mood: "romantic" }
            ]
        },
        waterfront: {
            name: "Waterfront Cruise",
            description: "Ocean breeze vibes for scenic boat tours",
            mood: "chill",
            duration: 60,
            songs: [
                { title: "Come Away With Me", artist: "Norah Jones", genre: "Folk", mood: "chill" },
                { title: "Ocean Eyes", artist: "Billie Eilish", genre: "Pop", mood: "chill" },
                { title: "Sailing", artist: "Christopher Cross", genre: "Soft Rock", mood: "chill" },
                { title: "Beyond the Sea", artist: "Bobby Darin", genre: "Jazz", mood: "chill" },
                { title: "Dock of the Bay", artist: "Otis Redding", genre: "Soul", mood: "chill" }
            ]
        },
        museum: {
            name: "RISD Museum Visit",
            description: "Ambient & contemplative for art appreciation",
            mood: "contemplative",
            duration: 30,
            songs: [
                { title: "Clair de Lune", artist: "Claude Debussy", genre: "Classical", mood: "contemplative" },
                { title: "Gymnopédie No. 1", artist: "Erik Satie", genre: "Classical", mood: "contemplative" },
                { title: "Mad World", artist: "Gary Jules", genre: "Alternative", mood: "contemplative" },
                { title: "The Scientist", artist: "Coldplay", genre: "Alternative", mood: "contemplative" }
            ]
        },
        arrival: {
            name: "Arrival Excitement",
            description: "Upbeat travel anthems for your journey",
            mood: "energetic",
            duration: 25,
            songs: [
                { title: "Adventure of a Lifetime", artist: "Coldplay", genre: "Pop", mood: "energetic" },
                { title: "Good 4 U", artist: "Olivia Rodrigo", genre: "Pop", mood: "energetic" },
                { title: "Levitating", artist: "Dua Lipa", genre: "Pop", mood: "energetic" },
                { title: "Can't Stop the Feeling!", artist: "Justin Timberlake", genre: "Pop", mood: "energetic" }
            ]
        }
    };

    // Local Providence Artists Database
    const providenceArtists = [
        { name: "The Low Anthem", genre: "Indie Folk", song: "Charlie Darwin", description: "Local indie darlings from Newport" },
        { name: "Lightning Bolt", genre: "Noise Rock", song: "Captain Caveman", description: "Providence noise rock legends" },
        { name: "Deer Tick", genre: "Alternative Country", song: "The Dream's in the Ditch", description: "Rhode Island alt-country band" },
        { name: "Brown Bird", genre: "Folk", song: "Bilgewater", description: "Providence folk duo with haunting melodies" },
        { name: "Roz Raskin", genre: "Blues", song: "Rhode Island Blues", description: "Local blues musician with deep Providence roots" }
    ];

    // Generate Activity-Based Playlist
    window.generateActivityPlaylist = (activityType) => {
        const template = activityPlaylists[activityType];
        if (!template) {
            showNotification('Activity type not found!', 'error');
            return;
        }

        showNotification('🤖 AI is generating your playlist...', 'info');
        
        setTimeout(() => {
            const newPlaylist = {
                id: Date.now().toString(),
                name: `AI: ${template.name}`,
                description: `${template.description} • Generated by AI based on your Providence itinerary`,
                type: 'ai-generated',
                collaborative: true,
                songs: template.songs.map(song => ({
                    ...song,
                    id: Date.now().toString() + Math.random(),
                    platform: 'ai-recommended',
                    duration: '3:30',
                    addedBy: 'AI Assistant',
                    addedAt: new Date().toISOString()
                })),
                cover: 'gradient-to-br from-indigo-500 to-purple-500',
                createdAt: new Date().toISOString(),
                lastModified: new Date().toISOString(),
                aiGenerated: true
            };
            
            playlists.push(newPlaylist);
            localStorage.setItem('provitinerary_playlists', JSON.stringify(playlists));
            renderPlaylistsGrid();
            
            showNotification(`Created "${template.name}" playlist with ${template.songs.length} AI-selected songs!`, 'success');
        }, 2000);
    };

    // Generate Mood-Based Playlist
    window.generateMoodPlaylist = (mood) => {
        const moodAnalysis = document.getElementById('mood-analysis');
        const moodResult = document.getElementById('mood-result');
        
        if (moodAnalysis && moodResult) {
            moodAnalysis.classList.remove('hidden');
            moodResult.textContent = 'Analyzing your mood preferences...';
        }

        setTimeout(() => {
            const moodDescriptions = {
                romantic: "💕 You're feeling the love! Perfect for intimate moments and cozy conversations.",
                adventurous: "🚀 You're ready to explore! Upbeat tracks to fuel your Providence adventures.",
                chill: "🌿 You want to relax and unwind. Mellow vibes for peaceful moments together.",
                energetic: "⚡ You're pumped up! High-energy tracks to keep the excitement going."
            };

            const moodSongs = {
                romantic: [
                    { title: "All of Me", artist: "John Legend", genre: "R&B" },
                    { title: "Perfect", artist: "Ed Sheeran", genre: "Pop" },
                    { title: "Make You Feel My Love", artist: "Adele", genre: "Soul" }
                ],
                adventurous: [
                    { title: "Roar", artist: "Katy Perry", genre: "Pop" },
                    { title: "High Hopes", artist: "Panic! At The Disco", genre: "Rock" },
                    { title: "Thunder", artist: "Imagine Dragons", genre: "Alternative" }
                ],
                chill: [
                    { title: "Stay", artist: "Rihanna", genre: "R&B" },
                    { title: "Golden", artist: "Harry Styles", genre: "Pop" },
                    { title: "Breathe", artist: "Telepopmusik", genre: "Electronic" }
                ],
                energetic: [
                    { title: "Uptown Funk", artist: "Mark Ronson ft. Bruno Mars", genre: "Funk" },
                    { title: "Can't Stop the Feeling!", artist: "Justin Timberlake", genre: "Pop" },
                    { title: "Levitating", artist: "Dua Lipa", genre: "Pop" }
                ]
            };

            if (moodResult) {
                moodResult.textContent = moodDescriptions[mood] || "Mood analysis complete!";
            }

            const newPlaylist = {
                id: Date.now().toString(),
                name: `${mood.charAt(0).toUpperCase() + mood.slice(1)} Vibes`,
                description: `AI-curated ${mood} playlist based on your current mood`,
                type: 'mood-based',
                collaborative: true,
                songs: (moodSongs[mood] || []).map(song => ({
                    ...song,
                    id: Date.now().toString() + Math.random(),
                    platform: 'ai-recommended',
                    duration: '3:30',
                    addedBy: 'Mood AI',
                    addedAt: new Date().toISOString()
                })),
                cover: 'gradient-to-br from-pink-500 to-red-500',
                createdAt: new Date().toISOString(),
                lastModified: new Date().toISOString(),
                moodBased: true
            };
            
            playlists.push(newPlaylist);
            localStorage.setItem('provitinerary_playlists', JSON.stringify(playlists));
            renderPlaylistsGrid();
            
            showNotification(`Created ${mood} playlist based on your mood!`, 'success');
        }, 1500);
    };

    // Local Providence Music Integration
    window.exploreLocalArtists = () => {
        showNotification('🎪 Discovering local Providence artists...', 'info');
        
        setTimeout(() => {
            const localPlaylist = {
                id: Date.now().toString(),
                name: "Providence Local Sound",
                description: "Discover amazing artists from the Providence music scene",
                type: 'local',
                collaborative: true,
                songs: providenceArtists.map(artist => ({
                    id: Date.now().toString() + Math.random(),
                    title: artist.song,
                    artist: artist.name,
                    album: "Local Providence",
                    genre: artist.genre,
                    platform: 'local-discovery',
                    duration: '3:30',
                    addedBy: 'Local Discovery',
                    addedAt: new Date().toISOString(),
                    description: artist.description
                })),
                cover: 'gradient-to-br from-emerald-500 to-teal-500',
                createdAt: new Date().toISOString(),
                lastModified: new Date().toISOString(),
                localArtists: true
            };
            
            playlists.push(localPlaylist);
            localStorage.setItem('provitinerary_playlists', JSON.stringify(playlists));
            renderPlaylistsGrid();
            
            showNotification(`Discovered ${providenceArtists.length} local Providence artists!`, 'success');
        }, 1500);
    };

    window.generateVenuePlaylist = () => {
        showNotification('🏛️ Curating venue-inspired playlist...', 'info');
        
        setTimeout(() => {
            const venuePlaylist = {
                id: Date.now().toString(),
                name: "Providence Venue Vibes",
                description: "Music inspired by Providence's iconic venues and stages",
                type: 'venue',
                collaborative: true,
                songs: [
                    { title: "Live at Lupo's", artist: "Various Artists", genre: "Live" },
                    { title: "Federal Hill Sessions", artist: "Local Jazz Quartet", genre: "Jazz" },
                    { title: "Waterfire Nights", artist: "Ambient Collective", genre: "Ambient" },
                    { title: "RISD After Hours", artist: "Student Musicians", genre: "Indie" }
                ].map(song => ({
                    ...song,
                    id: Date.now().toString() + Math.random(),
                    platform: 'venue-curated',
                    duration: '4:00',
                    addedBy: 'Venue Curator',
                    addedAt: new Date().toISOString()
                })),
                cover: 'gradient-to-br from-teal-500 to-cyan-500',
                createdAt: new Date().toISOString(),
                lastModified: new Date().toISOString(),
                venueCurated: true
            };
            
            playlists.push(venuePlaylist);
            localStorage.setItem('provitinerary_playlists', JSON.stringify(playlists));
            renderPlaylistsGrid();
            
            showNotification('Created venue-inspired playlist!', 'success');
        }, 1500);
    };

    window.getLocalRadioHits = () => {
        showNotification('📻 Tuning into Providence radio...', 'info');
        
        setTimeout(() => {
            const radioPlaylist = {
                id: Date.now().toString(),
                name: "Providence Radio Hits",
                description: "Current popular songs from local Providence radio stations",
                type: 'radio',
                collaborative: true,
                songs: [
                    { title: "Anti-Hero", artist: "Taylor Swift", station: "WBRU 95.5" },
                    { title: "Flowers", artist: "Miley Cyrus", station: "Kiss 105.1" },
                    { title: "As It Was", artist: "Harry Styles", station: "WBRU 95.5" },
                    { title: "Unholy", artist: "Sam Smith ft. Kim Petras", station: "Kiss 105.1" }
                ].map(song => ({
                    ...song,
                    id: Date.now().toString() + Math.random(),
                    platform: 'radio',
                    duration: '3:30',
                    addedBy: song.station,
                    addedAt: new Date().toISOString()
                })),
                cover: 'gradient-to-br from-cyan-500 to-blue-500',
                createdAt: new Date().toISOString(),
                lastModified: new Date().toISOString(),
                radioHits: true
            };
            
            playlists.push(radioPlaylist);
            localStorage.setItem('provitinerary_playlists', JSON.stringify(playlists));
            renderPlaylistsGrid();
            
            showNotification('Captured current Providence radio hits!', 'success');
        }, 1500);
    };

    // Social Media Sharing
    window.shareToSocial = (platform) => {
        const currentPlaylistName = currentPlaylist ? currentPlaylist.name : "Providence Anniversary Playlist";
        const shareText = `🎵 Check out our ${currentPlaylistName} for our romantic Providence anniversary! Created with AI-powered music curation. #ProvidenceAnniversary #PlaylistLove`;
        
        const shareUrls = {
            twitter: `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`,
            facebook: `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodeURIComponent(shareText)}`,
            instagram: '#' // Instagram doesn't have direct URL sharing
        };

        if (platform === 'instagram') {
            showNotification('📸 Instagram sharing opens in your app! Copy this text: ' + shareText, 'info');
        } else {
            window.open(shareUrls[platform], '_blank', 'width=600,height=400');
            showNotification(`Shared to ${platform.charAt(0).toUpperCase() + platform.slice(1)}!`, 'success');
        }
    };

    // Playlist Export
    window.exportPlaylist = (platform) => {
        if (!currentPlaylist) {
            showNotification('Please select a playlist to export first!', 'warning');
            return;
        }

        showNotification(`🔄 Exporting "${currentPlaylist.name}" to ${platform}...`, 'info');
        
        setTimeout(() => {
            showNotification(`✅ Playlist exported to ${platform.charAt(0).toUpperCase() + platform.slice(1)}! (Demo mode)`, 'success');
        }, 2000);
    };

    // Real-Time Collaboration Simulation
    let collaborationInterval;
    
    window.simulateCollaboration = () => {
        const feed = document.getElementById('collaboration-feed');
        if (!feed) return;

        const activities = [
            "💕 Your partner added \"Burning Blue\" by Mariah the Scientist to Providence Anniversary 2025",
            "🎵 Your partner created a new playlist \"Sunset Stroll\"",
            "❤️ Your partner liked \"Perfect\" by Ed Sheeran in Romantic Vibes",
            "🔄 Your partner reordered songs in Dinner at Gracie's",
            "📝 Your partner added a memory to \"Little Things\" by Ella Mai",
            "🎶 Your partner added \"Ocean Eyes\" by Billie Eilish to Waterfront Walks",
            "💫 Your partner started playing Providence Anniversary 2025"
        ];

        let activityIndex = 0;
        
        if (collaborationInterval) {
            clearInterval(collaborationInterval);
        }

        collaborationInterval = setInterval(() => {
            if (activityIndex >= activities.length) {
                clearInterval(collaborationInterval);
                showNotification('Collaboration simulation complete!', 'info');
                return;
            }

            const activity = activities[activityIndex];
            const activityEl = document.createElement('div');
            activityEl.className = 'collaboration-activity bg-white/5 rounded-lg p-3 opacity-0';
            activityEl.innerHTML = `
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold">❤️</div>
                    <div>
                        <div class="text-white text-sm">${activity}</div>
                        <div class="text-white/60 text-xs">just now</div>
                    </div>
                </div>
            `;

            feed.insertBefore(activityEl, feed.firstChild);
            
            setTimeout(() => {
                activityEl.style.opacity = '1';
                activityEl.style.transform = 'translateY(0)';
            }, 100);

            // Remove old activities to keep the feed manageable
            if (feed.children.length > 5) {
                feed.removeChild(feed.lastChild);
            }

            activityIndex++;
        }, 3000);
    };

    // Initialize Phase 3 features
    document.addEventListener('DOMContentLoaded', () => {
        // Auto-start collaboration simulation after 5 seconds
        setTimeout(() => {
            if (document.getElementById('collaboration-feed')) {
                const activities = [
                    "💕 Your partner is online and viewing playlists",
                    "🎵 Your partner connected Spotify successfully"
                ];
                
                activities.forEach((activity, index) => {
                    setTimeout(() => {
                        const feed = document.getElementById('collaboration-feed');
                        if (feed) {
                            const activityEl = document.createElement('div');
                            activityEl.className = 'collaboration-activity bg-white/5 rounded-lg p-3';
                            activityEl.innerHTML = `
                                <div class="flex items-center gap-3">
                                    <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold">🟢</div>
                                    <div>
                                        <div class="text-white text-sm">${activity}</div>
                                        <div class="text-white/60 text-xs">${index + 1} min ago</div>
                                    </div>
                                </div>
                            `;
                            feed.appendChild(activityEl);
                        }
                    }, index * 2000);
                });
            }
        }, 5000);
    });

    // ================================
    // END PHASE 3 FEATURES
    // ================================
</script>

<script>
// Enhanced Weather API Integration for Providence, RI
document.addEventListener('DOMContentLoaded', function() {
    const weatherContainer = document.getElementById('weather-forecast');
    const currentWeatherContainer = document.getElementById('current-weather');
    const packingSuggestions = document.getElementById('packing-suggestions');
    
    if (!weatherContainer) return;

    // Open-Meteo API for 4-day forecast (no API key required)
    const lat = 41.8240;
    const lon = -71.4128;
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max&current_weather=true&timezone=America%2FNew_York&forecast_days=5`;

    fetch(url)
        .then(res => res.json())
        .then(data => {
            if (!data || !data.daily) {
                weatherContainer.innerHTML = '<div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-lg"><div class="text-lg font-semibold text-[#433A3F] mb-2">Weather unavailable</div><div class="text-3xl mb-2">❓</div><div class="text-sm text-[#433A3F]/70">Please try again later</div></div>';
                return;
            }

            // Update current weather display
            if (currentWeatherContainer && data.current_weather) {
                const current = data.current_weather;
                const currentTemp = Math.round(current.temperature);
                const currentIcon = getWeatherIcon(current.weathercode);
                const description = getWeatherDescription(current.weathercode);
                
                currentWeatherContainer.innerHTML = `
                    <div class="text-lg font-semibold text-[#433A3F] mb-2">Current Weather in Providence</div>
                    <div class="text-6xl mb-4">${currentIcon}</div>
                    <div class="text-3xl font-bold text-[#433A3F] mb-2">${currentTemp}°F</div>
                    <div class="text-sm text-[#433A3F]/70">${description}</div>
                    <div class="text-xs text-[#433A3F]/50 mt-2">Updated: ${new Date().toLocaleTimeString()}</div>
                `;
            }

            const days = data.daily.time;
            const maxTemps = data.daily.temperature_2m_max;
            const minTemps = data.daily.temperature_2m_min;
            const precip = data.daily.precipitation_probability_max;
            const codes = data.daily.weathercode;

            // Weather code to emoji/icon
            function getWeatherIcon(code) {
                // Open-Meteo weather codes: https://open-meteo.com/en/docs
                if ([0].includes(code)) return "☀️";
                if ([1,2].includes(code)) return "🌤️";
                if ([3].includes(code)) return "☁️";
                if ([45,48].includes(code)) return "🌫️";
                if ([51,53,55,56,57,61,63,65,66,67,80,81,82].includes(code)) return "🌦️";
                if ([71,73,75,77,85,86].includes(code)) return "❄️";
                if ([95,96,99].includes(code)) return "⛈️";
                return "🌡️";
            }

            // Weather description function
            function getWeatherDescription(code) {
                if ([0].includes(code)) return "Clear and sunny";
                if ([1,2].includes(code)) return "Partly cloudy";
                if ([3].includes(code)) return "Overcast";
                if ([45,48].includes(code)) return "Foggy";
                if ([51,53,55,56,57,61,63,65,66,67,80,81,82].includes(code)) return "Rainy";
                if ([71,73,75,77,85,86].includes(code)) return "Snowy";
                if ([95,96,99].includes(code)) return "Thunderstorms";
                return "Variable conditions";
            }

            // Generate packing suggestions based on weather
            function generatePackingSuggestions(temps, precipitations, codes) {
                const suggestions = [];
                const avgTemp = temps.reduce((a, b) => a + b, 0) / temps.length;
                const maxPrecip = Math.max(...precipitations);
                const hasRain = maxPrecip > 30;
                const hasCold = Math.min(...temps) < 60;
                const hasHot = Math.max(...temps) > 85;

                // Temperature-based suggestions
                if (avgTemp >= 70 && avgTemp <= 80) {
                    suggestions.push("🌡️ Perfect temperatures! Light layers and comfortable walking shoes are ideal");
                } else if (avgTemp > 80) {
                    suggestions.push("🌡️ Warm weather ahead! Pack lightweight, breathable fabrics and sun protection");
                } else if (avgTemp < 70) {
                    suggestions.push("🌡️ Cool weather expected. Bring a light jacket or sweater for evenings");
                }

                // Precipitation-based suggestions
                if (hasRain) {
                    suggestions.push("☔ Rain likely! Pack a compact umbrella and waterproof jacket for romantic rainy walks");
                    suggestions.push("👢 Consider comfortable waterproof shoes for wet sidewalks");
                } else {
                    suggestions.push("☀️ Low chance of rain! Perfect for outdoor dining and waterfront strolls");
                }

                // Activity-specific suggestions
                suggestions.push("🍽️ Pack a nice outfit for romantic Restaurant Week dinners");
                suggestions.push("👟 Comfortable walking shoes are essential for exploring Providence's charming streets");
                suggestions.push("📸 Don't forget your camera - the weather looks great for memorable photos!");

                return suggestions;
            }

            // Format date
            function formatDate(dateStr) {
                const d = new Date(dateStr);
                return d.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
            }

            let html = '';
            for (let i = 0; i < 4; i++) {
                html += `
                <div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-lg hover:transform hover:scale-105 transition-all duration-300">
                    <div class="text-lg font-semibold text-[#433A3F] mb-2">${formatDate(days[i])}</div>
                    <div class="text-3xl mb-2">${getWeatherIcon(codes[i])}</div>
                    <div class="text-sm text-[#433A3F]/80 mb-1">High: <span class="font-bold">${Math.round(maxTemps[i])}°F</span></div>
                    <div class="text-sm text-[#433A3F]/60 mb-1">Low: <span>${Math.round(minTemps[i])}°F</span></div>
                    <div class="text-xs text-blue-600">${precip[i]}% chance of rain</div>
                    <div class="text-xs text-[#433A3F]/50 mt-2">${getWeatherDescription(codes[i])}</div>
                </div>
                `;
            }
            weatherContainer.innerHTML = html;

            // Update packing suggestions based on forecast
            if (packingSuggestions) {
                const allTemps = [...maxTemps.slice(0, 4), ...minTemps.slice(0, 4)];
                const suggestions = generatePackingSuggestions(allTemps, precip.slice(0, 4), codes.slice(0, 4));
                
                packingSuggestions.innerHTML = `
                    <div class="space-y-3">
                        ${suggestions.map(suggestion => `
                            <div class="flex items-start space-x-2">
                                <span class="text-[#C07F63] mt-1">•</span>
                                <span class="text-sm">${suggestion}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            }
        })
        .catch(() => {
            weatherContainer.innerHTML = '<div class="bg-white/80 backdrop-blur-sm rounded-xl p-6 text-center shadow-lg"><div class="text-lg font-semibold text-[#433A3F] mb-2">Weather unavailable</div><div class="text-3xl mb-2">❓</div><div class="text-sm text-[#433A3F]/70">Please try again later</div></div>';
        });
    
    // Playlist Management System
    let playlists = JSON.parse(localStorage.getItem('provitinerary_playlists') || '[]');
    let currentPlaylist = null;
    
    if (playlists.length === 0) {
        playlists = [
            {
                id: 'providence-2025',
                name: 'Providence Anniversary 2025',
                description: 'Our romantic weekend soundtrack',
                type: 'custom',
                collaborative: true,
                songs: [
                    { id: 'burning-blue', title: 'Burning Blue', artist: 'Mariah the Scientist', duration: '3:24' },
                    { id: 'little-things', title: 'Little Things', artist: 'Ella Mai', duration: '3:18' }
                ],
                cover: 'gradient-to-br from-purple-500 to-pink-500'
            }
        ];
        localStorage.setItem('provitinerary_playlists', JSON.stringify(playlists));
    }
    
    function updateCurrentPlaylistDisplay() {
        const nameEl = document.getElementById('current-playlist-name');
        const songsEl = document.getElementById('current-playlist-songs');
        
        if (!nameEl || !songsEl) return;
        
        if (!currentPlaylist) {
            nameEl.textContent = 'Select a playlist';
            songsEl.innerHTML = '<div class="text-center text-white/60 py-4"><span class="text-3xl">📝</span><p class="mt-2 text-sm">Select a playlist to view songs</p></div>';
            return;
        }
        
        nameEl.textContent = currentPlaylist.name;
        
        if (currentPlaylist.songs.length === 0) {
            songsEl.innerHTML = '<div class="text-center text-white/60 py-4"><span class="text-3xl">🎵</span><p class="mt-2 text-sm">Add songs to this playlist!</p></div>';
        } else {
            songsEl.innerHTML = currentPlaylist.songs.map((song, index) => `
                <div class="song-item bg-white/5 rounded-lg p-3 flex items-center justify-between">
                    <div><div class="text-white font-medium text-sm">${song.title}</div><div class="text-white/60 text-xs">${song.artist}</div></div>
                    <div class="flex gap-2"><button class="text-white/60 hover:text-white text-sm">▶️</button><button class="text-white/60 hover:text-red-400 text-sm">❌</button></div>
                </div>
            `).join('');
        }
    }
    
    // Enhanced music service connection functionality
    window.connectMusicService = (service) => {
        const serviceInfo = {
            spotify: { name: 'Spotify', icon: '🎵', color: '#1DB954' },
            youtube: { name: 'YouTube Music', icon: '📺', color: '#FF0000' },
            qobuz: { name: 'Qobuz', icon: '�', color: '#1B365D' }
        };
        
        const info = serviceInfo[service];
        if (!info) return;
        
        // Update OAuth modal content
        const modal = document.getElementById('oauth-modal');
        if (modal) {
            document.getElementById('oauth-icon').textContent = info.icon;
            document.getElementById('oauth-service-name').textContent = info.name;
            
            let description = `Connect your ${info.name} account to search millions of songs and create collaborative playlists.`;
            if (service === 'qobuz') {
                description = 'Connect to Qobuz for high-quality audio streaming with lossless sound quality. Perfect for audiophile couples who appreciate superior music fidelity.';
            }
            
            document.getElementById('oauth-description').textContent = description;
            
            const connectBtn = document.getElementById('oauth-connect-btn');
            connectBtn.textContent = `${info.icon} Connect with ${info.name}`;
            connectBtn.style.backgroundColor = info.color;
            connectBtn.setAttribute('data-service', service);
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
    };
    
    window.showMusicServicesModal = () => {
        // Scroll to playlists section to show the music service connection options
        const playlistsSection = document.getElementById('playlists');
        if (playlistsSection) {
            playlistsSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
            showNotification('Scroll down to connect your music services! 🎵', 'info');
        } else {
            showNotification('Music service integration coming soon! 🎵', 'info');
        }
    };
    
    // Close OAuth modal function
    window.closeOAuthModal = () => {
        const modal = document.getElementById('oauth-modal');
        if (modal) {
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }
    };
    
    // Handle OAuth connection
    window.handleOAuthConnection = (service) => {
        // Simulate connection for demo
        let serviceName = service.charAt(0).toUpperCase() + service.slice(1);
        let message = `${serviceName} connected successfully! (Demo mode)`;
        
        if (service === 'qobuz') {
            message = 'Qobuz connected! Now you can access high-quality audio streaming with lossless sound quality. (Demo mode)';
        }
        
        showNotification(message, 'success');
        closeOAuthModal();
        
        // Update status indicators - using correct class names for Qobuz
        const statusDot = document.getElementById(`${service}-status`);
        const statusText = document.getElementById(`${service}-status-text`);
        if (statusDot && statusText) {
            if (service === 'qobuz') {
                statusDot.className = 'w-3 h-3 bg-green-400 rounded-full';
            } else {
                statusDot.className = 'w-2 h-2 bg-green-400 rounded-full';
            }
            statusText.textContent = 'Connected';
        }
        
        // Update connectedServices object
        if (connectedServices && connectedServices[service]) {
            connectedServices[service].connected = true;
            if (service === 'qobuz') {
                connectedServices[service].credentials = {
                    username: 'demo_user',
                    app_id: 'demo_app_id',
                    app_secret: 'demo_secret',
                    connected_at: new Date().toISOString()
                };
            }
            saveConnectedServices();
        }
    };
    
    // Add event listeners for OAuth modal
    document.addEventListener('DOMContentLoaded', () => {
        const closeOAuthBtn = document.getElementById('close-oauth-modal');
        const oauthConnectBtn = document.getElementById('oauth-connect-btn');
        
        if (closeOAuthBtn) {
            closeOAuthBtn.addEventListener('click', closeOAuthModal);
        }
        
        if (oauthConnectBtn) {
            oauthConnectBtn.addEventListener('click', (e) => {
                const service = e.target.getAttribute('data-service');
                if (service) {
                    handleOAuthConnection(service);
                }
            });
        }
        
        // Close modal on backdrop click
        const oauthModal = document.getElementById('oauth-modal');
        if (oauthModal) {
            oauthModal.addEventListener('click', (e) => {
                if (e.target === oauthModal) {
                    closeOAuthModal();
                }
            });
        }
        
        // Playlist modal event listeners
        const closePlaylistModal = document.getElementById('close-playlist-modal');
        const cancelPlaylistModal = document.getElementById('cancel-playlist-modal');
        const closeShareModal = document.getElementById('close-share-modal');
        
        if (closePlaylistModal) {
            closePlaylistModal.addEventListener('click', () => {
                document.getElementById('create-playlist-modal')?.classList.add('hidden');
                document.body.style.overflow = '';
            });
        }
        
        if (cancelPlaylistModal) {
            cancelPlaylistModal.addEventListener('click', () => {
                document.getElementById('create-playlist-modal')?.classList.add('hidden');
                document.body.style.overflow = '';
            });
        }
        
        if (closeShareModal) {
            closeShareModal.addEventListener('click', () => {
                document.getElementById('share-playlist-modal')?.classList.add('hidden');
                document.body.style.overflow = '';
            });
        }
    });
    
    window.openCreatePlaylistModal = () => {
        const modal = document.getElementById('create-playlist-modal');
        if (modal) {
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
    };
    
    window.createFromTemplate = (type) => {
        if (type === 'audiophile') {
            // Check if Qobuz is connected
            if (!connectedServices.qobuz.connected) {
                showNotification('🎧 Connect to Qobuz first for Hi-Res audio playlists!', 'info');
                return;
            }
            showNotification('Creating audiophile playlist with Hi-Res quality tracks... 🎧', 'success');
        } else {
            showNotification('Creating ' + type + ' playlist...', 'success');
        }
        
        // Open modal with the selected template
        openCreatePlaylistModal(type);
    };
    window.selectPlaylist = (id) => {
        currentPlaylist = playlists.find(p => p.id === id);
        updateCurrentPlaylistDisplay();
        showNotification('Selected playlist', 'info');
    };
    window.playPlaylist = (id) => showNotification('Playing playlist...', 'success');
    window.sharePlaylist = (id) => document.getElementById('share-playlist-modal')?.classList.remove('hidden');
    
    if (playlists.length > 0) {
        currentPlaylist = playlists[0];
        setTimeout(updateCurrentPlaylistDisplay, 1000);
    }

    // 🎨 Cohesive Navigation & Progress Bar System
    // Initialize floating navigation and progress tracking
    initFloatingNavigation();
    initProgressBar();
    initSectionTransitions();
    
    function initFloatingNavigation() {
        const navToggle = document.getElementById('nav-toggle');
        const navMenu = document.getElementById('nav-menu');
        const floatingNav = document.getElementById('floating-nav');
        const navLinks = document.querySelectorAll('.floating-nav .nav-link');
        
        // Toggle navigation menu
        navToggle?.addEventListener('click', () => {
            const isHidden = navMenu.classList.contains('hidden');
            navMenu.classList.toggle('hidden');
            floatingNav.classList.toggle('collapsed', !isHidden);
            navToggle.querySelector('.hamburger-icon').textContent = isHidden ? '✕' : '☰';
        });
        
        // Active section tracking
        const sections = document.querySelectorAll('section[id]');
        
        function updateActiveSection() {
            const scrollPos = window.scrollY + 100;
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');
                
                if (scrollPos >= sectionTop && scrollPos < sectionTop + sectionHeight) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('data-section') === sectionId) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        }
        
        // Smooth scroll for navigation links
        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetSection = document.getElementById(targetId);
                
                if (targetSection) {
                    targetSection.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                    
                    // Close mobile menu after navigation
                    navMenu.classList.add('hidden');
                    floatingNav.classList.add('collapsed');
                    navToggle.querySelector('.hamburger-icon').textContent = '☰';
                }
            });
        });
        
        // Update active section on scroll
        window.addEventListener('scroll', updateActiveSection);
        updateActiveSection(); // Initial call
    }
    
    function initProgressBar() {
        const progressBar = document.getElementById('progress-bar');
        
        function updateProgressBar() {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            
            if (progressBar) {
                progressBar.style.width = scrolled + '%';
            }
        }
        
        window.addEventListener('scroll', updateProgressBar);
        updateProgressBar(); // Initial call
    }
    
    function initSectionTransitions() {
        // Add intersection observer for section animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);
        
        // Observe all main sections
        document.querySelectorAll('section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
            sectionObserver.observe(section);
        });
        
        // Hero section should be visible immediately
        const heroSection = document.getElementById('hero');
        if (heroSection) {
            heroSection.style.opacity = '1';
            heroSection.style.transform = 'translateY(0)';
        }
    }
    
    // Add section cross-references and visual bridges
    function addSectionBridges() {
        const sections = [
            { from: 'itinerary', to: 'explore', text: '🗺️ Discover more places to explore' },
            { from: 'explore', to: 'restaurant-week', text: '🍽️ Check out Restaurant Week specials' },
            { from: 'restaurant-week', to: 'map', text: '📍 See all locations on the map' },
            { from: 'map', to: 'notes', text: '📝 Plan your perfect day together' },
            { from: 'notes', to: 'our-song', text: '🎵 Set the mood with your song' },
            { from: 'our-song', to: 'memories', text: '📸 Capture and share your memories' },
            { from: 'memories', to: 'playlists', text: '🎶 Create the perfect soundtrack' },
            { from: 'playlists', to: 'plan', text: '✈️ Get all the travel details' },
            { from: 'plan', to: 'weather', text: '🌤️ Check the forecast for your trip' }
        ];
        
        sections.forEach(bridge => {
            const fromSection = document.getElementById(bridge.from);
            if (fromSection) {
                const bridgeElement = document.createElement('div');
                bridgeElement.className = 'cohesive-section-bridge';
                bridgeElement.innerHTML = `
                    <div class="text-center py-8 bg-gradient-to-r from-transparent via-white/50 to-transparent">
                        <a href="#${bridge.to}" class="cohesive-btn cohesive-btn-outline">
                            ${bridge.text}
                        </a>
                    </div>
                `;
                fromSection.appendChild(bridgeElement);
            }
        });
    }
    
    // Initialize section bridges
    setTimeout(addSectionBridges, 1000);
});
</script>
<script>
    // FAQ accordion toggle functionality
    function toggleFAQ(button) {
        const answer = button.parentElement.querySelector('.faq-answer');
        const icon = button.querySelector('.faq-icon');
        const expanded = button.getAttribute('aria-expanded') === 'true';

        if (expanded) {
            answer.classList.add('hidden');
            icon.textContent = '+';
            button.setAttribute('aria-expanded', 'false');
        } else {
            // Close all other open FAQs in the same section
            document.querySelectorAll('#faq .faq-question[aria-expanded="true"]').forEach(openBtn => {
                openBtn.setAttribute('aria-expanded', 'false');
                openBtn.parentElement.querySelector('.faq-answer').classList.add('hidden');
                openBtn.querySelector('.faq-icon').textContent = '+';
            });
            answer.classList.remove('hidden');
            icon.textContent = '–';
            button.setAttribute('aria-expanded', 'true');
        }
    }
</script>
</body>
</html>
